var Bf=Object.defineProperty;var sl=t=>{throw TypeError(t)};var Hf=(t,e,s)=>e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var at=(t,e,s)=>Hf(t,typeof e!="symbol"?e+"":e,s),Ho=(t,e,s)=>e.has(t)||sl("Cannot "+s);var _=(t,e,s)=>(Ho(t,e,"read from private field"),s?s.call(t):e.get(t)),U=(t,e,s)=>e.has(t)?sl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),D=(t,e,s,r)=>(Ho(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),ee=(t,e,s)=>(Ho(t,e,"access private method"),s);var Pn=(t,e,s,r)=>({set _(n){D(t,e,n,s)},get _(){return _(t,e,r)}});import{j as o,c as Ac}from"./mui.js";import{a as $r,g as pi,r as p,R as P,v as Rc,b as Oc,u as uo,c as ho,d as qf,e as Ze,f as mi,h as Vf,B as Wf,i as zf,j as Fe,N as Kf}from"./react.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var Ic,rl=$r;Ic=rl.createRoot,rl.hydrateRoot;var Gf=typeof Element<"u",Qf=typeof Map=="function",Jf=typeof Set=="function",Yf=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Wn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var s,r,n;if(Array.isArray(t)){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(!Wn(t[r],e[r]))return!1;return!0}var a;if(Qf&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!Wn(r.value[1],e.get(r.value[0])))return!1;return!0}if(Jf&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Yf&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(s=t.length,s!=e.length)return!1;for(r=s;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(n=Object.keys(t),s=n.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[r]))return!1;if(Gf&&t instanceof Element)return!1;for(r=s;r--!==0;)if(!((n[r]==="_owner"||n[r]==="__v"||n[r]==="__o")&&t.$$typeof)&&!Wn(t[n[r]],e[n[r]]))return!1;return!0}return t!==t&&e!==e}var Xf=function(e,s){try{return Wn(e,s)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Zf=pi(Xf);var ep=function(t,e,s,r,n,a,i,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,r,n,a,i,l],u=0;c=new Error(e.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},tp=ep;const nl=pi(tp);var sp=function(e,s,r,n){var a=r?r.call(n,e,s):void 0;if(a!==void 0)return!!a;if(e===s)return!0;if(typeof e!="object"||!e||typeof s!="object"||!s)return!1;var i=Object.keys(e),l=Object.keys(s);if(i.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(s),d=0;d<i.length;d++){var u=i[d];if(!c(u))return!1;var f=e[u],g=s[u];if(a=r?r.call(n,f,g,u):void 0,a===!1||a===void 0&&f!==g)return!1}return!0};const rp=pi(sp);var Lc=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(Lc||{}),qo={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},ol=Object.values(Lc),gi={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},np=Object.entries(gi).reduce((t,[e,s])=>(t[s]=e,t),{}),ft="data-rh",gr={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},vr=(t,e)=>{for(let s=t.length-1;s>=0;s-=1){const r=t[s];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},op=t=>{let e=vr(t,"title");const s=vr(t,gr.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),s&&e)return s.replace(/%s/g,()=>e);const r=vr(t,gr.DEFAULT_TITLE);return e||r||void 0},ap=t=>vr(t,gr.ON_CHANGE_CLIENT_STATE)||(()=>{}),Vo=(t,e)=>e.filter(s=>typeof s[t]<"u").map(s=>s[t]).reduce((s,r)=>({...s,...r}),{}),ip=(t,e)=>e.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,r)=>{if(!s.length){const n=Object.keys(r);for(let a=0;a<n.length;a+=1){const l=n[a].toLowerCase();if(t.indexOf(l)!==-1&&r[l])return s.concat(r)}}return s},[]),lp=t=>console&&typeof console.warn=="function"&&console.warn(t),Gr=(t,e,s)=>{const r={};return s.filter(n=>Array.isArray(n[t])?!0:(typeof n[t]<"u"&&lp(`Helmet: ${t} should be of type "Array". Instead found type "${typeof n[t]}"`),!1)).map(n=>n[t]).reverse().reduce((n,a)=>{const i={};a.filter(c=>{let d;const u=Object.keys(c);for(let g=0;g<u.length;g+=1){const h=u[g],y=h.toLowerCase();e.indexOf(y)!==-1&&!(d==="rel"&&c[d].toLowerCase()==="canonical")&&!(y==="rel"&&c[y].toLowerCase()==="stylesheet")&&(d=y),e.indexOf(h)!==-1&&(h==="innerHTML"||h==="cssText"||h==="itemprop")&&(d=h)}if(!d||!c[d])return!1;const f=c[d].toLowerCase();return r[d]||(r[d]={}),i[d]||(i[d]={}),r[d][f]?!1:(i[d][f]=!0,!0)}).reverse().forEach(c=>n.push(c));const l=Object.keys(i);for(let c=0;c<l.length;c+=1){const d=l[c],u={...r[d],...i[d]};r[d]=u}return n},[]).reverse()},cp=(t,e)=>{if(Array.isArray(t)&&t.length){for(let s=0;s<t.length;s+=1)if(t[s][e])return!0}return!1},dp=t=>({baseTag:ip(["href"],t),bodyAttributes:Vo("bodyAttributes",t),defer:vr(t,gr.DEFER),encode:vr(t,gr.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Vo("htmlAttributes",t),linkTags:Gr("link",["rel","href"],t),metaTags:Gr("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Gr("noscript",["innerHTML"],t),onChangeClientState:ap(t),scriptTags:Gr("script",["src","innerHTML"],t),styleTags:Gr("style",["cssText"],t),title:op(t),titleAttributes:Vo("titleAttributes",t),prioritizeSeoTags:cp(t,gr.PRIORITIZE_SEO_TAGS)}),Dc=t=>Array.isArray(t)?t.join(""):t,up=(t,e)=>{const s=Object.keys(t);for(let r=0;r<s.length;r+=1)if(e[s[r]]&&e[s[r]].includes(t[s[r]]))return!0;return!1},Wo=(t,e)=>Array.isArray(t)?t.reduce((s,r)=>(up(r,e)?s.priority.push(r):s.default.push(r),s),{priority:[],default:[]}):{default:t,priority:[]},al=(t,e)=>({...t,[e]:void 0}),hp=["noscript","script","style"],va=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Mc=t=>Object.keys(t).reduce((e,s)=>{const r=typeof t[s]<"u"?`${s}="${t[s]}"`:`${s}`;return e?`${e} ${r}`:r},""),fp=(t,e,s,r)=>{const n=Mc(s),a=Dc(e);return n?`<${t} ${ft}="true" ${n}>${va(a,r)}</${t}>`:`<${t} ${ft}="true">${va(a,r)}</${t}>`},pp=(t,e,s=!0)=>e.reduce((r,n)=>{const a=n,i=Object.keys(a).filter(d=>!(d==="innerHTML"||d==="cssText")).reduce((d,u)=>{const f=typeof a[u]>"u"?u:`${u}="${va(a[u],s)}"`;return d?`${d} ${f}`:f},""),l=a.innerHTML||a.cssText||"",c=hp.indexOf(t)===-1;return`${r}<${t} ${ft}="true" ${i}${c?"/>":`>${l}</${t}>`}`},""),$c=(t,e={})=>Object.keys(t).reduce((s,r)=>{const n=gi[r];return s[n||r]=t[r],s},e),mp=(t,e,s)=>{const r={key:e,[ft]:!0},n=$c(s,r);return[P.createElement("title",n,e)]},zn=(t,e)=>e.map((s,r)=>{const n={key:r,[ft]:!0};return Object.keys(s).forEach(a=>{const l=gi[a]||a;if(l==="innerHTML"||l==="cssText"){const c=s.innerHTML||s.cssText;n.dangerouslySetInnerHTML={__html:c}}else n[l]=s[a]}),P.createElement(t,n)}),Je=(t,e,s=!0)=>{switch(t){case"title":return{toComponent:()=>mp(t,e.title,e.titleAttributes),toString:()=>fp(t,e.title,e.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>$c(e),toString:()=>Mc(e)};default:return{toComponent:()=>zn(t,e),toString:()=>pp(t,e,s)}}},gp=({metaTags:t,linkTags:e,scriptTags:s,encode:r})=>{const n=Wo(t,qo.meta),a=Wo(e,qo.link),i=Wo(s,qo.script);return{priorityMethods:{toComponent:()=>[...zn("meta",n.priority),...zn("link",a.priority),...zn("script",i.priority)],toString:()=>`${Je("meta",n.priority,r)} ${Je("link",a.priority,r)} ${Je("script",i.priority,r)}`},metaTags:n.default,linkTags:a.default,scriptTags:i.default}},vp=t=>{const{baseTag:e,bodyAttributes:s,encode:r=!0,htmlAttributes:n,noscriptTags:a,styleTags:i,title:l="",titleAttributes:c,prioritizeSeoTags:d}=t;let{linkTags:u,metaTags:f,scriptTags:g}=t,h={toComponent:()=>{},toString:()=>""};return d&&({priorityMethods:h,linkTags:u,metaTags:f,scriptTags:g}=gp(t)),{priority:h,base:Je("base",e,r),bodyAttributes:Je("bodyAttributes",s,r),htmlAttributes:Je("htmlAttributes",n,r),link:Je("link",u,r),meta:Je("meta",f,r),noscript:Je("noscript",a,r),script:Je("script",g,r),style:Je("style",i,r),title:Je("title",{title:l,titleAttributes:c},r)}},ya=vp,An=[],Fc=!!(typeof window<"u"&&window.document&&window.document.createElement),xa=class{constructor(t,e){at(this,"instances",[]);at(this,"canUseDOM",Fc);at(this,"context");at(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?An:this.instances,add:t=>{(this.canUseDOM?An:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?An:this.instances).indexOf(t);(this.canUseDOM?An:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=ya({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},yp={},Uc=P.createContext(yp),Ms,Bc=(Ms=class extends p.Component{constructor(s){super(s);at(this,"helmetData");this.helmetData=new xa(this.props.context||{},Ms.canUseDOM)}render(){return P.createElement(Uc.Provider,{value:this.helmetData.value},this.props.children)}},at(Ms,"canUseDOM",Fc),Ms),or=(t,e)=>{const s=document.head||document.querySelector("head"),r=s.querySelectorAll(`${t}[${ft}]`),n=[].slice.call(r),a=[];let i;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d))if(d==="innerHTML")c.innerHTML=l.innerHTML;else if(d==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const u=d,f=typeof l[u]>"u"?"":l[u];c.setAttribute(d,f)}c.setAttribute(ft,"true"),n.some((d,u)=>(i=u,c.isEqualNode(d)))?n.splice(i,1):a.push(c)}),n.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),a.forEach(l=>s.appendChild(l)),{oldTags:n,newTags:a}},ba=(t,e)=>{const s=document.getElementsByTagName(t)[0];if(!s)return;const r=s.getAttribute(ft),n=r?r.split(","):[],a=[...n],i=Object.keys(e);for(const l of i){const c=e[l]||"";s.getAttribute(l)!==c&&s.setAttribute(l,c),n.indexOf(l)===-1&&n.push(l);const d=a.indexOf(l);d!==-1&&a.splice(d,1)}for(let l=a.length-1;l>=0;l-=1)s.removeAttribute(a[l]);n.length===a.length?s.removeAttribute(ft):s.getAttribute(ft)!==i.join(",")&&s.setAttribute(ft,i.join(","))},xp=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=Dc(t)),ba("title",e)},il=(t,e)=>{const{baseTag:s,bodyAttributes:r,htmlAttributes:n,linkTags:a,metaTags:i,noscriptTags:l,onChangeClientState:c,scriptTags:d,styleTags:u,title:f,titleAttributes:g}=t;ba("body",r),ba("html",n),xp(f,g);const h={baseTag:or("base",s),linkTags:or("link",a),metaTags:or("meta",i),noscriptTags:or("noscript",l),scriptTags:or("script",d),styleTags:or("style",u)},y={},m={};Object.keys(h).forEach(v=>{const{newTags:b,oldTags:w}=h[v];b.length&&(y[v]=b),w.length&&(m[v]=h[v].oldTags)}),e&&e(),c(t,y,m)},Qr=null,bp=t=>{Qr&&cancelAnimationFrame(Qr),t.defer?Qr=requestAnimationFrame(()=>{il(t,()=>{Qr=null})}):(il(t),Qr=null)},wp=bp,ll=class extends p.Component{constructor(){super(...arguments);at(this,"rendered",!1)}shouldComponentUpdate(e){return!rp(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:s}=this.props.context;let r=null;const n=dp(e.get().map(a=>{const i={...a.props};return delete i.context,i}));Bc.canUseDOM?wp(n):ya&&(r=ya(n)),s(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},ga,jp=(ga=class extends p.Component{shouldComponentUpdate(t){return!Zf(al(this.props,"helmetData"),al(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,s,r){return{...e,[t.type]:[...e[t.type]||[],{...s,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,s,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...s}};case"body":return{...e,bodyAttributes:{...s}};case"html":return{...e,htmlAttributes:{...s}};default:return{...e,[t.type]:{...s}}}}mapArrayTypeChildrenToProps(t,e){let s={...e};return Object.keys(t).forEach(r=>{s={...s,[r]:t[r]}}),s}warnOnInvalidChildren(t,e){return nl(ol.some(s=>t.type===s),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${ol.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),nl(!e||typeof e=="string"||Array.isArray(e)&&!e.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let s={};return P.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:n,...a}=r.props,i=Object.keys(a).reduce((c,d)=>(c[np[d]||d]=a[d],c),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,n),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(n,e);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(r,s,i,n);break;default:e=this.mapObjectTypeChildren(r,e,i,n);break}}),this.mapArrayTypeChildrenToProps(s,e)}render(){const{children:t,...e}=this.props;let s={...e},{helmetData:r}=e;if(t&&(s=this.mapChildrenToProps(t,s)),r&&!(r instanceof xa)){const n=r;r=new xa(n.context,!0),delete s.helmetData}return r?P.createElement(ll,{...s,context:r.value}):P.createElement(Uc.Consumer,null,n=>P.createElement(ll,{...s,context:n}))}},at(ga,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),ga);const _p=1,Sp=1e6;let zo=0;function Cp(){return zo=(zo+1)%Number.MAX_SAFE_INTEGER,zo.toString()}const Ko=new Map,cl=t=>{if(Ko.has(t))return;const e=setTimeout(()=>{Ko.delete(t),nn({type:"REMOVE_TOAST",toastId:t})},Sp);Ko.set(t,e)},Ep=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,_p)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=e;return s?cl(s):t.toasts.forEach(r=>{cl(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)}}},Kn=[];let Gn={toasts:[]};function nn(t){Gn=Ep(Gn,t),Kn.forEach(e=>{e(Gn)})}function Tp({...t}){const e=Cp(),s=n=>nn({type:"UPDATE_TOAST",toast:{...n,id:e}}),r=()=>nn({type:"DISMISS_TOAST",toastId:e});return nn({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:n=>{n||r()}}}),{id:e,dismiss:r,update:s}}function st(){const[t,e]=p.useState(Gn);return p.useEffect(()=>(Kn.push(e),()=>{const s=Kn.indexOf(e);s>-1&&Kn.splice(s,1)}),[t]),{...t,toast:Tp,dismiss:s=>nn({type:"DISMISS_TOAST",toastId:s})}}function V(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function dl(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Hc(...t){return e=>{let s=!1;const r=t.map(n=>{const a=dl(n,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let n=0;n<r.length;n++){const a=r[n];typeof a=="function"?a():dl(t[n],null)}}}}function ve(...t){return p.useCallback(Hc(...t),t)}function Np(t,e){const s=p.createContext(e),r=a=>{const{children:i,...l}=a,c=p.useMemo(()=>l,Object.values(l));return o.jsx(s.Provider,{value:c,children:i})};r.displayName=t+"Provider";function n(a){const i=p.useContext(s);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,n]}function ws(t,e=[]){let s=[];function r(a,i){const l=p.createContext(i),c=s.length;s=[...s,i];const d=f=>{var b;const{scope:g,children:h,...y}=f,m=((b=g==null?void 0:g[t])==null?void 0:b[c])||l,v=p.useMemo(()=>y,Object.values(y));return o.jsx(m.Provider,{value:v,children:h})};d.displayName=a+"Provider";function u(f,g){var m;const h=((m=g==null?void 0:g[t])==null?void 0:m[c])||l,y=p.useContext(h);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,u]}const n=()=>{const a=s.map(i=>p.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return n.scopeName=t,[r,kp(n,...e)]}function kp(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return s.scopeName=e.scopeName,s}function Or(t){const e=Ap(t),s=p.forwardRef((r,n)=>{const{children:a,...i}=r,l=p.Children.toArray(a),c=l.find(Op);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...i,ref:n,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return o.jsx(e,{...i,ref:n,children:a})});return s.displayName=`${t}.Slot`,s}var Pp=Or("Slot");function Ap(t){const e=p.forwardRef((s,r)=>{const{children:n,...a}=s;if(p.isValidElement(n)){const i=Lp(n),l=Ip(a,n.props);return n.type!==p.Fragment&&(l.ref=r?Hc(r,i):i),p.cloneElement(n,l)}return p.Children.count(n)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qc=Symbol("radix.slottable");function Rp(t){const e=({children:s})=>o.jsx(o.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=qc,e}function Op(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qc}function Ip(t,e){const s={...e};for(const r in e){const n=t[r],a=e[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...l)=>{const c=a(...l);return n(...l),c}:n&&(s[r]=n):r==="style"?s[r]={...n,...a}:r==="className"&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...t,...s}}function Lp(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function vi(t){const e=t+"CollectionProvider",[s,r]=ws(e),[n,a]=s(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:v,children:b}=m,w=P.useRef(null),x=P.useRef(new Map).current;return o.jsx(n,{scope:v,itemMap:x,collectionRef:w,children:b})};i.displayName=e;const l=t+"CollectionSlot",c=Or(l),d=P.forwardRef((m,v)=>{const{scope:b,children:w}=m,x=a(l,b),j=ve(v,x.collectionRef);return o.jsx(c,{ref:j,children:w})});d.displayName=l;const u=t+"CollectionItemSlot",f="data-radix-collection-item",g=Or(u),h=P.forwardRef((m,v)=>{const{scope:b,children:w,...x}=m,j=P.useRef(null),S=ve(v,j),C=a(u,b);return P.useEffect(()=>(C.itemMap.set(j,{ref:j,...x}),()=>void C.itemMap.delete(j))),o.jsx(g,{[f]:"",ref:S,children:w})});h.displayName=u;function y(m){const v=a(t+"CollectionConsumer",m);return P.useCallback(()=>{const w=v.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((C,E)=>x.indexOf(C.ref.current)-x.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:d,ItemSlot:h},y,r]}var Dp=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],te=Dp.reduce((t,e)=>{const s=Or(`Primitive.${e}`),r=p.forwardRef((n,a)=>{const{asChild:i,...l}=n,c=i?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Vc(t,e){t&&$r.flushSync(()=>t.dispatchEvent(e))}function et(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...s)=>{var r;return(r=e.current)==null?void 0:r.call(e,...s)},[])}function Mp(t,e=globalThis==null?void 0:globalThis.document){const s=et(t);p.useEffect(()=>{const r=n=>{n.key==="Escape"&&s(n)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var $p="DismissableLayer",wa="dismissableLayer.update",Fp="dismissableLayer.pointerDownOutside",Up="dismissableLayer.focusOutside",ul,Wc=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bn=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=t,d=p.useContext(Wc),[u,f]=p.useState(null),g=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=p.useState({}),y=ve(e,E=>f(E)),m=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=m.indexOf(v),w=u?m.indexOf(u):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,j=w>=b,S=Hp(E=>{const N=E.target,L=[...d.branches].some(R=>R.contains(N));!j||L||(n==null||n(E),i==null||i(E),E.defaultPrevented||l==null||l())},g),C=qp(E=>{const N=E.target;[...d.branches].some(R=>R.contains(N))||(a==null||a(E),i==null||i(E),E.defaultPrevented||l==null||l())},g);return Mp(E=>{w===d.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},g),p.useEffect(()=>{if(u)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ul=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),hl(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ul)}},[u,g,s,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),hl())},[u,d]),p.useEffect(()=>{const E=()=>h({});return document.addEventListener(wa,E),()=>document.removeEventListener(wa,E)},[]),o.jsx(te.div,{...c,ref:y,style:{pointerEvents:x?j?"auto":"none":void 0,...t.style},onFocusCapture:V(t.onFocusCapture,C.onFocusCapture),onBlurCapture:V(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:V(t.onPointerDownCapture,S.onPointerDownCapture)})});bn.displayName=$p;var Bp="DismissableLayerBranch",zc=p.forwardRef((t,e)=>{const s=p.useContext(Wc),r=p.useRef(null),n=ve(e,r);return p.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),o.jsx(te.div,{...t,ref:n})});zc.displayName=Bp;function Hp(t,e=globalThis==null?void 0:globalThis.document){const s=et(t),r=p.useRef(!1),n=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){Kc(Fp,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=c,e.addEventListener("click",n.current,{once:!0})):c()}else e.removeEventListener("click",n.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",n.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function qp(t,e=globalThis==null?void 0:globalThis.document){const s=et(t),r=p.useRef(!1);return p.useEffect(()=>{const n=a=>{a.target&&!r.current&&Kc(Up,s,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function hl(){const t=new CustomEvent(wa);document.dispatchEvent(t)}function Kc(t,e,s,{discrete:r}){const n=s.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),r?Vc(n,a):n.dispatchEvent(a)}var Vp=bn,Wp=zc,Oe=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},zp="Portal",fo=p.forwardRef((t,e)=>{var l;const{container:s,...r}=t,[n,a]=p.useState(!1);Oe(()=>a(!0),[]);const i=s||n&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Rc.createPortal(o.jsx(te.div,{...r,ref:e}),i):null});fo.displayName=zp;function Kp(t,e){return p.useReducer((s,r)=>e[s][r]??s,t)}var Zs=t=>{const{present:e,children:s}=t,r=Gp(e),n=typeof s=="function"?s({present:r.isPresent}):p.Children.only(s),a=ve(r.ref,Qp(n));return typeof s=="function"||r.isPresent?p.cloneElement(n,{ref:a}):null};Zs.displayName="Presence";function Gp(t){const[e,s]=p.useState(),r=p.useRef(null),n=p.useRef(t),a=p.useRef("none"),i=t?"mounted":"unmounted",[l,c]=Kp(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Rn(r.current);a.current=l==="mounted"?d:"none"},[l]),Oe(()=>{const d=r.current,u=n.current;if(u!==t){const g=a.current,h=Rn(d);t?c("MOUNT"):h==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&g!==h?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,c]),Oe(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,f=h=>{const m=Rn(r.current).includes(CSS.escape(h.animationName));if(h.target===e&&m&&(c("ANIMATION_END"),!n.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},g=h=>{h.target===e&&(a.current=Rn(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{r.current=d?getComputedStyle(d):null,s(d)},[])}}function Rn(t){return(t==null?void 0:t.animationName)||"none"}function Qp(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Jp=Oc[" useInsertionEffect ".trim().toString()]||Oe;function Ir({prop:t,defaultProp:e,onChange:s=()=>{},caller:r}){const[n,a,i]=Yp({defaultProp:e,onChange:s}),l=t!==void 0,c=l?t:n;{const u=p.useRef(t!==void 0);p.useEffect(()=>{const f=u.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=p.useCallback(u=>{var f;if(l){const g=Xp(u)?u(t):u;g!==t&&((f=i.current)==null||f.call(i,g))}else a(u)},[l,t,a,i]);return[c,d]}function Yp({defaultProp:t,onChange:e}){const[s,r]=p.useState(t),n=p.useRef(s),a=p.useRef(e);return Jp(()=>{a.current=e},[e]),p.useEffect(()=>{var i;n.current!==s&&((i=a.current)==null||i.call(a,s),n.current=s)},[s,n]),[s,r,a]}function Xp(t){return typeof t=="function"}var Gc=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zp="VisuallyHidden",po=p.forwardRef((t,e)=>o.jsx(te.span,{...t,ref:e,style:{...Gc,...t.style}}));po.displayName=Zp;var em=po,yi="ToastProvider",[xi,tm,sm]=vi("Toast"),[Qc]=ws("Toast",[sm]),[rm,mo]=Qc(yi),Jc=t=>{const{__scopeToast:e,label:s="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:a=50,children:i}=t,[l,c]=p.useState(null),[d,u]=p.useState(0),f=p.useRef(!1),g=p.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${yi}\`. Expected non-empty \`string\`.`),o.jsx(xi.Provider,{scope:e,children:o.jsx(rm,{scope:e,label:s,duration:r,swipeDirection:n,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>u(h=>h+1),[]),onToastRemove:p.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:g,children:i})})};Jc.displayName=yi;var Yc="ToastViewport",nm=["F8"],ja="toast.viewportPause",_a="toast.viewportResume",Xc=p.forwardRef((t,e)=>{const{__scopeToast:s,hotkey:r=nm,label:n="Notifications ({hotkey})",...a}=t,i=mo(Yc,s),l=tm(s),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),f=p.useRef(null),g=ve(e,f,i.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;p.useEffect(()=>{const v=b=>{var x;r.length!==0&&r.every(j=>b[j]||b.code===j)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),p.useEffect(()=>{const v=c.current,b=f.current;if(y&&v&&b){const w=()=>{if(!i.isClosePausedRef.current){const C=new CustomEvent(ja);b.dispatchEvent(C),i.isClosePausedRef.current=!0}},x=()=>{if(i.isClosePausedRef.current){const C=new CustomEvent(_a);b.dispatchEvent(C),i.isClosePausedRef.current=!1}},j=C=>{!v.contains(C.relatedTarget)&&x()},S=()=>{v.contains(document.activeElement)||x()};return v.addEventListener("focusin",w),v.addEventListener("focusout",j),v.addEventListener("pointermove",w),v.addEventListener("pointerleave",S),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{v.removeEventListener("focusin",w),v.removeEventListener("focusout",j),v.removeEventListener("pointermove",w),v.removeEventListener("pointerleave",S),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[y,i.isClosePausedRef]);const m=p.useCallback(({tabbingDirection:v})=>{const w=l().map(x=>{const j=x.ref.current,S=[j,...vm(j)];return v==="forwards"?S:S.reverse()});return(v==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const v=f.current;if(v){const b=w=>{var S,C,E;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const N=document.activeElement,L=w.shiftKey;if(w.target===v&&L){(S=d.current)==null||S.focus();return}const O=m({tabbingDirection:L?"backwards":"forwards"}),B=O.findIndex(A=>A===N);Go(O.slice(B+1))?w.preventDefault():L?(C=d.current)==null||C.focus():(E=u.current)==null||E.focus()}};return v.addEventListener("keydown",b),()=>v.removeEventListener("keydown",b)}},[l,m]),o.jsxs(Wp,{ref:c,role:"region","aria-label":n.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&o.jsx(Sa,{ref:d,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});Go(v)}}),o.jsx(xi.Slot,{scope:s,children:o.jsx(te.ol,{tabIndex:-1,...a,ref:g})}),y&&o.jsx(Sa,{ref:u,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});Go(v)}})]})});Xc.displayName=Yc;var Zc="ToastFocusProxy",Sa=p.forwardRef((t,e)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...n}=t,a=mo(Zc,s);return o.jsx(po,{tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&r()}})});Sa.displayName=Zc;var wn="Toast",om="toast.swipeStart",am="toast.swipeMove",im="toast.swipeCancel",lm="toast.swipeEnd",ed=p.forwardRef((t,e)=>{const{forceMount:s,open:r,defaultOpen:n,onOpenChange:a,...i}=t,[l,c]=Ir({prop:r,defaultProp:n??!0,onChange:a,caller:wn});return o.jsx(Zs,{present:s||l,children:o.jsx(um,{open:l,...i,ref:e,onClose:()=>c(!1),onPause:et(t.onPause),onResume:et(t.onResume),onSwipeStart:V(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:V(t.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:V(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:V(t.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});ed.displayName=wn;var[cm,dm]=Qc(wn,{onClose(){}}),um=p.forwardRef((t,e)=>{const{__scopeToast:s,type:r="foreground",duration:n,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:g,onSwipeEnd:h,...y}=t,m=mo(wn,s),[v,b]=p.useState(null),w=ve(e,A=>b(A)),x=p.useRef(null),j=p.useRef(null),S=n||m.duration,C=p.useRef(0),E=p.useRef(S),N=p.useRef(0),{onToastAdd:L,onToastRemove:R}=m,F=et(()=>{var q;(v==null?void 0:v.contains(document.activeElement))&&((q=m.viewport)==null||q.focus()),i()}),O=p.useCallback(A=>{!A||A===1/0||(window.clearTimeout(N.current),C.current=new Date().getTime(),N.current=window.setTimeout(F,A))},[F]);p.useEffect(()=>{const A=m.viewport;if(A){const q=()=>{O(E.current),d==null||d()},I=()=>{const H=new Date().getTime()-C.current;E.current=E.current-H,window.clearTimeout(N.current),c==null||c()};return A.addEventListener(ja,I),A.addEventListener(_a,q),()=>{A.removeEventListener(ja,I),A.removeEventListener(_a,q)}}},[m.viewport,S,c,d,O]),p.useEffect(()=>{a&&!m.isClosePausedRef.current&&O(S)},[a,S,m.isClosePausedRef,O]),p.useEffect(()=>(L(),()=>R()),[L,R]);const B=p.useMemo(()=>v?id(v):null,[v]);return m.viewport?o.jsxs(o.Fragment,{children:[B&&o.jsx(hm,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:B}),o.jsx(cm,{scope:s,onClose:F,children:$r.createPortal(o.jsx(xi.ItemSlot,{scope:s,children:o.jsx(Vp,{asChild:!0,onEscapeKeyDown:V(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||F(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(te.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":m.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:V(t.onKeyDown,A=>{A.key==="Escape"&&(l==null||l(A.nativeEvent),A.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:V(t.onPointerDown,A=>{A.button===0&&(x.current={x:A.clientX,y:A.clientY})}),onPointerMove:V(t.onPointerMove,A=>{if(!x.current)return;const q=A.clientX-x.current.x,I=A.clientY-x.current.y,H=!!j.current,T=["left","right"].includes(m.swipeDirection),k=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,$=T?k(0,q):0,ae=T?0:k(0,I),K=A.pointerType==="touch"?10:2,z={x:$,y:ae},W={originalEvent:A,delta:z};H?(j.current=z,On(am,f,W,{discrete:!1})):fl(z,m.swipeDirection,K)?(j.current=z,On(om,u,W,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(q)>K||Math.abs(I)>K)&&(x.current=null)}),onPointerUp:V(t.onPointerUp,A=>{const q=j.current,I=A.target;if(I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),j.current=null,x.current=null,q){const H=A.currentTarget,T={originalEvent:A,delta:q};fl(q,m.swipeDirection,m.swipeThreshold)?On(lm,h,T,{discrete:!0}):On(im,g,T,{discrete:!0}),H.addEventListener("click",k=>k.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),hm=t=>{const{__scopeToast:e,children:s,...r}=t,n=mo(wn,e),[a,i]=p.useState(!1),[l,c]=p.useState(!1);return mm(()=>i(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(fo,{asChild:!0,children:o.jsx(po,{...r,children:a&&o.jsxs(o.Fragment,{children:[n.label," ",s]})})})},fm="ToastTitle",td=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return o.jsx(te.div,{...r,ref:e})});td.displayName=fm;var pm="ToastDescription",sd=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t;return o.jsx(te.div,{...r,ref:e})});sd.displayName=pm;var rd="ToastAction",nd=p.forwardRef((t,e)=>{const{altText:s,...r}=t;return s.trim()?o.jsx(ad,{altText:s,asChild:!0,children:o.jsx(bi,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rd}\`. Expected non-empty \`string\`.`),null)});nd.displayName=rd;var od="ToastClose",bi=p.forwardRef((t,e)=>{const{__scopeToast:s,...r}=t,n=dm(od,s);return o.jsx(ad,{asChild:!0,children:o.jsx(te.button,{type:"button",...r,ref:e,onClick:V(t.onClick,n.onClose)})})});bi.displayName=od;var ad=p.forwardRef((t,e)=>{const{__scopeToast:s,altText:r,...n}=t;return o.jsx(te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:e})});function id(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),gm(r)){const n=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!n)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...id(r))}}),e}function On(t,e,s,{discrete:r}){const n=s.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),r?Vc(n,a):n.dispatchEvent(a)}var fl=(t,e,s=0)=>{const r=Math.abs(t.x),n=Math.abs(t.y),a=r>n;return e==="left"||e==="right"?a&&r>s:!a&&n>s};function mm(t=()=>{}){const e=et(t);Oe(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[e])}function gm(t){return t.nodeType===t.ELEMENT_NODE}function vm(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Go(t){const e=document.activeElement;return t.some(s=>s===e?!0:(s.focus(),document.activeElement!==e))}var ym=Jc,ld=Xc,cd=ed,dd=td,ud=sd,hd=nd,fd=bi;const pl=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ml=Ac,go=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return ml(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:a}=e,i=Object.keys(n).map(d=>{const u=s==null?void 0:s[d],f=a==null?void 0:a[d];if(u===null)return null;const g=pl(u)||pl(f);return n[d][g]}),l=s&&Object.entries(s).reduce((d,u)=>{let[f,g]=u;return g===void 0||(d[f]=g),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:f,className:g,...h}=u;return Object.entries(h).every(y=>{let[m,v]=y;return Array.isArray(v)?v.includes({...a,...l}[m]):{...a,...l}[m]===v})?[...d,f,g]:d},[]);return ml(t,i,c,s==null?void 0:s.class,s==null?void 0:s.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pd=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:a,iconNode:i,...l},c)=>p.createElement("svg",{ref:c,...bm,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:pd("lucide",n),...l},[...i.map(([d,u])=>p.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(t,e)=>{const s=p.forwardRef(({className:r,...n},a)=>p.createElement(wm,{ref:a,iconNode:e,className:pd(`lucide-${xm(t)}`,r),...n}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=xe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=xe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=xe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=xe("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=xe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=xe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wi="-",Rm=t=>{const e=Im(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const l=i.split(wi);return l[0]===""&&l.length!==1&&l.shift(),xd(l,e)||Om(i)},getConflictingClassGroupIds:(i,l)=>{const c=s[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},xd=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),n=r?xd(t.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const a=t.join(wi);return(i=e.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},vl=/^\[(.+)\]$/,Om=t=>{if(vl.test(t)){const e=vl.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},Im=t=>{const{theme:e,prefix:s}=t,r={nextPart:new Map,validators:[]};return Dm(Object.entries(t.classGroups),s).forEach(([a,i])=>{ka(i,r,a,e)}),r},ka=(t,e,s,r)=>{t.forEach(n=>{if(typeof n=="string"){const a=n===""?e:yl(e,n);a.classGroupId=s;return}if(typeof n=="function"){if(Lm(n)){ka(n(r),e,s,r);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([a,i])=>{ka(i,yl(e,a),s,r)})})},yl=(t,e)=>{let s=t;return e.split(wi).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},Lm=t=>t.isThemeGetter,Dm=(t,e)=>e?t.map(([s,r])=>{const n=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[e+i,l])):a);return[s,n]}):t,Mm=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const n=(a,i)=>{s.set(a,i),e++,e>t&&(e=0,r=s,s=new Map)};return{get(a){let i=s.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return n(a,i),i},set(a,i){s.has(a)?s.set(a,i):n(a,i)}}},bd="!",$m=t=>{const{separator:e,experimentalParseClassName:s}=t,r=e.length===1,n=e[0],a=e.length,i=l=>{const c=[];let d=0,u=0,f;for(let v=0;v<l.length;v++){let b=l[v];if(d===0){if(b===n&&(r||l.slice(v,v+a)===e)){c.push(l.slice(u,v)),u=v+a;continue}if(b==="/"){f=v;continue}}b==="["?d++:b==="]"&&d--}const g=c.length===0?l:l.substring(u),h=g.startsWith(bd),y=h?g.substring(1):g,m=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:y,maybePostfixModifierPosition:m}};return s?l=>s({className:l,parseClassName:i}):i},Fm=t=>{if(t.length<=1)return t;const e=[];let s=[];return t.forEach(r=>{r[0]==="["?(e.push(...s.sort(),r),s=[]):s.push(r)}),e.push(...s.sort()),e},Um=t=>({cache:Mm(t.cacheSize),parseClassName:$m(t),...Rm(t)}),Bm=/\s+/,Hm=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n}=e,a=[],i=t.trim().split(Bm);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:h}=s(d);let y=!!h,m=r(y?g.substring(0,h):g);if(!m){if(!y){l=d+(l.length>0?" "+l:l);continue}if(m=r(g),!m){l=d+(l.length>0?" "+l:l);continue}y=!1}const v=Fm(u).join(":"),b=f?v+bd:v,w=b+m;if(a.includes(w))continue;a.push(w);const x=n(m,y);for(let j=0;j<x.length;++j){const S=x[j];a.push(b+S)}l=d+(l.length>0?" "+l:l)}return l};function qm(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=wd(e))&&(r&&(r+=" "),r+=s);return r}const wd=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=wd(t[r]))&&(s&&(s+=" "),s+=e);return s};function Vm(t,...e){let s,r,n,a=i;function i(c){const d=e.reduce((u,f)=>f(u),t());return s=Um(d),r=s.cache.get,n=s.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const u=Hm(c,s);return n(c,u),u}return function(){return a(qm.apply(null,arguments))}}const ye=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},jd=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wm=/^\d+\/\d+$/,zm=new Set(["px","full","screen"]),Km=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Jm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ym=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kt=t=>yr(t)||zm.has(t)||Wm.test(t),Xt=t=>Fr(t,"length",og),yr=t=>!!t&&!Number.isNaN(Number(t)),Qo=t=>Fr(t,"number",yr),Jr=t=>!!t&&Number.isInteger(Number(t)),Xm=t=>t.endsWith("%")&&yr(t.slice(0,-1)),X=t=>jd.test(t),Zt=t=>Km.test(t),Zm=new Set(["length","size","percentage"]),eg=t=>Fr(t,Zm,_d),tg=t=>Fr(t,"position",_d),sg=new Set(["image","url"]),rg=t=>Fr(t,sg,ig),ng=t=>Fr(t,"",ag),Yr=()=>!0,Fr=(t,e,s)=>{const r=jd.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):s(r[2]):!1},og=t=>Gm.test(t)&&!Qm.test(t),_d=()=>!1,ag=t=>Jm.test(t),ig=t=>Ym.test(t),lg=()=>{const t=ye("colors"),e=ye("spacing"),s=ye("blur"),r=ye("brightness"),n=ye("borderColor"),a=ye("borderRadius"),i=ye("borderSpacing"),l=ye("borderWidth"),c=ye("contrast"),d=ye("grayscale"),u=ye("hueRotate"),f=ye("invert"),g=ye("gap"),h=ye("gradientColorStops"),y=ye("gradientColorStopPositions"),m=ye("inset"),v=ye("margin"),b=ye("opacity"),w=ye("padding"),x=ye("saturate"),j=ye("scale"),S=ye("sepia"),C=ye("skew"),E=ye("space"),N=ye("translate"),L=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",X,e],O=()=>[X,e],B=()=>["",kt,Xt],A=()=>["auto",yr,X],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],k=()=>["","0",X],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[yr,X];return{cacheSize:500,separator:":",theme:{colors:[Yr],spacing:[kt,Xt],blur:["none","",Zt,X],brightness:ae(),borderColor:[t],borderRadius:["none","","full",Zt,X],borderSpacing:O(),borderWidth:B(),contrast:ae(),grayscale:k(),hueRotate:ae(),invert:k(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[Xm,Xt],inset:F(),margin:F(),opacity:ae(),padding:O(),saturate:ae(),scale:ae(),sepia:k(),skew:ae(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",X]}],container:["container"],columns:[{columns:[Zt]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),X]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jr,X]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",X]}],grow:[{grow:k()}],shrink:[{shrink:k()}],order:[{order:["first","last","none",Jr,X]}],"grid-cols":[{"grid-cols":[Yr]}],"col-start-end":[{col:["auto",{span:["full",Jr,X]},X]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Yr]}],"row-start-end":[{row:["auto",{span:[Jr,X]},X]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",X]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",X]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",X,e]}],"min-w":[{"min-w":[X,e,"min","max","fit"]}],"max-w":[{"max-w":[X,e,"none","full","min","max","fit","prose",{screen:[Zt]},Zt]}],h:[{h:[X,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[X,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[X,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[X,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zt,Xt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qo]}],"font-family":[{font:[Yr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",X]}],"line-clamp":[{"line-clamp":["none",yr,Qo]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",kt,X]}],"list-image":[{"list-image":["none",X]}],"list-style-type":[{list:["none","disc","decimal",X]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",kt,Xt]}],"underline-offset":[{"underline-offset":["auto",kt,X]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),tg]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",eg]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rg]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:I()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[kt,X]}],"outline-w":[{outline:[kt,Xt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[kt,Xt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zt,ng]}],"shadow-color":[{shadow:[Yr]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zt,X]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",X]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",X]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",X]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Jr,X]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",X]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[kt,Xt,Qo]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},cg=Vm(lg);function J(...t){return cg(Ac(t))}const dg=ym,Sd=p.forwardRef(({className:t,...e},s)=>o.jsx(ld,{ref:s,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));Sd.displayName=ld.displayName;const ug=go("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cd=p.forwardRef(({className:t,variant:e,...s},r)=>o.jsx(cd,{ref:r,className:J(ug({variant:e}),t),...s}));Cd.displayName=cd.displayName;const hg=p.forwardRef(({className:t,...e},s)=>o.jsx(hd,{ref:s,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));hg.displayName=hd.displayName;const Ed=p.forwardRef(({className:t,...e},s)=>o.jsx(fd,{ref:s,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(vo,{className:"h-4 w-4"})}));Ed.displayName=fd.displayName;const Td=p.forwardRef(({className:t,...e},s)=>o.jsx(dd,{ref:s,className:J("text-sm font-semibold",t),...e}));Td.displayName=dd.displayName;const Nd=p.forwardRef(({className:t,...e},s)=>o.jsx(ud,{ref:s,className:J("text-sm opacity-90",t),...e}));Nd.displayName=ud.displayName;function fg(){const{toasts:t}=st();return o.jsxs(dg,{children:[t.map(function({id:e,title:s,description:r,action:n,...a}){return o.jsxs(Cd,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[s&&o.jsx(Td,{children:s}),r&&o.jsx(Nd,{children:r})]}),n,o.jsx(Ed,{})]},e)}),o.jsx(Sd,{})]})}var xl=["light","dark"],pg="(prefers-color-scheme: dark)",mg=p.createContext(void 0),gg={setTheme:t=>{},themes:[]},vg=()=>{var t;return(t=p.useContext(mg))!=null?t:gg};p.memo(({forcedTheme:t,storageKey:e,attribute:s,enableSystem:r,enableColorScheme:n,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let d=a==="system",u=s==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${s}',s='setAttribute';`,f=n?xl.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(y,m=!1,v=!0)=>{let b=i?i[y]:y,w=m?y+"|| ''":`'${b}'`,x="";return n&&v&&!m&&xl.includes(y)&&(x+=`d.style.colorScheme = '${y}';`),s==="class"?m||b?x+=`c.add(${w})`:x+="null":b&&(x+=`d[s](n,${w})`),x},h=t?`!function(){${u}${g(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${pg}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${g(i?"x[e]":"e",!0)}}${d?"":"else{"+g(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${g(i?"x[e]":"e",!0)}}else{${g(a,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var yg=t=>{switch(t){case"success":return wg;case"info":return _g;case"warning":return jg;case"error":return Sg;default:return null}},xg=Array(12).fill(0),bg=({visible:t,className:e})=>P.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},P.createElement("div",{className:"sonner-spinner"},xg.map((s,r)=>P.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),wg=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jg=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_g=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Sg=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},P.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cg=P.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},P.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Eg=()=>{let[t,e]=P.useState(document.hidden);return P.useEffect(()=>{let s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t},Pa=1,Tg=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:s,...r}=t,n=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Pa++,a=this.toasts.find(l=>l.id===n),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),a?this.toasts=this.toasts.map(l=>l.id===n?(this.publish({...l,...t,id:n,title:s}),{...l,...t,id:n,dismissible:i,title:s}):l):this.addToast({title:s,...r,dismissible:i,id:n}),n},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),n=s!==void 0,a,i=r.then(async c=>{if(a=["resolve",c],P.isValidElement(c))n=!1,this.create({id:s,type:"default",message:c});else if(kg(c)&&!c.ok){n=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:s,type:"error",message:d,description:u})}else if(e.success!==void 0){n=!1;let d=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:s,type:"success",message:d,description:u})}}).catch(async c=>{if(a=["reject",c],e.error!==void 0){n=!1;let d=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:s,type:"error",message:d,description:u})}}).finally(()=>{var c;n&&(this.dismiss(s),s=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>i.then(()=>a[0]==="reject"?d(a[1]):c(a[1])).catch(d));return typeof s!="string"&&typeof s!="number"?{unwrap:l}:Object.assign(s,{unwrap:l})},this.custom=(t,e)=>{let s=(e==null?void 0:e.id)||Pa++;return this.create({jsx:t(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},He=new Tg,Ng=(t,e)=>{let s=(e==null?void 0:e.id)||Pa++;return He.addToast({title:t,...e,id:s}),s},kg=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Pg=Ng,Ag=()=>He.toasts,Rg=()=>He.getActiveToasts();Object.assign(Pg,{success:He.success,info:He.info,warning:He.warning,error:He.error,custom:He.custom,message:He.message,promise:He.promise,dismiss:He.dismiss,loading:He.loading},{getHistory:Ag,getToasts:Rg});function Og(t,{insertAt:e}={}){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Og(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function In(t){return t.label!==void 0}var Ig=3,Lg="32px",Dg="16px",bl=4e3,Mg=356,$g=14,Fg=20,Ug=200;function it(...t){return t.filter(Boolean).join(" ")}function Bg(t){let[e,s]=t.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}var Hg=t=>{var e,s,r,n,a,i,l,c,d,u,f;let{invert:g,toast:h,unstyled:y,interacting:m,setHeights:v,visibleToasts:b,heights:w,index:x,toasts:j,expanded:S,removeToast:C,defaultRichColors:E,closeButton:N,style:L,cancelButtonStyle:R,actionButtonStyle:F,className:O="",descriptionClassName:B="",duration:A,position:q,gap:I,loadingIcon:H,expandByDefault:T,classNames:k,icons:$,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:K}=t,[z,W]=P.useState(null),[be,Se]=P.useState(null),[M,ce]=P.useState(!1),[me,ie]=P.useState(!1),[Z,le]=P.useState(!1),[ke,Ge]=P.useState(!1),[Ns,Gt]=P.useState(!1),[ks,zr]=P.useState(0),[tr,Ji]=P.useState(0),Kr=P.useRef(h.duration||A||bl),Yi=P.useRef(null),Ps=P.useRef(null),Rf=x===0,Of=x+1<=b,Qe=h.type,sr=h.dismissible!==!1,If=h.className||"",Lf=h.descriptionClassName||"",kn=P.useMemo(()=>w.findIndex(Q=>Q.toastId===h.id)||0,[w,h.id]),Df=P.useMemo(()=>{var Q;return(Q=h.closeButton)!=null?Q:N},[h.closeButton,N]),Xi=P.useMemo(()=>h.duration||A||bl,[h.duration,A]),Uo=P.useRef(0),rr=P.useRef(0),Zi=P.useRef(0),nr=P.useRef(null),[Mf,$f]=q.split("-"),el=P.useMemo(()=>w.reduce((Q,fe,we)=>we>=kn?Q:Q+fe.height,0),[w,kn]),tl=Eg(),Ff=h.invert||g,Bo=Qe==="loading";rr.current=P.useMemo(()=>kn*I+el,[kn,el]),P.useEffect(()=>{Kr.current=Xi},[Xi]),P.useEffect(()=>{ce(!0)},[]),P.useEffect(()=>{let Q=Ps.current;if(Q){let fe=Q.getBoundingClientRect().height;return Ji(fe),v(we=>[{toastId:h.id,height:fe,position:h.position},...we]),()=>v(we=>we.filter(rt=>rt.toastId!==h.id))}},[v,h.id]),P.useLayoutEffect(()=>{if(!M)return;let Q=Ps.current,fe=Q.style.height;Q.style.height="auto";let we=Q.getBoundingClientRect().height;Q.style.height=fe,Ji(we),v(rt=>rt.find(nt=>nt.toastId===h.id)?rt.map(nt=>nt.toastId===h.id?{...nt,height:we}:nt):[{toastId:h.id,height:we,position:h.position},...rt])},[M,h.title,h.description,v,h.id]);let Qt=P.useCallback(()=>{ie(!0),zr(rr.current),v(Q=>Q.filter(fe=>fe.toastId!==h.id)),setTimeout(()=>{C(h)},Ug)},[h,C,v,rr]);P.useEffect(()=>{if(h.promise&&Qe==="loading"||h.duration===1/0||h.type==="loading")return;let Q;return S||m||K&&tl?(()=>{if(Zi.current<Uo.current){let fe=new Date().getTime()-Uo.current;Kr.current=Kr.current-fe}Zi.current=new Date().getTime()})():Kr.current!==1/0&&(Uo.current=new Date().getTime(),Q=setTimeout(()=>{var fe;(fe=h.onAutoClose)==null||fe.call(h,h),Qt()},Kr.current)),()=>clearTimeout(Q)},[S,m,h,Qe,K,tl,Qt]),P.useEffect(()=>{h.delete&&Qt()},[Qt,h.delete]);function Uf(){var Q,fe,we;return $!=null&&$.loading?P.createElement("div",{className:it(k==null?void 0:k.loader,(Q=h==null?void 0:h.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":Qe==="loading"},$.loading):H?P.createElement("div",{className:it(k==null?void 0:k.loader,(fe=h==null?void 0:h.classNames)==null?void 0:fe.loader,"sonner-loader"),"data-visible":Qe==="loading"},H):P.createElement(bg,{className:it(k==null?void 0:k.loader,(we=h==null?void 0:h.classNames)==null?void 0:we.loader),visible:Qe==="loading"})}return P.createElement("li",{tabIndex:0,ref:Ps,className:it(O,If,k==null?void 0:k.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,k==null?void 0:k.default,k==null?void 0:k[Qe],(s=h==null?void 0:h.classNames)==null?void 0:s[Qe]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:E,"data-styled":!(h.jsx||h.unstyled||y),"data-mounted":M,"data-promise":!!h.promise,"data-swiped":Ns,"data-removed":me,"data-visible":Of,"data-y-position":Mf,"data-x-position":$f,"data-index":x,"data-front":Rf,"data-swiping":Z,"data-dismissible":sr,"data-type":Qe,"data-invert":Ff,"data-swipe-out":ke,"data-swipe-direction":be,"data-expanded":!!(S||T&&M),style:{"--index":x,"--toasts-before":x,"--z-index":j.length-x,"--offset":`${me?ks:rr.current}px`,"--initial-height":T?"auto":`${tr}px`,...L,...h.style},onDragEnd:()=>{le(!1),W(null),nr.current=null},onPointerDown:Q=>{Bo||!sr||(Yi.current=new Date,zr(rr.current),Q.target.setPointerCapture(Q.pointerId),Q.target.tagName!=="BUTTON"&&(le(!0),nr.current={x:Q.clientX,y:Q.clientY}))},onPointerUp:()=>{var Q,fe,we,rt;if(ke||!sr)return;nr.current=null;let nt=Number(((Q=Ps.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Jt=Number(((fe=Ps.current)==null?void 0:fe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),As=new Date().getTime()-((we=Yi.current)==null?void 0:we.getTime()),ot=z==="x"?nt:Jt,Yt=Math.abs(ot)/As;if(Math.abs(ot)>=Fg||Yt>.11){zr(rr.current),(rt=h.onDismiss)==null||rt.call(h,h),Se(z==="x"?nt>0?"right":"left":Jt>0?"down":"up"),Qt(),Ge(!0),Gt(!1);return}le(!1),W(null)},onPointerMove:Q=>{var fe,we,rt,nt;if(!nr.current||!sr||((fe=window.getSelection())==null?void 0:fe.toString().length)>0)return;let Jt=Q.clientY-nr.current.y,As=Q.clientX-nr.current.x,ot=(we=t.swipeDirections)!=null?we:Bg(q);!z&&(Math.abs(As)>1||Math.abs(Jt)>1)&&W(Math.abs(As)>Math.abs(Jt)?"x":"y");let Yt={x:0,y:0};z==="y"?(ot.includes("top")||ot.includes("bottom"))&&(ot.includes("top")&&Jt<0||ot.includes("bottom")&&Jt>0)&&(Yt.y=Jt):z==="x"&&(ot.includes("left")||ot.includes("right"))&&(ot.includes("left")&&As<0||ot.includes("right")&&As>0)&&(Yt.x=As),(Math.abs(Yt.x)>0||Math.abs(Yt.y)>0)&&Gt(!0),(rt=Ps.current)==null||rt.style.setProperty("--swipe-amount-x",`${Yt.x}px`),(nt=Ps.current)==null||nt.style.setProperty("--swipe-amount-y",`${Yt.y}px`)}},Df&&!h.jsx?P.createElement("button",{"aria-label":ae,"data-disabled":Bo,"data-close-button":!0,onClick:Bo||!sr?()=>{}:()=>{var Q;Qt(),(Q=h.onDismiss)==null||Q.call(h,h)},className:it(k==null?void 0:k.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},(a=$==null?void 0:$.close)!=null?a:Cg):null,h.jsx||p.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:P.createElement(P.Fragment,null,Qe||h.icon||h.promise?P.createElement("div",{"data-icon":"",className:it(k==null?void 0:k.icon,(i=h==null?void 0:h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Uf():null,h.type!=="loading"?h.icon||($==null?void 0:$[Qe])||yg(Qe):null):null,P.createElement("div",{"data-content":"",className:it(k==null?void 0:k.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},P.createElement("div",{"data-title":"",className:it(k==null?void 0:k.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?P.createElement("div",{"data-description":"",className:it(B,Lf,k==null?void 0:k.description,(d=h==null?void 0:h.classNames)==null?void 0:d.description)},typeof h.description=="function"?h.description():h.description):null),p.isValidElement(h.cancel)?h.cancel:h.cancel&&In(h.cancel)?P.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:Q=>{var fe,we;In(h.cancel)&&sr&&((we=(fe=h.cancel).onClick)==null||we.call(fe,Q),Qt())},className:it(k==null?void 0:k.cancelButton,(u=h==null?void 0:h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,p.isValidElement(h.action)?h.action:h.action&&In(h.action)?P.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||F,onClick:Q=>{var fe,we;In(h.action)&&((we=(fe=h.action).onClick)==null||we.call(fe,Q),!Q.defaultPrevented&&Qt())},className:it(k==null?void 0:k.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function wl(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function qg(t,e){let s={};return[t,e].forEach((r,n)=>{let a=n===1,i=a?"--mobile-offset":"--offset",l=a?Dg:Lg;function c(d){["top","right","bottom","left"].forEach(u=>{s[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?s[`${i}-${d}`]=l:s[`${i}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),s}var Vg=p.forwardRef(function(t,e){let{invert:s,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:f,duration:g,style:h,visibleToasts:y=Ig,toastOptions:m,dir:v=wl(),gap:b=$g,loadingIcon:w,icons:x,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:S}=t,[C,E]=P.useState([]),N=P.useMemo(()=>Array.from(new Set([r].concat(C.filter(K=>K.position).map(K=>K.position)))),[C,r]),[L,R]=P.useState([]),[F,O]=P.useState(!1),[B,A]=P.useState(!1),[q,I]=P.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=P.useRef(null),T=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),k=P.useRef(null),$=P.useRef(!1),ae=P.useCallback(K=>{E(z=>{var W;return(W=z.find(be=>be.id===K.id))!=null&&W.delete||He.dismiss(K.id),z.filter(({id:be})=>be!==K.id)})},[]);return P.useEffect(()=>He.subscribe(K=>{if(K.dismiss){E(z=>z.map(W=>W.id===K.id?{...W,delete:!0}:W));return}setTimeout(()=>{Rc.flushSync(()=>{E(z=>{let W=z.findIndex(be=>be.id===K.id);return W!==-1?[...z.slice(0,W),{...z[W],...K},...z.slice(W+1)]:[K,...z]})})})}),[]),P.useEffect(()=>{if(u!=="system"){I(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;let K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:z})=>{I(z?"dark":"light")})}catch{K.addListener(({matches:W})=>{try{I(W?"dark":"light")}catch(be){console.error(be)}})}},[u]),P.useEffect(()=>{C.length<=1&&O(!1)},[C]),P.useEffect(()=>{let K=z=>{var W,be;n.every(Se=>z[Se]||z.code===Se)&&(O(!0),(W=H.current)==null||W.focus()),z.code==="Escape"&&(document.activeElement===H.current||(be=H.current)!=null&&be.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[n]),P.useEffect(()=>{if(H.current)return()=>{k.current&&(k.current.focus({preventScroll:!0}),k.current=null,$.current=!1)}},[H.current]),P.createElement("section",{ref:e,"aria-label":`${j} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((K,z)=>{var W;let[be,Se]=K.split("-");return C.length?P.createElement("ol",{key:K,dir:v==="auto"?wl():v,tabIndex:-1,ref:H,className:l,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":be,"data-lifted":F&&C.length>1&&!a,"data-x-position":Se,style:{"--front-toast-height":`${((W=L[0])==null?void 0:W.height)||0}px`,"--width":`${Mg}px`,"--gap":`${b}px`,...h,...qg(c,d)},onBlur:M=>{$.current&&!M.currentTarget.contains(M.relatedTarget)&&($.current=!1,k.current&&(k.current.focus({preventScroll:!0}),k.current=null))},onFocus:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||$.current||($.current=!0,k.current=M.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{B||O(!1)},onDragEnd:()=>O(!1),onPointerDown:M=>{M.target instanceof HTMLElement&&M.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},C.filter(M=>!M.position&&z===0||M.position===K).map((M,ce)=>{var me,ie;return P.createElement(Hg,{key:M.id,icons:x,index:ce,toast:M,defaultRichColors:f,duration:(me=m==null?void 0:m.duration)!=null?me:g,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:s,visibleToasts:y,closeButton:(ie=m==null?void 0:m.closeButton)!=null?ie:i,interacting:B,position:K,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:ae,toasts:C.filter(Z=>Z.position==M.position),heights:L.filter(Z=>Z.position==M.position),setHeights:R,expandByDefault:a,gap:b,loadingIcon:w,expanded:F,pauseWhenPageIsHidden:S,swipeDirections:t.swipeDirections})})):null}))});const Wg=({...t})=>{const{theme:e="system"}=vg();return o.jsx(Vg,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var zg=Oc[" useId ".trim().toString()]||(()=>{}),Kg=0;function vs(t){const[e,s]=p.useState(zg());return Oe(()=>{s(r=>r??String(Kg++))},[t]),e?`radix-${e}`:""}const Gg=["top","right","bottom","left"],xs=Math.min,We=Math.max,eo=Math.round,Ln=Math.floor,St=t=>({x:t,y:t}),Qg={left:"right",right:"left",bottom:"top",top:"bottom"},Jg={start:"end",end:"start"};function Aa(t,e,s){return We(t,xs(e,s))}function Vt(t,e){return typeof t=="function"?t(e):t}function Wt(t){return t.split("-")[0]}function Ur(t){return t.split("-")[1]}function ji(t){return t==="x"?"y":"x"}function _i(t){return t==="y"?"height":"width"}const Yg=new Set(["top","bottom"]);function jt(t){return Yg.has(Wt(t))?"y":"x"}function Si(t){return ji(jt(t))}function Xg(t,e,s){s===void 0&&(s=!1);const r=Ur(t),n=Si(t),a=_i(n);let i=n==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(i=to(i)),[i,to(i)]}function Zg(t){const e=to(t);return[Ra(t),e,Ra(e)]}function Ra(t){return t.replace(/start|end/g,e=>Jg[e])}const jl=["left","right"],_l=["right","left"],ev=["top","bottom"],tv=["bottom","top"];function sv(t,e,s){switch(t){case"top":case"bottom":return s?e?_l:jl:e?jl:_l;case"left":case"right":return e?ev:tv;default:return[]}}function rv(t,e,s,r){const n=Ur(t);let a=sv(Wt(t),s==="start",r);return n&&(a=a.map(i=>i+"-"+n),e&&(a=a.concat(a.map(Ra)))),a}function to(t){return t.replace(/left|right|bottom|top/g,e=>Qg[e])}function nv(t){return{top:0,right:0,bottom:0,left:0,...t}}function kd(t){return typeof t!="number"?nv(t):{top:t,right:t,bottom:t,left:t}}function so(t){const{x:e,y:s,width:r,height:n}=t;return{width:r,height:n,top:s,left:e,right:e+r,bottom:s+n,x:e,y:s}}function Sl(t,e,s){let{reference:r,floating:n}=t;const a=jt(e),i=Si(e),l=_i(i),c=Wt(e),d=a==="y",u=r.x+r.width/2-n.width/2,f=r.y+r.height/2-n.height/2,g=r[l]/2-n[l]/2;let h;switch(c){case"top":h={x:u,y:r.y-n.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-n.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ur(e)){case"start":h[i]-=g*(s&&d?-1:1);break;case"end":h[i]+=g*(s&&d?-1:1);break}return h}const ov=async(t,e,s)=>{const{placement:r="bottom",strategy:n="absolute",middleware:a=[],platform:i}=s,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let d=await i.getElementRects({reference:t,floating:e,strategy:n}),{x:u,y:f}=Sl(d,r,c),g=r,h={},y=0;for(let m=0;m<l.length;m++){const{name:v,fn:b}=l[m],{x:w,y:x,data:j,reset:S}=await b({x:u,y:f,initialPlacement:r,placement:g,strategy:n,middlewareData:h,rects:d,platform:i,elements:{reference:t,floating:e}});u=w??u,f=x??f,h={...h,[v]:{...h[v],...j}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(g=S.placement),S.rects&&(d=S.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:n}):S.rects),{x:u,y:f}=Sl(d,g,c)),m=-1)}return{x:u,y:f,placement:g,strategy:n,middlewareData:h}};async function dn(t,e){var s;e===void 0&&(e={});const{x:r,y:n,platform:a,rects:i,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:g=!1,padding:h=0}=Vt(e,t),y=kd(h),v=l[g?f==="floating"?"reference":"floating":f],b=so(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(v)))==null||s?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),w=f==="floating"?{x:r,y:n,width:i.floating.width,height:i.floating.height}:i.reference,x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(x))?await(a.getScale==null?void 0:a.getScale(x))||{x:1,y:1}:{x:1,y:1},S=so(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:x,strategy:c}):w);return{top:(b.top-S.top+y.top)/j.y,bottom:(S.bottom-b.bottom+y.bottom)/j.y,left:(b.left-S.left+y.left)/j.x,right:(S.right-b.right+y.right)/j.x}}const av=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:r,placement:n,rects:a,platform:i,elements:l,middlewareData:c}=e,{element:d,padding:u=0}=Vt(t,e)||{};if(d==null)return{};const f=kd(u),g={x:s,y:r},h=Si(n),y=_i(h),m=await i.getDimensions(d),v=h==="y",b=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",j=a.reference[y]+a.reference[h]-g[h]-a.floating[y],S=g[h]-a.reference[h],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let E=C?C[x]:0;(!E||!await(i.isElement==null?void 0:i.isElement(C)))&&(E=l.floating[x]||a.floating[y]);const N=j/2-S/2,L=E/2-m[y]/2-1,R=xs(f[b],L),F=xs(f[w],L),O=R,B=E-m[y]-F,A=E/2-m[y]/2+N,q=Aa(O,A,B),I=!c.arrow&&Ur(n)!=null&&A!==q&&a.reference[y]/2-(A<O?R:F)-m[y]/2<0,H=I?A<O?A-O:A-B:0;return{[h]:g[h]+H,data:{[h]:q,centerOffset:A-q-H,...I&&{alignmentOffset:H}},reset:I}}}),iv=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,r;const{placement:n,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:g,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:m=!0,...v}=Vt(t,e);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const b=Wt(n),w=jt(l),x=Wt(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=g||(x||!m?[to(l)]:Zg(l)),C=y!=="none";!g&&C&&S.push(...rv(l,m,y,j));const E=[l,...S],N=await dn(e,v),L=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&L.push(N[b]),f){const A=Xg(n,i,j);L.push(N[A[0]],N[A[1]])}if(R=[...R,{placement:n,overflows:L}],!L.every(A=>A<=0)){var F,O;const A=(((F=a.flip)==null?void 0:F.index)||0)+1,q=E[A];if(q&&(!(f==="alignment"?w!==jt(q):!1)||R.every(T=>jt(T.placement)===w?T.overflows[0]>0:!0)))return{data:{index:A,overflows:R},reset:{placement:q}};let I=(O=R.filter(H=>H.overflows[0]<=0).sort((H,T)=>H.overflows[1]-T.overflows[1])[0])==null?void 0:O.placement;if(!I)switch(h){case"bestFit":{var B;const H=(B=R.filter(T=>{if(C){const k=jt(T.placement);return k===w||k==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(k=>k>0).reduce((k,$)=>k+$,0)]).sort((T,k)=>T[1]-k[1])[0])==null?void 0:B[0];H&&(I=H);break}case"initialPlacement":I=l;break}if(n!==I)return{reset:{placement:I}}}return{}}}};function Cl(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function El(t){return Gg.some(e=>t[e]>=0)}const lv=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:r="referenceHidden",...n}=Vt(t,e);switch(r){case"referenceHidden":{const a=await dn(e,{...n,elementContext:"reference"}),i=Cl(a,s.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:El(i)}}}case"escaped":{const a=await dn(e,{...n,altBoundary:!0}),i=Cl(a,s.floating);return{data:{escapedOffsets:i,escaped:El(i)}}}default:return{}}}}},Pd=new Set(["left","top"]);async function cv(t,e){const{placement:s,platform:r,elements:n}=t,a=await(r.isRTL==null?void 0:r.isRTL(n.floating)),i=Wt(s),l=Ur(s),c=jt(s)==="y",d=Pd.has(i)?-1:1,u=a&&c?-1:1,f=Vt(e,t);let{mainAxis:g,crossAxis:h,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(h=l==="end"?y*-1:y),c?{x:h*u,y:g*d}:{x:g*d,y:h*u}}const dv=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,r;const{x:n,y:a,placement:i,middlewareData:l}=e,c=await cv(e,t);return i===((s=l.offset)==null?void 0:s.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:n+c.x,y:a+c.y,data:{...c,placement:i}}}}},uv=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:r,placement:n}=e,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:v=>{let{x:b,y:w}=v;return{x:b,y:w}}},...c}=Vt(t,e),d={x:s,y:r},u=await dn(e,c),f=jt(Wt(n)),g=ji(f);let h=d[g],y=d[f];if(a){const v=g==="y"?"top":"left",b=g==="y"?"bottom":"right",w=h+u[v],x=h-u[b];h=Aa(w,h,x)}if(i){const v=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=y+u[v],x=y-u[b];y=Aa(w,y,x)}const m=l.fn({...e,[g]:h,[f]:y});return{...m,data:{x:m.x-s,y:m.y-r,enabled:{[g]:a,[f]:i}}}}}},hv=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:r,placement:n,rects:a,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Vt(t,e),u={x:s,y:r},f=jt(n),g=ji(f);let h=u[g],y=u[f];const m=Vt(l,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const x=g==="y"?"height":"width",j=a.reference[g]-a.floating[x]+v.mainAxis,S=a.reference[g]+a.reference[x]-v.mainAxis;h<j?h=j:h>S&&(h=S)}if(d){var b,w;const x=g==="y"?"width":"height",j=Pd.has(Wt(n)),S=a.reference[f]-a.floating[x]+(j&&((b=i.offset)==null?void 0:b[f])||0)+(j?0:v.crossAxis),C=a.reference[f]+a.reference[x]+(j?0:((w=i.offset)==null?void 0:w[f])||0)-(j?v.crossAxis:0);y<S?y=S:y>C&&(y=C)}return{[g]:h,[f]:y}}}},fv=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,r;const{placement:n,rects:a,platform:i,elements:l}=e,{apply:c=()=>{},...d}=Vt(t,e),u=await dn(e,d),f=Wt(n),g=Ur(n),h=jt(n)==="y",{width:y,height:m}=a.floating;let v,b;f==="top"||f==="bottom"?(v=f,b=g===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,v=g==="end"?"top":"bottom");const w=m-u.top-u.bottom,x=y-u.left-u.right,j=xs(m-u[v],w),S=xs(y-u[b],x),C=!e.middlewareData.shift;let E=j,N=S;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(N=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=w),C&&!g){const R=We(u.left,0),F=We(u.right,0),O=We(u.top,0),B=We(u.bottom,0);h?N=y-2*(R!==0||F!==0?R+F:We(u.left,u.right)):E=m-2*(O!==0||B!==0?O+B:We(u.top,u.bottom))}await c({...e,availableWidth:N,availableHeight:E});const L=await i.getDimensions(l.floating);return y!==L.width||m!==L.height?{reset:{rects:!0}}:{}}}};function yo(){return typeof window<"u"}function Br(t){return Ad(t)?(t.nodeName||"").toLowerCase():"#document"}function Ke(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Nt(t){var e;return(e=(Ad(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ad(t){return yo()?t instanceof Node||t instanceof Ke(t).Node:!1}function pt(t){return yo()?t instanceof Element||t instanceof Ke(t).Element:!1}function Ct(t){return yo()?t instanceof HTMLElement||t instanceof Ke(t).HTMLElement:!1}function Tl(t){return!yo()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ke(t).ShadowRoot}const pv=new Set(["inline","contents"]);function jn(t){const{overflow:e,overflowX:s,overflowY:r,display:n}=mt(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!pv.has(n)}const mv=new Set(["table","td","th"]);function gv(t){return mv.has(Br(t))}const vv=[":popover-open",":modal"];function xo(t){return vv.some(e=>{try{return t.matches(e)}catch{return!1}})}const yv=["transform","translate","scale","rotate","perspective"],xv=["transform","translate","scale","rotate","perspective","filter"],bv=["paint","layout","strict","content"];function Ci(t){const e=Ei(),s=pt(t)?mt(t):t;return yv.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||xv.some(r=>(s.willChange||"").includes(r))||bv.some(r=>(s.contain||"").includes(r))}function wv(t){let e=bs(t);for(;Ct(e)&&!Lr(e);){if(Ci(e))return e;if(xo(e))return null;e=bs(e)}return null}function Ei(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jv=new Set(["html","body","#document"]);function Lr(t){return jv.has(Br(t))}function mt(t){return Ke(t).getComputedStyle(t)}function bo(t){return pt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bs(t){if(Br(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Tl(t)&&t.host||Nt(t);return Tl(e)?e.host:e}function Rd(t){const e=bs(t);return Lr(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ct(e)&&jn(e)?e:Rd(e)}function un(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const n=Rd(t),a=n===((r=t.ownerDocument)==null?void 0:r.body),i=Ke(n);if(a){const l=Oa(i);return e.concat(i,i.visualViewport||[],jn(n)?n:[],l&&s?un(l):[])}return e.concat(n,un(n,[],s))}function Oa(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Od(t){const e=mt(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Ct(t),a=n?t.offsetWidth:s,i=n?t.offsetHeight:r,l=eo(s)!==a||eo(r)!==i;return l&&(s=a,r=i),{width:s,height:r,$:l}}function Ti(t){return pt(t)?t:t.contextElement}function xr(t){const e=Ti(t);if(!Ct(e))return St(1);const s=e.getBoundingClientRect(),{width:r,height:n,$:a}=Od(e);let i=(a?eo(s.width):s.width)/r,l=(a?eo(s.height):s.height)/n;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const _v=St(0);function Id(t){const e=Ke(t);return!Ei()||!e.visualViewport?_v:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Sv(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==Ke(t)?!1:e}function Ks(t,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const n=t.getBoundingClientRect(),a=Ti(t);let i=St(1);e&&(r?pt(r)&&(i=xr(r)):i=xr(t));const l=Sv(a,s,r)?Id(a):St(0);let c=(n.left+l.x)/i.x,d=(n.top+l.y)/i.y,u=n.width/i.x,f=n.height/i.y;if(a){const g=Ke(a),h=r&&pt(r)?Ke(r):r;let y=g,m=Oa(y);for(;m&&r&&h!==y;){const v=xr(m),b=m.getBoundingClientRect(),w=mt(m),x=b.left+(m.clientLeft+parseFloat(w.paddingLeft))*v.x,j=b.top+(m.clientTop+parseFloat(w.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,f*=v.y,c+=x,d+=j,y=Ke(m),m=Oa(y)}}return so({width:u,height:f,x:c,y:d})}function wo(t,e){const s=bo(t).scrollLeft;return e?e.left+s:Ks(Nt(t)).left+s}function Ld(t,e){const s=t.getBoundingClientRect(),r=s.left+e.scrollLeft-wo(t,s),n=s.top+e.scrollTop;return{x:r,y:n}}function Cv(t){let{elements:e,rect:s,offsetParent:r,strategy:n}=t;const a=n==="fixed",i=Nt(r),l=e?xo(e.floating):!1;if(r===i||l&&a)return s;let c={scrollLeft:0,scrollTop:0},d=St(1);const u=St(0),f=Ct(r);if((f||!f&&!a)&&((Br(r)!=="body"||jn(i))&&(c=bo(r)),Ct(r))){const h=Ks(r);d=xr(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const g=i&&!f&&!a?Ld(i,c):St(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-c.scrollLeft*d.x+u.x+g.x,y:s.y*d.y-c.scrollTop*d.y+u.y+g.y}}function Ev(t){return Array.from(t.getClientRects())}function Tv(t){const e=Nt(t),s=bo(t),r=t.ownerDocument.body,n=We(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=We(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-s.scrollLeft+wo(t);const l=-s.scrollTop;return mt(r).direction==="rtl"&&(i+=We(e.clientWidth,r.clientWidth)-n),{width:n,height:a,x:i,y:l}}const Nl=25;function Nv(t,e){const s=Ke(t),r=Nt(t),n=s.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(n){a=n.width,i=n.height;const u=Ei();(!u||u&&e==="fixed")&&(l=n.offsetLeft,c=n.offsetTop)}const d=wo(r);if(d<=0){const u=r.ownerDocument,f=u.body,g=getComputedStyle(f),h=u.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-h);y<=Nl&&(a-=y)}else d<=Nl&&(a+=d);return{width:a,height:i,x:l,y:c}}const kv=new Set(["absolute","fixed"]);function Pv(t,e){const s=Ks(t,!0,e==="fixed"),r=s.top+t.clientTop,n=s.left+t.clientLeft,a=Ct(t)?xr(t):St(1),i=t.clientWidth*a.x,l=t.clientHeight*a.y,c=n*a.x,d=r*a.y;return{width:i,height:l,x:c,y:d}}function kl(t,e,s){let r;if(e==="viewport")r=Nv(t,s);else if(e==="document")r=Tv(Nt(t));else if(pt(e))r=Pv(e,s);else{const n=Id(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return so(r)}function Dd(t,e){const s=bs(t);return s===e||!pt(s)||Lr(s)?!1:mt(s).position==="fixed"||Dd(s,e)}function Av(t,e){const s=e.get(t);if(s)return s;let r=un(t,[],!1).filter(l=>pt(l)&&Br(l)!=="body"),n=null;const a=mt(t).position==="fixed";let i=a?bs(t):t;for(;pt(i)&&!Lr(i);){const l=mt(i),c=Ci(i);!c&&l.position==="fixed"&&(n=null),(a?!c&&!n:!c&&l.position==="static"&&!!n&&kv.has(n.position)||jn(i)&&!c&&Dd(t,i))?r=r.filter(u=>u!==i):n=l,i=bs(i)}return e.set(t,r),r}function Rv(t){let{element:e,boundary:s,rootBoundary:r,strategy:n}=t;const i=[...s==="clippingAncestors"?xo(e)?[]:Av(e,this._c):[].concat(s),r],l=i[0],c=i.reduce((d,u)=>{const f=kl(e,u,n);return d.top=We(f.top,d.top),d.right=xs(f.right,d.right),d.bottom=xs(f.bottom,d.bottom),d.left=We(f.left,d.left),d},kl(e,l,n));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ov(t){const{width:e,height:s}=Od(t);return{width:e,height:s}}function Iv(t,e,s){const r=Ct(e),n=Nt(e),a=s==="fixed",i=Ks(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=St(0);function d(){c.x=wo(n)}if(r||!r&&!a)if((Br(e)!=="body"||jn(n))&&(l=bo(e)),r){const h=Ks(e,!0,a,e);c.x=h.x+e.clientLeft,c.y=h.y+e.clientTop}else n&&d();a&&!r&&n&&d();const u=n&&!r&&!a?Ld(n,l):St(0),f=i.left+l.scrollLeft-c.x-u.x,g=i.top+l.scrollTop-c.y-u.y;return{x:f,y:g,width:i.width,height:i.height}}function Jo(t){return mt(t).position==="static"}function Pl(t,e){if(!Ct(t)||mt(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return Nt(t)===s&&(s=s.ownerDocument.body),s}function Md(t,e){const s=Ke(t);if(xo(t))return s;if(!Ct(t)){let n=bs(t);for(;n&&!Lr(n);){if(pt(n)&&!Jo(n))return n;n=bs(n)}return s}let r=Pl(t,e);for(;r&&gv(r)&&Jo(r);)r=Pl(r,e);return r&&Lr(r)&&Jo(r)&&!Ci(r)?s:r||wv(t)||s}const Lv=async function(t){const e=this.getOffsetParent||Md,s=this.getDimensions,r=await s(t.floating);return{reference:Iv(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Dv(t){return mt(t).direction==="rtl"}const Mv={convertOffsetParentRelativeRectToViewportRelativeRect:Cv,getDocumentElement:Nt,getClippingRect:Rv,getOffsetParent:Md,getElementRects:Lv,getClientRects:Ev,getDimensions:Ov,getScale:xr,isElement:pt,isRTL:Dv};function $d(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function $v(t,e){let s=null,r;const n=Nt(t);function a(){var l;clearTimeout(r),(l=s)==null||l.disconnect(),s=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=t.getBoundingClientRect(),{left:u,top:f,width:g,height:h}=d;if(l||e(),!g||!h)return;const y=Ln(f),m=Ln(n.clientWidth-(u+g)),v=Ln(n.clientHeight-(f+h)),b=Ln(u),x={rootMargin:-y+"px "+-m+"px "+-v+"px "+-b+"px",threshold:We(0,xs(1,c))||1};let j=!0;function S(C){const E=C[0].intersectionRatio;if(E!==c){if(!j)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!$d(d,t.getBoundingClientRect())&&i(),j=!1}try{s=new IntersectionObserver(S,{...x,root:n.ownerDocument})}catch{s=new IntersectionObserver(S,x)}s.observe(t)}return i(!0),a}function Fv(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Ti(t),u=n||a?[...d?un(d):[],...un(e)]:[];u.forEach(b=>{n&&b.addEventListener("scroll",s,{passive:!0}),a&&b.addEventListener("resize",s)});const f=d&&l?$v(d,s):null;let g=-1,h=null;i&&(h=new ResizeObserver(b=>{let[w]=b;w&&w.target===d&&h&&(h.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),s()}),d&&!c&&h.observe(d),h.observe(e));let y,m=c?Ks(t):null;c&&v();function v(){const b=Ks(t);m&&!$d(m,b)&&s(),m=b,y=requestAnimationFrame(v)}return s(),()=>{var b;u.forEach(w=>{n&&w.removeEventListener("scroll",s),a&&w.removeEventListener("resize",s)}),f==null||f(),(b=h)==null||b.disconnect(),h=null,c&&cancelAnimationFrame(y)}}const Uv=dv,Bv=uv,Hv=iv,qv=fv,Vv=lv,Al=av,Wv=hv,zv=(t,e,s)=>{const r=new Map,n={platform:Mv,...s},a={...n.platform,_c:r};return ov(t,e,{...n,platform:a})};var Kv=typeof document<"u",Gv=function(){},Qn=Kv?p.useLayoutEffect:Gv;function ro(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,r,n;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!ro(t[r],e[r]))return!1;return!0}if(n=Object.keys(t),s=n.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,n[r]))return!1;for(r=s;r--!==0;){const a=n[r];if(!(a==="_owner"&&t.$$typeof)&&!ro(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Fd(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Rl(t,e){const s=Fd(t);return Math.round(e*s)/s}function Yo(t){const e=p.useRef(t);return Qn(()=>{e.current=t}),e}function Qv(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:n,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,f]=p.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[g,h]=p.useState(r);ro(g,r)||h(r);const[y,m]=p.useState(null),[v,b]=p.useState(null),w=p.useCallback(T=>{T!==C.current&&(C.current=T,m(T))},[]),x=p.useCallback(T=>{T!==E.current&&(E.current=T,b(T))},[]),j=a||y,S=i||v,C=p.useRef(null),E=p.useRef(null),N=p.useRef(u),L=c!=null,R=Yo(c),F=Yo(n),O=Yo(d),B=p.useCallback(()=>{if(!C.current||!E.current)return;const T={placement:e,strategy:s,middleware:g};F.current&&(T.platform=F.current),zv(C.current,E.current,T).then(k=>{const $={...k,isPositioned:O.current!==!1};A.current&&!ro(N.current,$)&&(N.current=$,$r.flushSync(()=>{f($)}))})},[g,e,s,F,O]);Qn(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[d]);const A=p.useRef(!1);Qn(()=>(A.current=!0,()=>{A.current=!1}),[]),Qn(()=>{if(j&&(C.current=j),S&&(E.current=S),j&&S){if(R.current)return R.current(j,S,B);B()}},[j,S,B,R,L]);const q=p.useMemo(()=>({reference:C,floating:E,setReference:w,setFloating:x}),[w,x]),I=p.useMemo(()=>({reference:j,floating:S}),[j,S]),H=p.useMemo(()=>{const T={position:s,left:0,top:0};if(!I.floating)return T;const k=Rl(I.floating,u.x),$=Rl(I.floating,u.y);return l?{...T,transform:"translate("+k+"px, "+$+"px)",...Fd(I.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:k,top:$}},[s,l,I.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:B,refs:q,elements:I,floatingStyles:H}),[u,B,q,I,H])}const Jv=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:n}=typeof t=="function"?t(s):t;return r&&e(r)?r.current!=null?Al({element:r.current,padding:n}).fn(s):{}:r?Al({element:r,padding:n}).fn(s):{}}}},Yv=(t,e)=>({...Uv(t),options:[t,e]}),Xv=(t,e)=>({...Bv(t),options:[t,e]}),Zv=(t,e)=>({...Wv(t),options:[t,e]}),ey=(t,e)=>({...Hv(t),options:[t,e]}),ty=(t,e)=>({...qv(t),options:[t,e]}),sy=(t,e)=>({...Vv(t),options:[t,e]}),ry=(t,e)=>({...Jv(t),options:[t,e]});var ny="Arrow",Ud=p.forwardRef((t,e)=>{const{children:s,width:r=10,height:n=5,...a}=t;return o.jsx(te.svg,{...a,ref:e,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ud.displayName=ny;var oy=Ud;function ay(t){const[e,s]=p.useState(void 0);return Oe(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const a=n[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=t.offsetWidth,l=t.offsetHeight;s({width:i,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var Ni="Popper",[Bd,jo]=ws(Ni),[iy,Hd]=Bd(Ni),qd=t=>{const{__scopePopper:e,children:s}=t,[r,n]=p.useState(null);return o.jsx(iy,{scope:e,anchor:r,onAnchorChange:n,children:s})};qd.displayName=Ni;var Vd="PopperAnchor",Wd=p.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...n}=t,a=Hd(Vd,s),i=p.useRef(null),l=ve(e,i),c=p.useRef(null);return p.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||i.current,d!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(te.div,{...n,ref:l})});Wd.displayName=Vd;var ki="PopperContent",[ly,cy]=Bd(ki),zd=p.forwardRef((t,e)=>{var M,ce,me,ie,Z,le;const{__scopePopper:s,side:r="bottom",sideOffset:n=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:g=!1,updatePositionStrategy:h="optimized",onPlaced:y,...m}=t,v=Hd(ki,s),[b,w]=p.useState(null),x=ve(e,ke=>w(ke)),[j,S]=p.useState(null),C=ay(j),E=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,L=r+(a!=="center"?"-"+a:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],O=F.length>0,B={padding:R,boundary:F.filter(uy),altBoundary:O},{refs:A,floatingStyles:q,placement:I,isPositioned:H,middlewareData:T}=Qv({strategy:"fixed",placement:L,whileElementsMounted:(...ke)=>Fv(...ke,{animationFrame:h==="always"}),elements:{reference:v.anchor},middleware:[Yv({mainAxis:n+N,alignmentAxis:i}),c&&Xv({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Zv():void 0,...B}),c&&ey({...B}),ty({...B,apply:({elements:ke,rects:Ge,availableWidth:Ns,availableHeight:Gt})=>{const{width:ks,height:zr}=Ge.reference,tr=ke.floating.style;tr.setProperty("--radix-popper-available-width",`${Ns}px`),tr.setProperty("--radix-popper-available-height",`${Gt}px`),tr.setProperty("--radix-popper-anchor-width",`${ks}px`),tr.setProperty("--radix-popper-anchor-height",`${zr}px`)}}),j&&ry({element:j,padding:l}),hy({arrowWidth:E,arrowHeight:N}),g&&sy({strategy:"referenceHidden",...B})]}),[k,$]=Qd(I),ae=et(y);Oe(()=>{H&&(ae==null||ae())},[H,ae]);const K=(M=T.arrow)==null?void 0:M.x,z=(ce=T.arrow)==null?void 0:ce.y,W=((me=T.arrow)==null?void 0:me.centerOffset)!==0,[be,Se]=p.useState();return Oe(()=>{b&&Se(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:H?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(ie=T.transformOrigin)==null?void 0:ie.x,(Z=T.transformOrigin)==null?void 0:Z.y].join(" "),...((le=T.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(ly,{scope:s,placedSide:k,onArrowChange:S,arrowX:K,arrowY:z,shouldHideArrow:W,children:o.jsx(te.div,{"data-side":k,"data-align":$,...m,ref:x,style:{...m.style,animation:H?void 0:"none"}})})})});zd.displayName=ki;var Kd="PopperArrow",dy={top:"bottom",right:"left",bottom:"top",left:"right"},Gd=p.forwardRef(function(e,s){const{__scopePopper:r,...n}=e,a=cy(Kd,r),i=dy[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(oy,{...n,ref:s,style:{...n.style,display:"block"}})})});Gd.displayName=Kd;function uy(t){return t!==null}var hy=t=>({name:"transformOrigin",options:t,fn(e){var v,b,w;const{placement:s,rects:r,middlewareData:n}=e,i=((v=n.arrow)==null?void 0:v.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=Qd(s),f={start:"0%",center:"50%",end:"100%"}[u],g=(((b=n.arrow)==null?void 0:b.x)??0)+l/2,h=(((w=n.arrow)==null?void 0:w.y)??0)+c/2;let y="",m="";return d==="bottom"?(y=i?f:`${g}px`,m=`${-c}px`):d==="top"?(y=i?f:`${g}px`,m=`${r.floating.height+c}px`):d==="right"?(y=`${-c}px`,m=i?f:`${h}px`):d==="left"&&(y=`${r.floating.width+c}px`,m=i?f:`${h}px`),{data:{x:y,y:m}}}});function Qd(t){const[e,s="center"]=t.split("-");return[e,s]}var fy=qd,Jd=Wd,Yd=zd,Xd=Gd,[_o]=ws("Tooltip",[jo]),Pi=jo(),Zd="TooltipProvider",py=700,Ol="tooltip.open",[my,eu]=_o(Zd),tu=t=>{const{__scopeTooltip:e,delayDuration:s=py,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:a}=t,i=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),o.jsx(my,{scope:e,isOpenDelayedRef:i,delayDuration:s,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:n,children:a})};tu.displayName=Zd;var su="Tooltip",[P_,So]=_o(su),Ia="TooltipTrigger",gy=p.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,n=So(Ia,s),a=eu(Ia,s),i=Pi(s),l=p.useRef(null),c=ve(e,l,n.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(Jd,{asChild:!0,...i,children:o.jsx(te.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:c,onPointerMove:V(t.onPointerMove,g=>{g.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:V(t.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:V(t.onPointerDown,()=>{n.open&&n.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:V(t.onFocus,()=>{d.current||n.onOpen()}),onBlur:V(t.onBlur,n.onClose),onClick:V(t.onClick,n.onClose)})})});gy.displayName=Ia;var vy="TooltipPortal",[A_,yy]=_o(vy,{forceMount:void 0}),Dr="TooltipContent",ru=p.forwardRef((t,e)=>{const s=yy(Dr,t.__scopeTooltip),{forceMount:r=s.forceMount,side:n="top",...a}=t,i=So(Dr,t.__scopeTooltip);return o.jsx(Zs,{present:r||i.open,children:i.disableHoverableContent?o.jsx(nu,{side:n,...a,ref:e}):o.jsx(xy,{side:n,...a,ref:e})})}),xy=p.forwardRef((t,e)=>{const s=So(Dr,t.__scopeTooltip),r=eu(Dr,t.__scopeTooltip),n=p.useRef(null),a=ve(e,n),[i,l]=p.useState(null),{trigger:c,onClose:d}=s,u=n.current,{onPointerInTransitChange:f}=r,g=p.useCallback(()=>{l(null),f(!1)},[f]),h=p.useCallback((y,m)=>{const v=y.currentTarget,b={x:y.clientX,y:y.clientY},w=Sy(b,v.getBoundingClientRect()),x=Cy(b,w),j=Ey(m.getBoundingClientRect()),S=Ny([...x,...j]);l(S),f(!0)},[f]);return p.useEffect(()=>()=>g(),[g]),p.useEffect(()=>{if(c&&u){const y=v=>h(v,u),m=v=>h(v,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",m)}}},[c,u,h,g]),p.useEffect(()=>{if(i){const y=m=>{const v=m.target,b={x:m.clientX,y:m.clientY},w=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),x=!Ty(b,i);w?g():x&&(g(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,i,d,g]),o.jsx(nu,{...t,ref:a})}),[by,wy]=_o(su,{isInside:!1}),jy=Rp("TooltipContent"),nu=p.forwardRef((t,e)=>{const{__scopeTooltip:s,children:r,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=t,c=So(Dr,s),d=Pi(s),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(Ol,u),()=>document.removeEventListener(Ol,u)),[u]),p.useEffect(()=>{if(c.trigger){const f=g=>{const h=g.target;h!=null&&h.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),o.jsx(bn,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:o.jsxs(Yd,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(jy,{children:r}),o.jsx(by,{scope:s,isInside:!0,children:o.jsx(em,{id:c.contentId,role:"tooltip",children:n||r})})]})})});ru.displayName=Dr;var ou="TooltipArrow",_y=p.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,n=Pi(s);return wy(ou,s).isInside?null:o.jsx(Xd,{...n,...r,ref:e})});_y.displayName=ou;function Sy(t,e){const s=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),n=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(s,r,n,a)){case a:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Cy(t,e,s=5){const r=[];switch(e){case"top":r.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":r.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":r.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":r.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return r}function Ey(t){const{top:e,right:s,bottom:r,left:n}=t;return[{x:n,y:e},{x:s,y:e},{x:s,y:r},{x:n,y:r}]}function Ty(t,e){const{x:s,y:r}=t;let n=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const l=e[a],c=e[i],d=l.x,u=l.y,f=c.x,g=c.y;u>r!=g>r&&s<(f-d)*(r-u)/(g-u)+d&&(n=!n)}return n}function Ny(t){const e=t.slice();return e.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),ky(e)}function ky(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const n=t[r];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))e.pop();else break}e.push(n)}e.pop();const s=[];for(let r=t.length-1;r>=0;r--){const n=t[r];for(;s.length>=2;){const a=s[s.length-1],i=s[s.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))s.pop();else break}s.push(n)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var Py=tu,au=ru;const Ay=Py,Ry=p.forwardRef(({className:t,sideOffset:e=4,...s},r)=>o.jsx(au,{ref:r,sideOffset:e,className:J("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Ry.displayName=au.displayName;var Hr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Oy={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},is,fi,bc,Iy=(bc=class{constructor(){U(this,is,Oy);U(this,fi,!1)}setTimeoutProvider(t){D(this,is,t)}setTimeout(t,e){return _(this,is).setTimeout(t,e)}clearTimeout(t){_(this,is).clearTimeout(t)}setInterval(t,e){return _(this,is).setInterval(t,e)}clearInterval(t){_(this,is).clearInterval(t)}},is=new WeakMap,fi=new WeakMap,bc),Ds=new Iy;function Ly(t){setTimeout(t,0)}var Gs=typeof window>"u"||"Deno"in globalThis;function Me(){}function Dy(t,e){return typeof t=="function"?t(e):t}function La(t){return typeof t=="number"&&t>=0&&t!==1/0}function iu(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ys(t,e){return typeof t=="function"?t(e):t}function Xe(t,e){return typeof t=="function"?t(e):t}function Il(t,e){const{type:s="all",exact:r,fetchStatus:n,predicate:a,queryKey:i,stale:l}=t;if(i){if(r){if(e.queryHash!==Ai(i,e.options))return!1}else if(!hn(e.queryKey,i))return!1}if(s!=="all"){const c=e.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||a&&!a(e))}function Ll(t,e){const{exact:s,status:r,predicate:n,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(s){if(Qs(e.options.mutationKey)!==Qs(a))return!1}else if(!hn(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||n&&!n(e))}function Ai(t,e){return((e==null?void 0:e.queryKeyHashFn)||Qs)(t)}function Qs(t){return JSON.stringify(t,(e,s)=>Da(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function hn(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>hn(t[s],e[s])):!1}var My=Object.prototype.hasOwnProperty;function lu(t,e){if(t===e)return t;const s=Dl(t)&&Dl(e);if(!s&&!(Da(t)&&Da(e)))return e;const n=(s?t:Object.keys(t)).length,a=s?e:Object.keys(e),i=a.length,l=s?new Array(i):{};let c=0;for(let d=0;d<i;d++){const u=s?d:a[d],f=t[u],g=e[u];if(f===g){l[u]=f,(s?d<n:My.call(t,u))&&c++;continue}if(f===null||g===null||typeof f!="object"||typeof g!="object"){l[u]=g;continue}const h=lu(f,g);l[u]=h,h===f&&c++}return n===i&&c===n?t:l}function no(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function Dl(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Da(t){if(!Ml(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Ml(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ml(t){return Object.prototype.toString.call(t)==="[object Object]"}function $y(t){return new Promise(e=>{Ds.setTimeout(e,t)})}function Ma(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?lu(t,e):e}function Fy(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function Uy(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var Ri=Symbol();function cu(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Ri?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function du(t,e){return typeof t=="function"?t(...e):!!t}var $s,ls,wr,wc,By=(wc=class extends Hr{constructor(){super();U(this,$s);U(this,ls);U(this,wr);D(this,wr,e=>{if(!Gs&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){_(this,ls)||this.setEventListener(_(this,wr))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,ls))==null||e.call(this),D(this,ls,void 0))}setEventListener(e){var s;D(this,wr,e),(s=_(this,ls))==null||s.call(this),D(this,ls,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,$s)!==e&&(D(this,$s,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof _(this,$s)=="boolean"?_(this,$s):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$s=new WeakMap,ls=new WeakMap,wr=new WeakMap,wc),Oi=new By;function $a(){let t,e;const s=new Promise((n,a)=>{t=n,e=a});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),t(n)},s.reject=n=>{r({status:"rejected",reason:n}),e(n)},s}var Hy=Ly;function qy(){let t=[],e=0,s=l=>{l()},r=l=>{l()},n=Hy;const a=l=>{e?t.push(l):n(()=>{s(l)})},i=()=>{const l=t;t=[],l.length&&n(()=>{r(()=>{l.forEach(c=>{s(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{s=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{n=l}}}var Te=qy(),jr,cs,_r,jc,Vy=(jc=class extends Hr{constructor(){super();U(this,jr,!0);U(this,cs);U(this,_r);D(this,_r,e=>{if(!Gs&&window.addEventListener){const s=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,cs)||this.setEventListener(_(this,_r))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,cs))==null||e.call(this),D(this,cs,void 0))}setEventListener(e){var s;D(this,_r,e),(s=_(this,cs))==null||s.call(this),D(this,cs,e(this.setOnline.bind(this)))}setOnline(e){_(this,jr)!==e&&(D(this,jr,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,jr)}},jr=new WeakMap,cs=new WeakMap,_r=new WeakMap,jc),oo=new Vy;function Wy(t){return Math.min(1e3*2**t,3e4)}function uu(t){return(t??"online")==="online"?oo.isOnline():!0}var Fa=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function hu(t){let e=!1,s=0,r;const n=$a(),a=()=>n.status!=="pending",i=m=>{var v;if(!a()){const b=new Fa(m);g(b),(v=t.onCancel)==null||v.call(t,b)}},l=()=>{e=!0},c=()=>{e=!1},d=()=>Oi.isFocused()&&(t.networkMode==="always"||oo.isOnline())&&t.canRun(),u=()=>uu(t.networkMode)&&t.canRun(),f=m=>{a()||(r==null||r(),n.resolve(m))},g=m=>{a()||(r==null||r(),n.reject(m))},h=()=>new Promise(m=>{var v;r=b=>{(a()||d())&&m(b)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;r=void 0,a()||(m=t.onContinue)==null||m.call(t)}),y=()=>{if(a())return;let m;const v=s===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(b){m=Promise.reject(b)}Promise.resolve(m).then(f).catch(b=>{var C;if(a())return;const w=t.retry??(Gs?0:3),x=t.retryDelay??Wy,j=typeof x=="function"?x(s,b):x,S=w===!0||typeof w=="number"&&s<w||typeof w=="function"&&w(s,b);if(e||!S){g(b);return}s++,(C=t.onFail)==null||C.call(t,s,b),$y(j).then(()=>d()?void 0:h()).then(()=>{e?g(b):y()})})};return{promise:n,status:()=>n.status,cancel:i,continue:()=>(r==null||r(),n),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?y():h().then(y),n)}}var Fs,_c,fu=(_c=class{constructor(){U(this,Fs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),La(this.gcTime)&&D(this,Fs,Ds.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Gs?1/0:5*60*1e3))}clearGcTimeout(){_(this,Fs)&&(Ds.clearTimeout(_(this,Fs)),D(this,Fs,void 0))}},Fs=new WeakMap,_c),Us,Sr,Ye,Bs,Pe,mn,Hs,dt,At,Sc,zy=(Sc=class extends fu{constructor(e){super();U(this,dt);U(this,Us);U(this,Sr);U(this,Ye);U(this,Bs);U(this,Pe);U(this,mn);U(this,Hs);D(this,Hs,!1),D(this,mn,e.defaultOptions),this.setOptions(e.options),this.observers=[],D(this,Bs,e.client),D(this,Ye,_(this,Bs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,D(this,Us,$l(this.options)),this.state=e.state??_(this,Us),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Pe))==null?void 0:e.promise}setOptions(e){if(this.options={..._(this,mn),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=$l(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),D(this,Us,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,Ye).remove(this)}setData(e,s){const r=Ma(this.state.data,e,this.options);return ee(this,dt,At).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(e,s){ee(this,dt,At).call(this,{type:"setState",state:e,setStateOptions:s})}cancel(e){var r,n;const s=(r=_(this,Pe))==null?void 0:r.promise;return(n=_(this,Pe))==null||n.cancel(e),s?s.then(Me).catch(Me):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Us))}isActive(){return this.observers.some(e=>Xe(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ri||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ys(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!iu(this.state.dataUpdatedAt,e)}onFocus(){var s;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(s=_(this,Pe))==null||s.continue()}onOnline(){var s;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(s=_(this,Pe))==null||s.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,Ye).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(s=>s!==e),this.observers.length||(_(this,Pe)&&(_(this,Hs)?_(this,Pe).cancel({revert:!0}):_(this,Pe).cancelRetry()),this.scheduleGc()),_(this,Ye).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ee(this,dt,At).call(this,{type:"invalidate"})}async fetch(e,s){var c,d,u,f,g,h,y,m,v,b,w,x;if(this.state.fetchStatus!=="idle"&&((c=_(this,Pe))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(_(this,Pe))return _(this,Pe).continueRetry(),_(this,Pe).promise}if(e&&this.setOptions(e),!this.options.queryFn){const j=this.observers.find(S=>S.options.queryFn);j&&this.setOptions(j.options)}const r=new AbortController,n=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(D(this,Hs,!0),r.signal)})},a=()=>{const j=cu(this.options,s),C=(()=>{const E={client:_(this,Bs),queryKey:this.queryKey,meta:this.meta};return n(E),E})();return D(this,Hs,!1),this.options.persister?this.options.persister(j,C,this):j(C)},l=(()=>{const j={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:_(this,Bs),state:this.state,fetchFn:a};return n(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),D(this,Sr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&ee(this,dt,At).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),D(this,Pe,hu({initialPromise:s==null?void 0:s.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof Fa&&j.revert&&this.setState({..._(this,Sr),fetchStatus:"idle"}),r.abort()},onFail:(j,S)=>{ee(this,dt,At).call(this,{type:"failed",failureCount:j,error:S})},onPause:()=>{ee(this,dt,At).call(this,{type:"pause"})},onContinue:()=>{ee(this,dt,At).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await _(this,Pe).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(h=(g=_(this,Ye).config).onSuccess)==null||h.call(g,j,this),(m=(y=_(this,Ye).config).onSettled)==null||m.call(y,j,this.state.error,this),j}catch(j){if(j instanceof Fa){if(j.silent)return _(this,Pe).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw ee(this,dt,At).call(this,{type:"error",error:j}),(b=(v=_(this,Ye).config).onError)==null||b.call(v,j,this),(x=(w=_(this,Ye).config).onSettled)==null||x.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},Us=new WeakMap,Sr=new WeakMap,Ye=new WeakMap,Bs=new WeakMap,Pe=new WeakMap,mn=new WeakMap,Hs=new WeakMap,dt=new WeakSet,At=function(e){const s=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...pu(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return D(this,Sr,e.manual?n:void 0),n;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=s(this.state),Te.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,Ye).notify({query:this,type:"updated",action:e})})},Sc);function pu(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:uu(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $l(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ue,oe,gn,Le,qs,Cr,Mt,ds,vn,Er,Tr,Vs,Ws,us,Nr,ue,tn,Ua,Ba,Ha,qa,Va,Wa,za,mu,Cc,Ky=(Cc=class extends Hr{constructor(e,s){super();U(this,ue);U(this,Ue);U(this,oe);U(this,gn);U(this,Le);U(this,qs);U(this,Cr);U(this,Mt);U(this,ds);U(this,vn);U(this,Er);U(this,Tr);U(this,Vs);U(this,Ws);U(this,us);U(this,Nr,new Set);this.options=s,D(this,Ue,e),D(this,ds,null),D(this,Mt,$a()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,oe).addObserver(this),Fl(_(this,oe),this.options)?ee(this,ue,tn).call(this):this.updateResult(),ee(this,ue,qa).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ka(_(this,oe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ka(_(this,oe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ee(this,ue,Va).call(this),ee(this,ue,Wa).call(this),_(this,oe).removeObserver(this)}setOptions(e){const s=this.options,r=_(this,oe);if(this.options=_(this,Ue).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xe(this.options.enabled,_(this,oe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ee(this,ue,za).call(this),_(this,oe).setOptions(this.options),s._defaulted&&!no(this.options,s)&&_(this,Ue).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,oe),observer:this});const n=this.hasListeners();n&&Ul(_(this,oe),r,this.options,s)&&ee(this,ue,tn).call(this),this.updateResult(),n&&(_(this,oe)!==r||Xe(this.options.enabled,_(this,oe))!==Xe(s.enabled,_(this,oe))||ys(this.options.staleTime,_(this,oe))!==ys(s.staleTime,_(this,oe)))&&ee(this,ue,Ua).call(this);const a=ee(this,ue,Ba).call(this);n&&(_(this,oe)!==r||Xe(this.options.enabled,_(this,oe))!==Xe(s.enabled,_(this,oe))||a!==_(this,us))&&ee(this,ue,Ha).call(this,a)}getOptimisticResult(e){const s=_(this,Ue).getQueryCache().build(_(this,Ue),e),r=this.createResult(s,e);return Qy(this,r)&&(D(this,Le,r),D(this,Cr,this.options),D(this,qs,_(this,oe).state)),r}getCurrentResult(){return _(this,Le)}trackResult(e,s){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),s==null||s(n),n==="promise"&&!this.options.experimental_prefetchInRender&&_(this,Mt).status==="pending"&&_(this,Mt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,n))})}trackProp(e){_(this,Nr).add(e)}getCurrentQuery(){return _(this,oe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=_(this,Ue).defaultQueryOptions(e),r=_(this,Ue).getQueryCache().build(_(this,Ue),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return ee(this,ue,tn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,Le)))}createResult(e,s){var L;const r=_(this,oe),n=this.options,a=_(this,Le),i=_(this,qs),l=_(this,Cr),d=e!==r?e.state:_(this,gn),{state:u}=e;let f={...u},g=!1,h;if(s._optimisticResults){const R=this.hasListeners(),F=!R&&Fl(e,s),O=R&&Ul(e,r,s,n);(F||O)&&(f={...f,...pu(u.data,e.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:v}=f;h=f.data;let b=!1;if(s.placeholderData!==void 0&&h===void 0&&v==="pending"){let R;a!=null&&a.isPlaceholderData&&s.placeholderData===(l==null?void 0:l.placeholderData)?(R=a.data,b=!0):R=typeof s.placeholderData=="function"?s.placeholderData((L=_(this,Tr))==null?void 0:L.state.data,_(this,Tr)):s.placeholderData,R!==void 0&&(v="success",h=Ma(a==null?void 0:a.data,R,s),g=!0)}if(s.select&&h!==void 0&&!b)if(a&&h===(i==null?void 0:i.data)&&s.select===_(this,vn))h=_(this,Er);else try{D(this,vn,s.select),h=s.select(h),h=Ma(a==null?void 0:a.data,h,s),D(this,Er,h),D(this,ds,null)}catch(R){D(this,ds,R)}_(this,ds)&&(y=_(this,ds),h=_(this,Er),m=Date.now(),v="error");const w=f.fetchStatus==="fetching",x=v==="pending",j=v==="error",S=x&&w,C=h!==void 0,N={status:v,fetchStatus:f.fetchStatus,isPending:x,isSuccess:v==="success",isError:j,isInitialLoading:S,isLoading:S,data:h,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!x,isLoadingError:j&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:j&&C,isStale:Ii(e,s),refetch:this.refetch,promise:_(this,Mt),isEnabled:Xe(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const R=B=>{N.status==="error"?B.reject(N.error):N.data!==void 0&&B.resolve(N.data)},F=()=>{const B=D(this,Mt,N.promise=$a());R(B)},O=_(this,Mt);switch(O.status){case"pending":e.queryHash===r.queryHash&&R(O);break;case"fulfilled":(N.status==="error"||N.data!==O.value)&&F();break;case"rejected":(N.status!=="error"||N.error!==O.reason)&&F();break}}return N}updateResult(){const e=_(this,Le),s=this.createResult(_(this,oe),this.options);if(D(this,qs,_(this,oe).state),D(this,Cr,this.options),_(this,qs).data!==void 0&&D(this,Tr,_(this,oe)),no(s,e))return;D(this,Le,s);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!_(this,Nr).size)return!0;const i=new Set(a??_(this,Nr));return this.options.throwOnError&&i.add("error"),Object.keys(_(this,Le)).some(l=>{const c=l;return _(this,Le)[c]!==e[c]&&i.has(c)})};ee(this,ue,mu).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ee(this,ue,qa).call(this)}},Ue=new WeakMap,oe=new WeakMap,gn=new WeakMap,Le=new WeakMap,qs=new WeakMap,Cr=new WeakMap,Mt=new WeakMap,ds=new WeakMap,vn=new WeakMap,Er=new WeakMap,Tr=new WeakMap,Vs=new WeakMap,Ws=new WeakMap,us=new WeakMap,Nr=new WeakMap,ue=new WeakSet,tn=function(e){ee(this,ue,za).call(this);let s=_(this,oe).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Me)),s},Ua=function(){ee(this,ue,Va).call(this);const e=ys(this.options.staleTime,_(this,oe));if(Gs||_(this,Le).isStale||!La(e))return;const r=iu(_(this,Le).dataUpdatedAt,e)+1;D(this,Vs,Ds.setTimeout(()=>{_(this,Le).isStale||this.updateResult()},r))},Ba=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,oe)):this.options.refetchInterval)??!1},Ha=function(e){ee(this,ue,Wa).call(this),D(this,us,e),!(Gs||Xe(this.options.enabled,_(this,oe))===!1||!La(_(this,us))||_(this,us)===0)&&D(this,Ws,Ds.setInterval(()=>{(this.options.refetchIntervalInBackground||Oi.isFocused())&&ee(this,ue,tn).call(this)},_(this,us)))},qa=function(){ee(this,ue,Ua).call(this),ee(this,ue,Ha).call(this,ee(this,ue,Ba).call(this))},Va=function(){_(this,Vs)&&(Ds.clearTimeout(_(this,Vs)),D(this,Vs,void 0))},Wa=function(){_(this,Ws)&&(Ds.clearInterval(_(this,Ws)),D(this,Ws,void 0))},za=function(){const e=_(this,Ue).getQueryCache().build(_(this,Ue),this.options);if(e===_(this,oe))return;const s=_(this,oe);D(this,oe,e),D(this,gn,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},mu=function(e){Te.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(_(this,Le))}),_(this,Ue).getQueryCache().notify({query:_(this,oe),type:"observerResultsUpdated"})})},Cc);function Gy(t,e){return Xe(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Fl(t,e){return Gy(t,e)||t.state.data!==void 0&&Ka(t,e,e.refetchOnMount)}function Ka(t,e,s){if(Xe(e.enabled,t)!==!1&&ys(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&Ii(t,e)}return!1}function Ul(t,e,s,r){return(t!==e||Xe(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Ii(t,s)}function Ii(t,e){return Xe(e.enabled,t)!==!1&&t.isStaleByTime(ys(e.staleTime,t))}function Qy(t,e){return!no(t.getCurrentResult(),e)}function Bl(t){return{onFetch:(e,s)=>{var u,f,g,h,y;const r=e.options,n=(g=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:g.direction,a=((h=e.state.data)==null?void 0:h.pages)||[],i=((y=e.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let m=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},b=cu(e.options,e.fetchOptions),w=async(x,j,S)=>{if(m)return Promise.reject();if(j==null&&x.pages.length)return Promise.resolve(x);const E=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:j,direction:S?"backward":"forward",meta:e.options.meta};return v(F),F})(),N=await b(E),{maxPages:L}=e.options,R=S?Uy:Fy;return{pages:R(x.pages,N,L),pageParams:R(x.pageParams,j,L)}};if(n&&a.length){const x=n==="backward",j=x?Jy:Hl,S={pages:a,pageParams:i},C=j(r,S);l=await w(S,C,x)}else{const x=t??a.length;do{const j=c===0?i[0]??r.initialPageParam:Hl(r,l);if(c>0&&j==null)break;l=await w(l,j),c++}while(c<x)}return l};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=d}}}function Hl(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function Jy(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var yn,yt,De,zs,xt,rs,Ec,Yy=(Ec=class extends fu{constructor(e){super();U(this,xt);U(this,yn);U(this,yt);U(this,De);U(this,zs);D(this,yn,e.client),this.mutationId=e.mutationId,D(this,De,e.mutationCache),D(this,yt,[]),this.state=e.state||gu(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,yt).includes(e)||(_(this,yt).push(e),this.clearGcTimeout(),_(this,De).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){D(this,yt,_(this,yt).filter(s=>s!==e)),this.scheduleGc(),_(this,De).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,yt).length||(this.state.status==="pending"?this.scheduleGc():_(this,De).remove(this))}continue(){var e;return((e=_(this,zs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,l,c,d,u,f,g,h,y,m,v,b,w,x,j,S,C,E,N,L;const s=()=>{ee(this,xt,rs).call(this,{type:"continue"})},r={client:_(this,yn),meta:this.options.meta,mutationKey:this.options.mutationKey};D(this,zs,hu({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(R,F)=>{ee(this,xt,rs).call(this,{type:"failed",failureCount:R,error:F})},onPause:()=>{ee(this,xt,rs).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,De).canRun(this)}));const n=this.state.status==="pending",a=!_(this,zs).canStart();try{if(n)s();else{ee(this,xt,rs).call(this,{type:"pending",variables:e,isPaused:a}),await((l=(i=_(this,De).config).onMutate)==null?void 0:l.call(i,e,this,r));const F=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e,r));F!==this.state.context&&ee(this,xt,rs).call(this,{type:"pending",context:F,variables:e,isPaused:a})}const R=await _(this,zs).start();return await((f=(u=_(this,De).config).onSuccess)==null?void 0:f.call(u,R,e,this.state.context,this,r)),await((h=(g=this.options).onSuccess)==null?void 0:h.call(g,R,e,this.state.context,r)),await((m=(y=_(this,De).config).onSettled)==null?void 0:m.call(y,R,null,this.state.variables,this.state.context,this,r)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,R,null,e,this.state.context,r)),ee(this,xt,rs).call(this,{type:"success",data:R}),R}catch(R){try{throw await((x=(w=_(this,De).config).onError)==null?void 0:x.call(w,R,e,this.state.context,this,r)),await((S=(j=this.options).onError)==null?void 0:S.call(j,R,e,this.state.context,r)),await((E=(C=_(this,De).config).onSettled)==null?void 0:E.call(C,void 0,R,this.state.variables,this.state.context,this,r)),await((L=(N=this.options).onSettled)==null?void 0:L.call(N,void 0,R,e,this.state.context,r)),R}finally{ee(this,xt,rs).call(this,{type:"error",error:R})}}finally{_(this,De).runNext(this)}}},yn=new WeakMap,yt=new WeakMap,De=new WeakMap,zs=new WeakMap,xt=new WeakSet,rs=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Te.batch(()=>{_(this,yt).forEach(r=>{r.onMutationUpdate(e)}),_(this,De).notify({mutation:this,type:"updated",action:e})})},Ec);function gu(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $t,ut,xn,Tc,Xy=(Tc=class extends Hr{constructor(e={}){super();U(this,$t);U(this,ut);U(this,xn);this.config=e,D(this,$t,new Set),D(this,ut,new Map),D(this,xn,0)}build(e,s,r){const n=new Yy({client:e,mutationCache:this,mutationId:++Pn(this,xn)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){_(this,$t).add(e);const s=Dn(e);if(typeof s=="string"){const r=_(this,ut).get(s);r?r.push(e):_(this,ut).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,$t).delete(e)){const s=Dn(e);if(typeof s=="string"){const r=_(this,ut).get(s);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&_(this,ut).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=Dn(e);if(typeof s=="string"){const r=_(this,ut).get(s),n=r==null?void 0:r.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){var r;const s=Dn(e);if(typeof s=="string"){const n=(r=_(this,ut).get(s))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Te.batch(()=>{_(this,$t).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,$t).clear(),_(this,ut).clear()})}getAll(){return Array.from(_(this,$t))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Ll(s,r))}findAll(e={}){return this.getAll().filter(s=>Ll(e,s))}notify(e){Te.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return Te.batch(()=>Promise.all(e.map(s=>s.continue().catch(Me))))}},$t=new WeakMap,ut=new WeakMap,xn=new WeakMap,Tc);function Dn(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Ft,hs,Be,Ut,Ht,Jn,Ga,Nc,Zy=(Nc=class extends Hr{constructor(s,r){super();U(this,Ht);U(this,Ft);U(this,hs);U(this,Be);U(this,Ut);D(this,Ft,s),this.setOptions(r),this.bindMethods(),ee(this,Ht,Jn).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var n;const r=this.options;this.options=_(this,Ft).defaultMutationOptions(s),no(this.options,r)||_(this,Ft).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Be),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Qs(r.mutationKey)!==Qs(this.options.mutationKey)?this.reset():((n=_(this,Be))==null?void 0:n.state.status)==="pending"&&_(this,Be).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=_(this,Be))==null||s.removeObserver(this)}onMutationUpdate(s){ee(this,Ht,Jn).call(this),ee(this,Ht,Ga).call(this,s)}getCurrentResult(){return _(this,hs)}reset(){var s;(s=_(this,Be))==null||s.removeObserver(this),D(this,Be,void 0),ee(this,Ht,Jn).call(this),ee(this,Ht,Ga).call(this)}mutate(s,r){var n;return D(this,Ut,r),(n=_(this,Be))==null||n.removeObserver(this),D(this,Be,_(this,Ft).getMutationCache().build(_(this,Ft),this.options)),_(this,Be).addObserver(this),_(this,Be).execute(s)}},Ft=new WeakMap,hs=new WeakMap,Be=new WeakMap,Ut=new WeakMap,Ht=new WeakSet,Jn=function(){var r;const s=((r=_(this,Be))==null?void 0:r.state)??gu();D(this,hs,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},Ga=function(s){Te.batch(()=>{var r,n,a,i,l,c,d,u;if(_(this,Ut)&&this.hasListeners()){const f=_(this,hs).variables,g=_(this,hs).context,h={client:_(this,Ft),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((n=(r=_(this,Ut)).onSuccess)==null||n.call(r,s.data,f,g,h),(i=(a=_(this,Ut)).onSettled)==null||i.call(a,s.data,null,f,g,h)):(s==null?void 0:s.type)==="error"&&((c=(l=_(this,Ut)).onError)==null||c.call(l,s.error,f,g,h),(u=(d=_(this,Ut)).onSettled)==null||u.call(d,void 0,s.error,f,g,h))}this.listeners.forEach(f=>{f(_(this,hs))})})},Nc),bt,kc,ex=(kc=class extends Hr{constructor(e={}){super();U(this,bt);this.config=e,D(this,bt,new Map)}build(e,s,r){const n=s.queryKey,a=s.queryHash??Ai(n,s);let i=this.get(a);return i||(i=new zy({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){_(this,bt).has(e.queryHash)||(_(this,bt).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=_(this,bt).get(e.queryHash);s&&(e.destroy(),s===e&&_(this,bt).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Te.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,bt).get(e)}getAll(){return[..._(this,bt).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Il(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>Il(e,r)):s}notify(e){Te.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){Te.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Te.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bt=new WeakMap,kc),_e,fs,ps,kr,Pr,ms,Ar,Rr,Pc,tx=(Pc=class{constructor(t={}){U(this,_e);U(this,fs);U(this,ps);U(this,kr);U(this,Pr);U(this,ms);U(this,Ar);U(this,Rr);D(this,_e,t.queryCache||new ex),D(this,fs,t.mutationCache||new Xy),D(this,ps,t.defaultOptions||{}),D(this,kr,new Map),D(this,Pr,new Map),D(this,ms,0)}mount(){Pn(this,ms)._++,_(this,ms)===1&&(D(this,Ar,Oi.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,_e).onFocus())})),D(this,Rr,oo.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,_e).onOnline())})))}unmount(){var t,e;Pn(this,ms)._--,_(this,ms)===0&&((t=_(this,Ar))==null||t.call(this),D(this,Ar,void 0),(e=_(this,Rr))==null||e.call(this),D(this,Rr,void 0))}isFetching(t){return _(this,_e).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,fs).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=_(this,_e).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=_(this,_e).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ys(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,_e).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),n=_(this,_e).get(r.queryHash),a=n==null?void 0:n.state.data,i=Dy(e,a);if(i!==void 0)return _(this,_e).build(this,r).setData(i,{...s,manual:!0})}setQueriesData(t,e,s){return Te.batch(()=>_(this,_e).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=_(this,_e).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=_(this,_e);Te.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=_(this,_e);return Te.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=Te.batch(()=>_(this,_e).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(Me).catch(Me)}invalidateQueries(t,e={}){return Te.batch(()=>(_(this,_e).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=Te.batch(()=>_(this,_e).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let a=n.fetch(void 0,s);return s.throwOnError||(a=a.catch(Me)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Me)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=_(this,_e).build(this,e);return s.isStaleByTime(ys(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Me).catch(Me)}fetchInfiniteQuery(t){return t.behavior=Bl(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Me).catch(Me)}ensureInfiniteQueryData(t){return t.behavior=Bl(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oo.isOnline()?_(this,fs).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,_e)}getMutationCache(){return _(this,fs)}getDefaultOptions(){return _(this,ps)}setDefaultOptions(t){D(this,ps,t)}setQueryDefaults(t,e){_(this,kr).set(Qs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,kr).values()],s={};return e.forEach(r=>{hn(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){_(this,Pr).set(Qs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,Pr).values()],s={};return e.forEach(r=>{hn(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,ps).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ai(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ri&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,ps).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,_e).clear(),_(this,fs).clear()}},_e=new WeakMap,fs=new WeakMap,ps=new WeakMap,kr=new WeakMap,Pr=new WeakMap,ms=new WeakMap,Ar=new WeakMap,Rr=new WeakMap,Pc),vu=p.createContext(void 0),Co=t=>{const e=p.useContext(vu);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},sx=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(vu.Provider,{value:t,children:e})),yu=p.createContext(!1),rx=()=>p.useContext(yu);yu.Provider;function nx(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var ox=p.createContext(nx()),ax=()=>p.useContext(ox),ix=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},lx=t=>{p.useEffect(()=>{t.clearReset()},[t])},cx=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(n&&t.data===void 0||du(s,[t.error,r])),dx=t=>{if(t.suspense){const s=n=>n==="static"?n:Math.max(n??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...n)=>s(r(...n)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},ux=(t,e)=>t.isLoading&&t.isFetching&&!e,hx=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,ql=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function fx(t,e,s){var f,g,h,y,m;const r=rx(),n=ax(),a=Co(),i=a.defaultQueryOptions(t);(g=(f=a.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||g.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",dx(i),ix(i,n),lx(n);const l=!a.getQueryCache().get(i.queryHash),[c]=p.useState(()=>new e(a,i)),d=c.getOptimisticResult(i),u=!r&&t.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const b=u?c.subscribe(Te.batchCalls(v)):Me;return c.updateResult(),b},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(i)},[i,c]),hx(i,d))throw ql(i,c,n);if(cx({result:d,errorResetBoundary:n,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw d.error;if((y=(h=a.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||y.call(h,i,d),i.experimental_prefetchInRender&&!Gs&&ux(d,r)){const v=l?ql(i,c,n):(m=a.getQueryCache().get(i.queryHash))==null?void 0:m.promise;v==null||v.catch(Me).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?d:c.trackResult(d)}function fn(t,e){return fx(t,Ky)}function xu(t,e){const s=Co(),[r]=p.useState(()=>new Zy(s,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const n=p.useSyncExternalStore(p.useCallback(i=>r.subscribe(Te.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=p.useCallback((i,l)=>{r.mutate(i,l).catch(Me)},[r]);if(n.error&&du(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}const Xr="https://languagelearningcustbac.onrender.com";class px{async signUp(e,s,r){try{console.log("Auth: Attempting signup at:",`${Xr}/api/auth/signup`);const n=await fetch(`${Xr}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s,username:r})});console.log("Auth Response status:",n.status);const a=await n.json();return console.log("Auth Response data:",a),n.ok?(a.token&&localStorage.setItem("auth_token",a.token),{user:a.user}):{error:a.message||"Sign up failed"}}catch(n){return console.error("Sign up error:",n),{error:"An unexpected error occurred during sign up"}}}async signIn(e,s){try{console.log("Auth: Attempting signin at:",`${Xr}/api/auth/signin`);const r=await fetch(`${Xr}/api/auth/signin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s})});console.log("Auth Response status:",r.status);const n=await r.json();return console.log("Auth Response data:",n),r.ok?(n.token&&localStorage.setItem("auth_token",n.token),{user:n.user}):{error:n.message||"Sign in failed"}}catch(r){return console.error("Sign in error:",r),{error:"An unexpected error occurred during sign in"}}}async signOut(){try{await fetch(`${Xr}/api/auth/signout`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}})}catch(e){console.error("Sign out error:",e)}finally{localStorage.removeItem("auth_token")}}getCurrentUser(){const e=localStorage.getItem("auth_token");if(!e)return null;try{const s=JSON.parse(atob(e.split(".")[1]));return{id:s.id,email:s.email,username:s.username,xp:s.xp||0,level:s.level||1,streak_count:s.streak_count||0,created_at:s.created_at||new Date().toISOString()}}catch(s){return console.error("Error decoding token:",s),localStorage.removeItem("auth_token"),null}}isAuthenticated(){const e=localStorage.getItem("auth_token");if(!e)return!1;try{return JSON.parse(atob(e.split(".")[1])).exp>Date.now()/1e3}catch{return localStorage.removeItem("auth_token"),!1}}}const Zr=new px,bu=p.createContext(void 0);function mx({children:t}){const[e,s]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(0),[l,c]=p.useState(1),{toast:d}=st(),u=(y,m)=>{i(y),c(m)};p.useEffect(()=>{(()=>{try{const m=Zr.getCurrentUser();m&&Zr.isAuthenticated()&&s(m)}catch(m){console.error("Error checking authentication:",m)}finally{n(!1)}})()},[]);const f=async(y,m,v)=>{const b=await Zr.signUp(y,m,v);return b.error?(d({title:"Sign up failed",description:b.error,variant:"destructive"}),{error:b.error}):(b.user&&s(b.user),d({title:"Success!",description:"Account created successfully."}),{error:null})},g=async(y,m)=>{const v=await Zr.signIn(y,m);return v.error?(d({title:"Sign in failed",description:v.error,variant:"destructive"}),{error:v.error}):(v.user&&s(v.user),d({title:"Welcome back!",description:"You have been signed in successfully."}),{error:null})},h=async()=>{try{await Zr.signOut(),s(null),d({title:"Signed out",description:"You have been signed out successfully."})}catch{d({title:"Sign out failed",description:"There was an error signing you out.",variant:"destructive"})}};return o.jsx(bu.Provider,{value:{user:e,loading:r,userXP:a,userLevel:l,updateUserProgress:u,signUp:f,signIn:g,signOut:h},children:t})}function _n(){const t=p.useContext(bu);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const gx=go("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",duolingo:"bg-green-500 text-white hover:bg-green-600 font-bold shadow-lg transform hover:scale-105 transition-all",duolingoSecondary:"bg-blue-500 text-white hover:bg-blue-600 font-bold shadow-lg transform hover:scale-105 transition-all"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xl:"h-14 rounded-xl px-12 text-lg"}},defaultVariants:{variant:"default",size:"default"}}),G=p.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...n},a)=>{const i=r?Pp:"button";return o.jsx(i,{className:J(gx({variant:e,size:s,className:t})),ref:a,...n})});G.displayName="Button";function vx({openAuthModal:t}){const{user:e,userXP:s,userLevel:r,signOut:n}=_n();return console.log("Header - userXP:",s,"userLevel:",r),console.log("Header - user object:",e),o.jsx("header",{className:"bg-white shadow-sm border-b-2 border-gray-100",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center h-16",children:[o.jsx("div",{className:"flex items-center",children:o.jsx("h1",{className:"text-2xl font-bold text-green-600",children:"Language Mentor"})}),e?o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"flex items-center space-x-1 bg-orange-100 px-3 py-1 rounded-full",children:[o.jsx(Em,{className:"w-4 h-4 text-orange-500"}),o.jsx("span",{className:"text-sm font-medium text-orange-700",children:e.streak_count||0})]}),o.jsxs("div",{className:"flex items-center space-x-1 bg-blue-100 px-3 py-1 rounded-full",children:[o.jsx(yd,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[s||0," XP "]})]}),o.jsxs("div",{className:"flex items-center space-x-1 bg-purple-100 px-3 py-1 rounded-full",children:[o.jsx(Pm,{className:"w-4 h-4 text-purple-500"}),o.jsxs("span",{className:"text-sm font-medium text-purple-700",children:["Lvl ",r||1," "]})]})]}),o.jsx(G,{variant:"ghost",size:"sm",onClick:n,children:o.jsx(Tm,{className:"w-4 h-4"})})]}):t&&o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(G,{variant:"ghost",onClick:()=>t("signin"),children:"Sign In"}),o.jsx(G,{variant:"duolingo",onClick:()=>t("signup"),children:"Sign Up"})]})]})})})}const he=p.forwardRef(({className:t,...e},s)=>o.jsx("div",{ref:s,className:J("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));he.displayName="Card";const Ne=p.forwardRef(({className:t,...e},s)=>o.jsx("div",{ref:s,className:J("flex flex-col space-y-1.5 p-6",t),...e}));Ne.displayName="CardHeader";const Re=p.forwardRef(({className:t,...e},s)=>o.jsx("h3",{ref:s,className:J("text-2xl font-semibold leading-none tracking-tight",t),...e}));Re.displayName="CardTitle";const wu=p.forwardRef(({className:t,...e},s)=>o.jsx("p",{ref:s,className:J("text-sm text-muted-foreground",t),...e}));wu.displayName="CardDescription";const je=p.forwardRef(({className:t,...e},s)=>o.jsx("div",{ref:s,className:J("p-6 pt-0",t),...e}));je.displayName="CardContent";const yx=p.forwardRef(({className:t,...e},s)=>o.jsx("div",{ref:s,className:J("flex items-center p-6 pt-0",t),...e}));yx.displayName="CardFooter";console.log=()=>{},console.error=()=>{},console.warn=()=>{},console.info=()=>{},console.debug=()=>{};const es="https://languagelearningcustbac.onrender.com/api",Pt=(t,e={})=>{console.log(`API Call: ${t}`,{params:e})},ts=async t=>{if(!t.ok){const e=await t.text();throw console.error("API Error:",{status:t.status,statusText:t.statusText,url:t.url,error:e}),new Error(`API Error: ${t.status} - ${t.statusText}`)}return t.json()},Ae={async getLanguages(){try{Pt("/languages");const t=await fetch(`${es}/languages`);return await ts(t)}catch(t){throw console.error("API Error in getLanguages:",t),t}},async getCourses(){try{Pt("/courses");const t=Date.now(),e=new AbortController,s=setTimeout(()=>e.abort(),1e4);try{const r=await fetch(`${es}/courses`,{signal:e.signal,headers:{"Content-Type":"application/json"}});clearTimeout(s);const n=await ts(r);return console.log(`API: Fetched ${n.length} courses in ${Date.now()-t}ms`),n}catch(r){throw clearTimeout(s),r.name==="AbortError"?(console.error("API: getCourses request timed out after 10 seconds"),new Error("Request timed out. Please check your internet connection and try again.")):r}}catch(t){throw console.error("API Error in getCourses:",{name:t.name,message:t.message,stack:t.stack,time:new Date().toISOString()}),t}},async getCourse(t){try{Pt(`/courses/${t}`,{courseId:t});const e=await fetch(`${es}/courses/${t}`);return await ts(e)}catch(e){if(console.error("API Error in getCourse:",e),e.message.includes("404"))return null;throw e}},async getCourseWithFallback(t){console.log(`Fetching course for language: ${t}`);let e=await Ae.getCourse(t);return e||(console.log("Course not found by ID, trying by language name..."),e=await Ae.getCourseByLanguage(t)),!e&&t!==t.toLowerCase()&&(console.log("Trying with lowercase..."),e=await Ae.getCourse(t.toLowerCase())),e?(console.log("Found course:",e),e):(console.error(`No course found for: ${t}`),null)},async getCourseByLanguage(t){try{Pt(`/courses?language=${t}`,{language:t});const e=await fetch(`${es}/courses?language=${encodeURIComponent(t)}`),s=await ts(e);return Array.isArray(s)?s[0]:s}catch(e){return console.error("API Error in getCourseByLanguage:",e),null}},async getCourseUnits(t){try{Pt(`/courses/${t}/units`,{courseId:t});const e=await fetch(`${es}/courses/${t}/units`);return await ts(e)}catch(e){throw console.error("API Error in getCourseUnits:",e),e}},async getLesson(t){try{Pt(`/lessons/${t}`,{lessonId:t});const e=await fetch(`${es}/lessons/${t}`);return await ts(e)}catch(e){if(console.error("API Error in getLesson:",e),e.message.includes("404"))return null;throw e}},async enrollInCourse(t,e){try{Pt("/courses/enrollments",{courseId:t,userId:e});const s=await fetch(`${es}/courses/enrollments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:t,userId:e})});return await ts(s)}catch(s){throw console.error("API Error in enrollInCourse:",s),s}},async markLessonCompleted(t,e){try{Pt("/lessons/progress",{lessonId:t,userId:e});const s=await fetch("https://languagelearningcustbac.onrender.com/api/lessons/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lessonId:t,userId:e})});if(!s.ok){const r=await s.json().catch(()=>({message:"Network error"}));throw new Error(r.message||`HTTP error! status: ${s.status}`)}return await s.json()}catch(s){throw console.error("API Error in markLessonCompleted:",s),s}},async getCourseProgress(t,e){try{Pt("/lessons/progress/:userId/:courseId",{userId:t,courseId:e});const s=await fetch(`${es}/lessons/progress/${t}/${e}`);return await ts(s)}catch(s){throw console.error("API Error in getCourseProgress:",s),s}}};var Xo="focusScope.autoFocusOnMount",Zo="focusScope.autoFocusOnUnmount",Vl={bubbles:!1,cancelable:!0},xx="FocusScope",Li=p.forwardRef((t,e)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:a,...i}=t,[l,c]=p.useState(null),d=et(n),u=et(a),f=p.useRef(null),g=ve(e,m=>c(m)),h=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let m=function(x){if(h.paused||!l)return;const j=x.target;l.contains(j)?f.current=j:ns(f.current,{select:!0})},v=function(x){if(h.paused||!l)return;const j=x.relatedTarget;j!==null&&(l.contains(j)||ns(f.current,{select:!0}))},b=function(x){if(document.activeElement===document.body)for(const S of x)S.removedNodes.length>0&&ns(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",v);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",v),w.disconnect()}}},[r,l,h.paused]),p.useEffect(()=>{if(l){zl.add(h);const m=document.activeElement;if(!l.contains(m)){const b=new CustomEvent(Xo,Vl);l.addEventListener(Xo,d),l.dispatchEvent(b),b.defaultPrevented||(bx(Cx(ju(l)),{select:!0}),document.activeElement===m&&ns(l))}return()=>{l.removeEventListener(Xo,d),setTimeout(()=>{const b=new CustomEvent(Zo,Vl);l.addEventListener(Zo,u),l.dispatchEvent(b),b.defaultPrevented||ns(m??document.body,{select:!0}),l.removeEventListener(Zo,u),zl.remove(h)},0)}}},[l,d,u,h]);const y=p.useCallback(m=>{if(!s&&!r||h.paused)return;const v=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,b=document.activeElement;if(v&&b){const w=m.currentTarget,[x,j]=wx(w);x&&j?!m.shiftKey&&b===j?(m.preventDefault(),s&&ns(x,{select:!0})):m.shiftKey&&b===x&&(m.preventDefault(),s&&ns(j,{select:!0})):b===w&&m.preventDefault()}},[s,r,h.paused]);return o.jsx(te.div,{tabIndex:-1,...i,ref:g,onKeyDown:y})});Li.displayName=xx;function bx(t,{select:e=!1}={}){const s=document.activeElement;for(const r of t)if(ns(r,{select:e}),document.activeElement!==s)return}function wx(t){const e=ju(t),s=Wl(e,t),r=Wl(e.reverse(),t);return[s,r]}function ju(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function Wl(t,e){for(const s of t)if(!jx(s,{upTo:e}))return s}function jx(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _x(t){return t instanceof HTMLInputElement&&"select"in t}function ns(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&_x(t)&&e&&t.select()}}var zl=Sx();function Sx(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=Kl(t,e),t.unshift(e)},remove(e){var s;t=Kl(t,e),(s=t[0])==null||s.resume()}}}function Kl(t,e){const s=[...t],r=s.indexOf(e);return r!==-1&&s.splice(r,1),s}function Cx(t){return t.filter(e=>e.tagName!=="A")}var ea=0;function _u(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Gl()),document.body.insertAdjacentElement("beforeend",t[1]??Gl()),ea++,()=>{ea===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ea--}},[])}function Gl(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wt=function(){return wt=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},wt.apply(this,arguments)};function Su(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function Ex(t,e,s){if(s||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Yn="right-scroll-bar-position",Xn="width-before-scroll-bar",Tx="with-scroll-bars-hidden",Nx="--removed-body-scroll-bar-size";function ta(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function kx(t,e){var s=p.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(r){var n=s.value;n!==r&&(s.value=r,s.callback(r,n))}}}})[0];return s.callback=e,s.facade}var Px=typeof window<"u"?p.useLayoutEffect:p.useEffect,Ql=new WeakMap;function Ax(t,e){var s=kx(null,function(r){return t.forEach(function(n){return ta(n,r)})});return Px(function(){var r=Ql.get(s);if(r){var n=new Set(r),a=new Set(t),i=s.current;n.forEach(function(l){a.has(l)||ta(l,null)}),a.forEach(function(l){n.has(l)||ta(l,i)})}Ql.set(s,t)},[t]),s}function Rx(t){return t}function Ox(t,e){e===void 0&&(e=Rx);var s=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(a){var i=e(a,r);return s.push(i),function(){s=s.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;s.length;){var i=s;s=[],i.forEach(a)}s={push:function(l){return a(l)},filter:function(){return s}}},assignMedium:function(a){r=!0;var i=[];if(s.length){var l=s;s=[],l.forEach(a),i=s}var c=function(){var u=i;i=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),s={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),s}}}};return n}function Ix(t){t===void 0&&(t={});var e=Ox(null);return e.options=wt({async:!0,ssr:!1},t),e}var Cu=function(t){var e=t.sideCar,s=Su(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,wt({},s))};Cu.isSideCarExport=!0;function Lx(t,e){return t.useMedium(e),Cu}var Eu=Ix(),sa=function(){},Eo=p.forwardRef(function(t,e){var s=p.useRef(null),r=p.useState({onScrollCapture:sa,onWheelCapture:sa,onTouchMoveCapture:sa}),n=r[0],a=r[1],i=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,f=t.shards,g=t.sideCar,h=t.noRelative,y=t.noIsolation,m=t.inert,v=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,x=t.gapMode,j=Su(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=g,C=Ax([s,e]),E=wt(wt({},j),n);return p.createElement(p.Fragment,null,u&&p.createElement(S,{sideCar:Eu,removeScrollBar:d,shards:f,noRelative:h,noIsolation:y,inert:m,setCallbacks:a,allowPinchZoom:!!v,lockRef:s,gapMode:x}),i?p.cloneElement(p.Children.only(l),wt(wt({},E),{ref:C})):p.createElement(w,wt({},E,{className:c,ref:C}),l))});Eo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Eo.classNames={fullWidth:Xn,zeroRight:Yn};var Dx=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Mx(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Dx();return e&&t.setAttribute("nonce",e),t}function $x(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Fx(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ux=function(){var t=0,e=null;return{add:function(s){t==0&&(e=Mx())&&($x(e,s),Fx(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Bx=function(){var t=Ux();return function(e,s){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},Tu=function(){var t=Bx(),e=function(s){var r=s.styles,n=s.dynamic;return t(r,n),null};return e},Hx={left:0,top:0,right:0,gap:0},ra=function(t){return parseInt(t||"",10)||0},qx=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],n=e[t==="padding"?"paddingRight":"marginRight"];return[ra(s),ra(r),ra(n)]},Vx=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Hx;var e=qx(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-s+e[2]-e[0])}},Wx=Tu(),br="data-scroll-locked",zx=function(t,e,s,r){var n=t.left,a=t.top,i=t.right,l=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(Tx,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(br,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Yn,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Xn,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yn," .").concat(Yn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xn," .").concat(Xn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(br,`] {
    `).concat(Nx,": ").concat(l,`px;
  }
`)},Jl=function(){var t=parseInt(document.body.getAttribute(br)||"0",10);return isFinite(t)?t:0},Kx=function(){p.useEffect(function(){return document.body.setAttribute(br,(Jl()+1).toString()),function(){var t=Jl()-1;t<=0?document.body.removeAttribute(br):document.body.setAttribute(br,t.toString())}},[])},Gx=function(t){var e=t.noRelative,s=t.noImportant,r=t.gapMode,n=r===void 0?"margin":r;Kx();var a=p.useMemo(function(){return Vx(n)},[n]);return p.createElement(Wx,{styles:zx(a,!e,n,s?"":"!important")})},Qa=!1;if(typeof window<"u")try{var Mn=Object.defineProperty({},"passive",{get:function(){return Qa=!0,!0}});window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Qa=!1}var ar=Qa?{passive:!1}:!1,Qx=function(t){return t.tagName==="TEXTAREA"},Nu=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!Qx(t)&&s[e]==="visible")},Jx=function(t){return Nu(t,"overflowY")},Yx=function(t){return Nu(t,"overflowX")},Yl=function(t,e){var s=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=ku(t,r);if(n){var a=Pu(t,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},Xx=function(t){var e=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[e,s,r]},Zx=function(t){var e=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[e,s,r]},ku=function(t,e){return t==="v"?Jx(e):Yx(e)},Pu=function(t,e){return t==="v"?Xx(e):Zx(e)},eb=function(t,e){return t==="h"&&e==="rtl"?-1:1},tb=function(t,e,s,r,n){var a=eb(t,window.getComputedStyle(e).direction),i=a*r,l=s.target,c=e.contains(l),d=!1,u=i>0,f=0,g=0;do{if(!l)break;var h=Pu(t,l),y=h[0],m=h[1],v=h[2],b=m-v-a*y;(y||b)&&ku(t,l)&&(f+=b,g+=y);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&Math.abs(f)<1||!u&&Math.abs(g)<1)&&(d=!0),d},$n=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Xl=function(t){return[t.deltaX,t.deltaY]},Zl=function(t){return t&&"current"in t?t.current:t},sb=function(t,e){return t[0]===e[0]&&t[1]===e[1]},rb=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},nb=0,ir=[];function ob(t){var e=p.useRef([]),s=p.useRef([0,0]),r=p.useRef(),n=p.useState(nb++)[0],a=p.useState(Tu)[0],i=p.useRef(t);p.useEffect(function(){i.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var m=Ex([t.lockRef.current],(t.shards||[]).map(Zl),!0).filter(Boolean);return m.forEach(function(v){return v.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),m.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(m,v){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var b=$n(m),w=s.current,x="deltaX"in m?m.deltaX:w[0]-b[0],j="deltaY"in m?m.deltaY:w[1]-b[1],S,C=m.target,E=Math.abs(x)>Math.abs(j)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var N=Yl(E,C);if(!N)return!0;if(N?S=E:(S=E==="v"?"h":"v",N=Yl(E,C)),!N)return!1;if(!r.current&&"changedTouches"in m&&(x||j)&&(r.current=S),!S)return!0;var L=r.current||S;return tb(L,v,m,L==="h"?x:j)},[]),c=p.useCallback(function(m){var v=m;if(!(!ir.length||ir[ir.length-1]!==a)){var b="deltaY"in v?Xl(v):$n(v),w=e.current.filter(function(S){return S.name===v.type&&(S.target===v.target||v.target===S.shadowParent)&&sb(S.delta,b)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(i.current.shards||[]).map(Zl).filter(Boolean).filter(function(S){return S.contains(v.target)}),j=x.length>0?l(v,x[0]):!i.current.noIsolation;j&&v.cancelable&&v.preventDefault()}}},[]),d=p.useCallback(function(m,v,b,w){var x={name:m,delta:v,target:b,should:w,shadowParent:ab(b)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(j){return j!==x})},1)},[]),u=p.useCallback(function(m){s.current=$n(m),r.current=void 0},[]),f=p.useCallback(function(m){d(m.type,Xl(m),m.target,l(m,t.lockRef.current))},[]),g=p.useCallback(function(m){d(m.type,$n(m),m.target,l(m,t.lockRef.current))},[]);p.useEffect(function(){return ir.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:g}),document.addEventListener("wheel",c,ar),document.addEventListener("touchmove",c,ar),document.addEventListener("touchstart",u,ar),function(){ir=ir.filter(function(m){return m!==a}),document.removeEventListener("wheel",c,ar),document.removeEventListener("touchmove",c,ar),document.removeEventListener("touchstart",u,ar)}},[]);var h=t.removeScrollBar,y=t.inert;return p.createElement(p.Fragment,null,y?p.createElement(a,{styles:rb(n)}):null,h?p.createElement(Gx,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ab(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ib=Lx(Eu,ob);var Di=p.forwardRef(function(t,e){return p.createElement(Eo,wt({},t,{ref:e,sideCar:ib}))});Di.classNames=Eo.classNames;var lb=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},lr=new WeakMap,Fn=new WeakMap,Un={},na=0,Au=function(t){return t&&(t.host||Au(t.parentNode))},cb=function(t,e){return e.map(function(s){if(t.contains(s))return s;var r=Au(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},db=function(t,e,s,r){var n=cb(e,Array.isArray(t)?t:[t]);Un[s]||(Un[s]=new WeakMap);var a=Un[s],i=[],l=new Set,c=new Set(n),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};n.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(g){if(l.has(g))u(g);else try{var h=g.getAttribute(r),y=h!==null&&h!=="false",m=(lr.get(g)||0)+1,v=(a.get(g)||0)+1;lr.set(g,m),a.set(g,v),i.push(g),m===1&&y&&Fn.set(g,!0),v===1&&g.setAttribute(s,"true"),y||g.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",g,b)}})};return u(e),l.clear(),na++,function(){i.forEach(function(f){var g=lr.get(f)-1,h=a.get(f)-1;lr.set(f,g),a.set(f,h),g||(Fn.has(f)||f.removeAttribute(r),Fn.delete(f)),h||f.removeAttribute(s)}),na--,na||(lr=new WeakMap,lr=new WeakMap,Fn=new WeakMap,Un={})}},Ru=function(t,e,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),n=lb(t);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live], script"))),db(r,n,s,"aria-hidden")):function(){return null}},To="Dialog",[Ou]=ws(To),[ub,gt]=Ou(To),Iu=t=>{const{__scopeDialog:e,children:s,open:r,defaultOpen:n,onOpenChange:a,modal:i=!0}=t,l=p.useRef(null),c=p.useRef(null),[d,u]=Ir({prop:r,defaultProp:n??!1,onChange:a,caller:To});return o.jsx(ub,{scope:e,triggerRef:l,contentRef:c,contentId:vs(),titleId:vs(),descriptionId:vs(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),modal:i,children:s})};Iu.displayName=To;var Lu="DialogTrigger",Du=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=gt(Lu,s),a=ve(e,n.triggerRef);return o.jsx(te.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Fi(n.open),...r,ref:a,onClick:V(t.onClick,n.onOpenToggle)})});Du.displayName=Lu;var Mi="DialogPortal",[hb,Mu]=Ou(Mi,{forceMount:void 0}),$u=t=>{const{__scopeDialog:e,forceMount:s,children:r,container:n}=t,a=gt(Mi,e);return o.jsx(hb,{scope:e,forceMount:s,children:p.Children.map(r,i=>o.jsx(Zs,{present:s||a.open,children:o.jsx(fo,{asChild:!0,container:n,children:i})}))})};$u.displayName=Mi;var ao="DialogOverlay",Fu=p.forwardRef((t,e)=>{const s=Mu(ao,t.__scopeDialog),{forceMount:r=s.forceMount,...n}=t,a=gt(ao,t.__scopeDialog);return a.modal?o.jsx(Zs,{present:r||a.open,children:o.jsx(pb,{...n,ref:e})}):null});Fu.displayName=ao;var fb=Or("DialogOverlay.RemoveScroll"),pb=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=gt(ao,s);return o.jsx(Di,{as:fb,allowPinchZoom:!0,shards:[n.contentRef],children:o.jsx(te.div,{"data-state":Fi(n.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Js="DialogContent",Uu=p.forwardRef((t,e)=>{const s=Mu(Js,t.__scopeDialog),{forceMount:r=s.forceMount,...n}=t,a=gt(Js,t.__scopeDialog);return o.jsx(Zs,{present:r||a.open,children:a.modal?o.jsx(mb,{...n,ref:e}):o.jsx(gb,{...n,ref:e})})});Uu.displayName=Js;var mb=p.forwardRef((t,e)=>{const s=gt(Js,t.__scopeDialog),r=p.useRef(null),n=ve(e,s.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return Ru(a)},[]),o.jsx(Bu,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:V(t.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=s.triggerRef.current)==null||i.focus()}),onPointerDownOutside:V(t.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:V(t.onFocusOutside,a=>a.preventDefault())})}),gb=p.forwardRef((t,e)=>{const s=gt(Js,t.__scopeDialog),r=p.useRef(!1),n=p.useRef(!1);return o.jsx(Bu,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(r.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=a.target;((d=s.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&n.current&&a.preventDefault()}})}),Bu=p.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:a,...i}=t,l=gt(Js,s),c=p.useRef(null),d=ve(e,c);return _u(),o.jsxs(o.Fragment,{children:[o.jsx(Li,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:a,children:o.jsx(bn,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Fi(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(vb,{titleId:l.titleId}),o.jsx(xb,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$i="DialogTitle",Hu=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=gt($i,s);return o.jsx(te.h2,{id:n.titleId,...r,ref:e})});Hu.displayName=$i;var qu="DialogDescription",Vu=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=gt(qu,s);return o.jsx(te.p,{id:n.descriptionId,...r,ref:e})});Vu.displayName=qu;var Wu="DialogClose",zu=p.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=gt(Wu,s);return o.jsx(te.button,{type:"button",...r,ref:e,onClick:V(t.onClick,()=>n.onOpenChange(!1))})});zu.displayName=Wu;function Fi(t){return t?"open":"closed"}var Ku="DialogTitleWarning",[O_,Gu]=Np(Ku,{contentName:Js,titleName:$i,docsSlug:"dialog"}),vb=({titleId:t})=>{const e=Gu(Ku),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},yb="DialogDescriptionWarning",xb=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Gu(yb).contentName}}.`;return p.useEffect(()=>{var a;const n=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&n&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},bb=Iu,wb=Du,jb=$u,Qu=Fu,Ju=Uu,Yu=Hu,Xu=Vu,_b=zu;const Ui=bb,Zu=wb,Sb=jb,eh=p.forwardRef(({className:t,...e},s)=>o.jsx(Qu,{ref:s,className:J("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));eh.displayName=Qu.displayName;const No=p.forwardRef(({className:t,children:e,...s},r)=>o.jsxs(Sb,{children:[o.jsx(eh,{}),o.jsxs(Ju,{ref:r,className:J("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,o.jsxs(_b,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(vo,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));No.displayName=Ju.displayName;const ko=({className:t,...e})=>o.jsx("div",{className:J("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});ko.displayName="DialogHeader";const Po=p.forwardRef(({className:t,...e},s)=>o.jsx(Yu,{ref:s,className:J("text-lg font-semibold leading-none tracking-tight",t),...e}));Po.displayName=Yu.displayName;const Bi=p.forwardRef(({className:t,...e},s)=>o.jsx(Xu,{ref:s,className:J("text-sm text-muted-foreground",t),...e}));Bi.displayName=Xu.displayName;function ec(t,[e,s]){return Math.min(s,Math.max(e,t))}var Cb=p.createContext(void 0);function Hi(t){const e=p.useContext(Cb);return t||e||"ltr"}function Eb(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Tb=[" ","Enter","ArrowUp","ArrowDown"],Nb=[" ","Enter"],Ys="Select",[Ao,Ro,kb]=vi(Ys),[qr]=ws(Ys,[kb,jo]),Oo=jo(),[Pb,js]=qr(Ys),[Ab,Rb]=qr(Ys),th=t=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:n,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:g,required:h,form:y}=t,m=Oo(e),[v,b]=p.useState(null),[w,x]=p.useState(null),[j,S]=p.useState(!1),C=Hi(d),[E,N]=Ir({prop:r,defaultProp:n??!1,onChange:a,caller:Ys}),[L,R]=Ir({prop:i,defaultProp:l,onChange:c,caller:Ys}),F=p.useRef(null),O=v?y||!!v.closest("form"):!0,[B,A]=p.useState(new Set),q=Array.from(B).map(I=>I.props.value).join(";");return o.jsx(fy,{...m,children:o.jsxs(Pb,{required:h,scope:e,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:vs(),value:L,onValueChange:R,open:E,onOpenChange:N,dir:C,triggerPointerDownPosRef:F,disabled:g,children:[o.jsx(Ao.Provider,{scope:e,children:o.jsx(Ab,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(I=>{A(H=>new Set(H).add(I))},[]),onNativeOptionRemove:p.useCallback(I=>{A(H=>{const T=new Set(H);return T.delete(I),T})},[]),children:s})}),O?o.jsxs(Ch,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:f,value:L,onChange:I=>R(I.target.value),disabled:g,form:y,children:[L===void 0?o.jsx("option",{value:""}):null,Array.from(B)]},q):null]})})};th.displayName=Ys;var sh="SelectTrigger",rh=p.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:r=!1,...n}=t,a=Oo(s),i=js(sh,s),l=i.disabled||r,c=ve(e,i.onTriggerChange),d=Ro(s),u=p.useRef("touch"),[f,g,h]=Th(m=>{const v=d().filter(x=>!x.disabled),b=v.find(x=>x.value===i.value),w=Nh(v,m,b);w!==void 0&&i.onValueChange(w.value)}),y=m=>{l||(i.onOpenChange(!0),h()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return o.jsx(Jd,{asChild:!0,...a,children:o.jsx(te.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Eh(i.value)?"":void 0,...n,ref:c,onClick:V(n.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&y(m)}),onPointerDown:V(n.onPointerDown,m=>{u.current=m.pointerType;const v=m.target;v.hasPointerCapture(m.pointerId)&&v.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(y(m),m.preventDefault())}),onKeyDown:V(n.onKeyDown,m=>{const v=f.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&g(m.key),!(v&&m.key===" ")&&Tb.includes(m.key)&&(y(),m.preventDefault())})})})});rh.displayName=sh;var nh="SelectValue",oh=p.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:n,children:a,placeholder:i="",...l}=t,c=js(nh,s),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=ve(e,c.onValueNodeChange);return Oe(()=>{d(u)},[d,u]),o.jsx(te.span,{...l,ref:f,style:{pointerEvents:"none"},children:Eh(c.value)?o.jsx(o.Fragment,{children:i}):a})});oh.displayName=nh;var Ob="SelectIcon",ah=p.forwardRef((t,e)=>{const{__scopeSelect:s,children:r,...n}=t;return o.jsx(te.span,{"aria-hidden":!0,...n,ref:e,children:r||""})});ah.displayName=Ob;var Ib="SelectPortal",ih=t=>o.jsx(fo,{asChild:!0,...t});ih.displayName=Ib;var Xs="SelectContent",lh=p.forwardRef((t,e)=>{const s=js(Xs,t.__scopeSelect),[r,n]=p.useState();if(Oe(()=>{n(new DocumentFragment)},[]),!s.open){const a=r;return a?$r.createPortal(o.jsx(ch,{scope:t.__scopeSelect,children:o.jsx(Ao.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),a):null}return o.jsx(dh,{...t,ref:e})});lh.displayName=Xs;var ct=10,[ch,_s]=qr(Xs),Lb="SelectContentImpl",Db=Or("SelectContent.RemoveScroll"),dh=p.forwardRef((t,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:g,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:v,...b}=t,w=js(Xs,s),[x,j]=p.useState(null),[S,C]=p.useState(null),E=ve(e,M=>j(M)),[N,L]=p.useState(null),[R,F]=p.useState(null),O=Ro(s),[B,A]=p.useState(!1),q=p.useRef(!1);p.useEffect(()=>{if(x)return Ru(x)},[x]),_u();const I=p.useCallback(M=>{const[ce,...me]=O().map(le=>le.ref.current),[ie]=me.slice(-1),Z=document.activeElement;for(const le of M)if(le===Z||(le==null||le.scrollIntoView({block:"nearest"}),le===ce&&S&&(S.scrollTop=0),le===ie&&S&&(S.scrollTop=S.scrollHeight),le==null||le.focus(),document.activeElement!==Z))return},[O,S]),H=p.useCallback(()=>I([N,x]),[I,N,x]);p.useEffect(()=>{B&&H()},[B,H]);const{onOpenChange:T,triggerPointerDownPosRef:k}=w;p.useEffect(()=>{if(x){let M={x:0,y:0};const ce=ie=>{var Z,le;M={x:Math.abs(Math.round(ie.pageX)-(((Z=k.current)==null?void 0:Z.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((le=k.current)==null?void 0:le.y)??0))}},me=ie=>{M.x<=10&&M.y<=10?ie.preventDefault():x.contains(ie.target)||T(!1),document.removeEventListener("pointermove",ce),k.current=null};return k.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",me,{capture:!0})}}},[x,T,k]),p.useEffect(()=>{const M=()=>T(!1);return window.addEventListener("blur",M),window.addEventListener("resize",M),()=>{window.removeEventListener("blur",M),window.removeEventListener("resize",M)}},[T]);const[$,ae]=Th(M=>{const ce=O().filter(Z=>!Z.disabled),me=ce.find(Z=>Z.ref.current===document.activeElement),ie=Nh(ce,M,me);ie&&setTimeout(()=>ie.ref.current.focus())}),K=p.useCallback((M,ce,me)=>{const ie=!q.current&&!me;(w.value!==void 0&&w.value===ce||ie)&&(L(M),ie&&(q.current=!0))},[w.value]),z=p.useCallback(()=>x==null?void 0:x.focus(),[x]),W=p.useCallback((M,ce,me)=>{const ie=!q.current&&!me;(w.value!==void 0&&w.value===ce||ie)&&F(M)},[w.value]),be=r==="popper"?Ja:uh,Se=be===Ja?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:g,collisionPadding:h,sticky:y,hideWhenDetached:m,avoidCollisions:v}:{};return o.jsx(ch,{scope:s,content:x,viewport:S,onViewportChange:C,itemRefCallback:K,selectedItem:N,onItemLeave:z,itemTextRefCallback:W,focusSelectedItem:H,selectedItemText:R,position:r,isPositioned:B,searchRef:$,children:o.jsx(Di,{as:Db,allowPinchZoom:!0,children:o.jsx(Li,{asChild:!0,trapped:w.open,onMountAutoFocus:M=>{M.preventDefault()},onUnmountAutoFocus:V(n,M=>{var ce;(ce=w.trigger)==null||ce.focus({preventScroll:!0}),M.preventDefault()}),children:o.jsx(bn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:M=>M.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(be,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:M=>M.preventDefault(),...b,...Se,onPlaced:()=>A(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:V(b.onKeyDown,M=>{const ce=M.ctrlKey||M.altKey||M.metaKey;if(M.key==="Tab"&&M.preventDefault(),!ce&&M.key.length===1&&ae(M.key),["ArrowUp","ArrowDown","Home","End"].includes(M.key)){let ie=O().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(M.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(M.key)){const Z=M.target,le=ie.indexOf(Z);ie=ie.slice(le+1)}setTimeout(()=>I(ie)),M.preventDefault()}})})})})})})});dh.displayName=Lb;var Mb="SelectItemAlignedPosition",uh=p.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:r,...n}=t,a=js(Xs,s),i=_s(Xs,s),[l,c]=p.useState(null),[d,u]=p.useState(null),f=ve(e,E=>u(E)),g=Ro(s),h=p.useRef(!1),y=p.useRef(!0),{viewport:m,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=i,x=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&m&&v&&b){const E=a.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),L=a.valueNode.getBoundingClientRect(),R=b.getBoundingClientRect();if(a.dir!=="rtl"){const Z=R.left-N.left,le=L.left-Z,ke=E.left-le,Ge=E.width+ke,Ns=Math.max(Ge,N.width),Gt=window.innerWidth-ct,ks=ec(le,[ct,Math.max(ct,Gt-Ns)]);l.style.minWidth=Ge+"px",l.style.left=ks+"px"}else{const Z=N.right-R.right,le=window.innerWidth-L.right-Z,ke=window.innerWidth-E.right-le,Ge=E.width+ke,Ns=Math.max(Ge,N.width),Gt=window.innerWidth-ct,ks=ec(le,[ct,Math.max(ct,Gt-Ns)]);l.style.minWidth=Ge+"px",l.style.right=ks+"px"}const F=g(),O=window.innerHeight-ct*2,B=m.scrollHeight,A=window.getComputedStyle(d),q=parseInt(A.borderTopWidth,10),I=parseInt(A.paddingTop,10),H=parseInt(A.borderBottomWidth,10),T=parseInt(A.paddingBottom,10),k=q+I+B+T+H,$=Math.min(v.offsetHeight*5,k),ae=window.getComputedStyle(m),K=parseInt(ae.paddingTop,10),z=parseInt(ae.paddingBottom,10),W=E.top+E.height/2-ct,be=O-W,Se=v.offsetHeight/2,M=v.offsetTop+Se,ce=q+I+M,me=k-ce;if(ce<=W){const Z=F.length>0&&v===F[F.length-1].ref.current;l.style.bottom="0px";const le=d.clientHeight-m.offsetTop-m.offsetHeight,ke=Math.max(be,Se+(Z?z:0)+le+H),Ge=ce+ke;l.style.height=Ge+"px"}else{const Z=F.length>0&&v===F[0].ref.current;l.style.top="0px";const ke=Math.max(W,q+m.offsetTop+(Z?K:0)+Se)+me;l.style.height=ke+"px",m.scrollTop=ce-W+m.offsetTop}l.style.margin=`${ct}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[g,a.trigger,a.valueNode,l,d,m,v,b,a.dir,r]);Oe(()=>x(),[x]);const[j,S]=p.useState();Oe(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const C=p.useCallback(E=>{E&&y.current===!0&&(x(),w==null||w(),y.current=!1)},[x,w]);return o.jsx(Fb,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(te.div,{...n,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});uh.displayName=Mb;var $b="SelectPopperPosition",Ja=p.forwardRef((t,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:n=ct,...a}=t,i=Oo(s);return o.jsx(Yd,{...i,...a,ref:e,align:r,collisionPadding:n,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ja.displayName=$b;var[Fb,qi]=qr(Xs,{}),Ya="SelectViewport",hh=p.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:r,...n}=t,a=_s(Ya,s),i=qi(Ya,s),l=ve(e,a.onViewportChange),c=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(Ao.Slot,{scope:s,children:o.jsx(te.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:V(n.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:g}=i;if(g!=null&&g.current&&f){const h=Math.abs(c.current-u.scrollTop);if(h>0){const y=window.innerHeight-ct*2,m=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),b=Math.max(m,v);if(b<y){const w=b+h,x=Math.min(y,w),j=w-x;f.style.height=x+"px",f.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});hh.displayName=Ya;var fh="SelectGroup",[Ub,Bb]=qr(fh),Hb=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=vs();return o.jsx(Ub,{scope:s,id:n,children:o.jsx(te.div,{role:"group","aria-labelledby":n,...r,ref:e})})});Hb.displayName=fh;var ph="SelectLabel",mh=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=Bb(ph,s);return o.jsx(te.div,{id:n.id,...r,ref:e})});mh.displayName=ph;var io="SelectItem",[qb,gh]=qr(io),vh=p.forwardRef((t,e)=>{const{__scopeSelect:s,value:r,disabled:n=!1,textValue:a,...i}=t,l=js(io,s),c=_s(io,s),d=l.value===r,[u,f]=p.useState(a??""),[g,h]=p.useState(!1),y=ve(e,w=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,w,r,n)}),m=vs(),v=p.useRef("touch"),b=()=>{n||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(qb,{scope:s,value:r,disabled:n,textId:m,isSelected:d,onItemTextChange:p.useCallback(w=>{f(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(Ao.ItemSlot,{scope:s,value:r,disabled:n,textValue:u,children:o.jsx(te.div,{role:"option","aria-labelledby":m,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:y,onFocus:V(i.onFocus,()=>h(!0)),onBlur:V(i.onBlur,()=>h(!1)),onClick:V(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:V(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:V(i.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:V(i.onPointerMove,w=>{var x;v.current=w.pointerType,n?(x=c.onItemLeave)==null||x.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:V(i.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:V(i.onKeyDown,w=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&w.key===" "||(Nb.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});vh.displayName=io;var sn="SelectItemText",yh=p.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:n,...a}=t,i=js(sn,s),l=_s(sn,s),c=gh(sn,s),d=Rb(sn,s),[u,f]=p.useState(null),g=ve(e,b=>f(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),h=u==null?void 0:u.textContent,y=p.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:v}=d;return Oe(()=>(m(y),()=>v(y)),[m,v,y]),o.jsxs(o.Fragment,{children:[o.jsx(te.span,{id:c.textId,...a,ref:g}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?$r.createPortal(a.children,i.valueNode):null]})});yh.displayName=sn;var xh="SelectItemIndicator",bh=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return gh(xh,s).isSelected?o.jsx(te.span,{"aria-hidden":!0,...r,ref:e}):null});bh.displayName=xh;var Xa="SelectScrollUpButton",wh=p.forwardRef((t,e)=>{const s=_s(Xa,t.__scopeSelect),r=qi(Xa,t.__scopeSelect),[n,a]=p.useState(!1),i=ve(e,r.onScrollButtonChange);return Oe(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),n?o.jsx(_h,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});wh.displayName=Xa;var Za="SelectScrollDownButton",jh=p.forwardRef((t,e)=>{const s=_s(Za,t.__scopeSelect),r=qi(Za,t.__scopeSelect),[n,a]=p.useState(!1),i=ve(e,r.onScrollButtonChange);return Oe(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=s.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),n?o.jsx(_h,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=s;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});jh.displayName=Za;var _h=p.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:r,...n}=t,a=_s("SelectScrollButton",s),i=p.useRef(null),l=Ro(s),c=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Oe(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),o.jsx(te.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:V(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:V(n.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:V(n.onPointerLeave,()=>{c()})})}),Vb="SelectSeparator",Sh=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return o.jsx(te.div,{"aria-hidden":!0,...r,ref:e})});Sh.displayName=Vb;var ei="SelectArrow",Wb=p.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=Oo(s),a=js(ei,s),i=_s(ei,s);return a.open&&i.position==="popper"?o.jsx(Xd,{...n,...r,ref:e}):null});Wb.displayName=ei;var zb="SelectBubbleInput",Ch=p.forwardRef(({__scopeSelect:t,value:e,...s},r)=>{const n=p.useRef(null),a=ve(r,n),i=Eb(e);return p.useEffect(()=>{const l=n.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&u){const f=new Event("change",{bubbles:!0});u.call(l,e),l.dispatchEvent(f)}},[i,e]),o.jsx(te.select,{...s,style:{...Gc,...s.style},ref:a,defaultValue:e})});Ch.displayName=zb;function Eh(t){return t===""||t===void 0}function Th(t){const e=et(t),s=p.useRef(""),r=p.useRef(0),n=p.useCallback(i=>{const l=s.current+i;e(l),function c(d){s.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=p.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,a]}function Nh(t,e,s){const n=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=s?t.indexOf(s):-1;let i=Kb(t,Math.max(a,0));n.length===1&&(i=i.filter(d=>d!==s));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==s?c:void 0}function Kb(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var Gb=th,kh=rh,Qb=oh,Jb=ah,Yb=ih,Ph=lh,Xb=hh,Ah=mh,Rh=vh,Zb=yh,ew=bh,Oh=wh,Ih=jh,Lh=Sh;const zt=Gb,Kt=Qb,Et=p.forwardRef(({className:t,children:e,...s},r)=>o.jsxs(kh,{ref:r,className:J("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,o.jsx(Jb,{asChild:!0,children:o.jsx(gd,{className:"h-4 w-4 opacity-50"})})]}));Et.displayName=kh.displayName;const Dh=p.forwardRef(({className:t,...e},s)=>o.jsx(Oh,{ref:s,className:J("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Sm,{className:"h-4 w-4"})}));Dh.displayName=Oh.displayName;const Mh=p.forwardRef(({className:t,...e},s)=>o.jsx(Ih,{ref:s,className:J("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(gd,{className:"h-4 w-4"})}));Mh.displayName=Ih.displayName;const Tt=p.forwardRef(({className:t,children:e,position:s="popper",...r},n)=>o.jsx(Yb,{children:o.jsxs(Ph,{ref:n,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[o.jsx(Dh,{}),o.jsx(Xb,{className:J("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Mh,{})]})}));Tt.displayName=Ph.displayName;const tw=p.forwardRef(({className:t,...e},s)=>o.jsx(Ah,{ref:s,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));tw.displayName=Ah.displayName;const pe=p.forwardRef(({className:t,children:e,...s},r)=>o.jsxs(Rh,{ref:r,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ew,{children:o.jsx(md,{className:"h-4 w-4"})})}),o.jsx(Zb,{children:e})]}));pe.displayName=Rh.displayName;const sw=p.forwardRef(({className:t,...e},s)=>o.jsx(Lh,{ref:s,className:J("-mx-1 my-1 h-px bg-muted",t),...e}));sw.displayName=Lh.displayName;const tc=[{code:"en",name:"English",flag:""},{code:"zh",name:"Mandarin Chinese",flag:""},{code:"hi",name:"Hindi",flag:""},{code:"es",name:"Spanish",flag:""},{code:"fr",name:"French",flag:""},{code:"ar",name:"Standard Arabic",flag:""},{code:"bn",name:"Bengali",flag:""},{code:"ru",name:"Russian",flag:""},{code:"pt",name:"Portuguese",flag:""},{code:"id",name:"Indonesian",flag:""},{code:"ur",name:"Urdu",flag:""},{code:"de",name:"German",flag:""},{code:"ja",name:"Japanese",flag:""},{code:"sw",name:"Swahili",flag:""},{code:"mr",name:"Marathi",flag:""},{code:"te",name:"Telugu",flag:""},{code:"tr",name:"Turkish",flag:""},{code:"ta",name:"Tamil",flag:""},{code:"ko",name:"Korean",flag:""},{code:"vi",name:"Vietnamese",flag:""},{code:"it",name:"Italian",flag:""},{code:"th",name:"Thai",flag:""},{code:"gu",name:"Gujarati",flag:""},{code:"pl",name:"Polish",flag:""},{code:"my",name:"Burmese",flag:""},{code:"uk",name:"Ukrainian",flag:""},{code:"ml",name:"Malayalam",flag:""},{code:"kn",name:"Kannada",flag:""},{code:"or",name:"Odia",flag:""},{code:"pa",name:"Punjabi",flag:""}];function rw({isOpen:t,onLanguageSelect:e,onClose:s}){const[r,n]=p.useState(""),a=()=>{if(r){const i=tc.find(l=>l.code===r);i?(console.log("[LanguagePreferenceDialog] handleConfirm - code:",i.code,"name:",i.name),e(i.code,i.name)):console.log("[LanguagePreferenceDialog] handleConfirm - language not found for:",r)}else console.log("[LanguagePreferenceDialog] handleConfirm - no language selected")};return o.jsx(Ui,{open:t,onOpenChange:s,children:o.jsxs(No,{className:"sm:max-w-md bg-white border shadow-xl",children:[o.jsx(ko,{children:o.jsxs(Po,{className:"flex items-center gap-2 text-xl font-bold text-gray-900",children:[o.jsx(Ca,{className:"w-6 h-6 text-green-600"}),"What language do you speak?"]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Choose your native language to get translations in your preferred language during lessons."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select your language:"}),o.jsxs(zt,{value:r,onValueChange:n,children:[o.jsx(Et,{className:"w-full bg-white border-gray-300",children:o.jsx(Kt,{placeholder:"Choose a language..."})}),o.jsx(Tt,{className:"max-h-60 bg-white border shadow-lg z-50",children:tc.map(i=>o.jsxs(pe,{value:i.code,className:"flex items-center gap-2 hover:bg-gray-100",children:[o.jsx("span",{className:"mr-2",children:i.flag}),i.name]},i.code))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx(G,{variant:"outline",onClick:s,children:"Cancel"}),o.jsx(G,{onClick:a,disabled:!r,className:"bg-green-500 hover:bg-green-600 text-white",children:"Continue"})]})]})]})})}const nw={en:{"Back to Course":"Back to Course","Content coming soon!":"Content coming soon!","Examples:":"Examples:","Answer:":"Answer:",Exercise:"Exercise"},es:{"Back to Course":"Volver al Curso","Content coming soon!":"Contenido prximamente!","Examples:":"Ejemplos:","Answer:":"Respuesta:",Exercise:"Ejercicio"},fr:{"Back to Course":"Retour au Cours","Content coming soon!":"Contenu  venir!","Examples:":"Exemples:","Answer:":"Rponse:",Exercise:"Exercice"},de:{"Back to Course":"Zurck zum Kurs","Content coming soon!":"Inhalt kommt bald!","Examples:":"Beispiele:","Answer:":"Antwort:",Exercise:"bung"},pt:{"Back to Course":"Voltar ao Curso","Content coming soon!":"Contedo em breve!","Examples:":"Exemplos:","Answer:":"Resposta:",Exercise:"Exerccio"},it:{"Back to Course":"Torna al Corso","Content coming soon!":"Contenuto in arrivo!","Examples:":"Esempi:","Answer:":"Risposta:",Exercise:"Esercizio"},ru:{"Back to Course":"  ","Content coming soon!":"  !","Examples:":":","Answer:":":",Exercise:""},ja:{"Back to Course":"","Content coming soon!":"","Examples:":"","Answer:":"",Exercise:""},ko:{"Back to Course":" ","Content coming soon!":"  !","Examples:":":","Answer:":":",Exercise:""},zh:{"Back to Course":"","Content coming soon!":"","Examples:":"","Answer:":"",Exercise:""}};class ow{constructor(){at(this,"currentLanguage","en");at(this,"currentLanguageName","English")}setLanguage(e,s){this.currentLanguage=e,this.currentLanguageName=s,localStorage.setItem("preferredLanguage",e),localStorage.setItem("preferredLanguageName",s),console.log("[TranslationService.setLanguage] Set to",e,s)}getCurrentLanguage(){return{code:this.currentLanguage,name:this.currentLanguageName}}loadStoredLanguage(){const e=localStorage.getItem("preferredLanguage"),s=localStorage.getItem("preferredLanguageName");console.log("[TranslationService.loadStoredLanguage] Loaded from localStorage:",e,s),e&&s&&(this.currentLanguage=e,this.currentLanguageName=s)}translate(e){if(this.currentLanguage==="en")return e;const s=nw[this.currentLanguage];return s&&s[e]?s[e]:e}async translateLessonContent(e){return e}}const oa=new ow,aw={},iw=p.createContext(aw),_t=({title:t="Language Mentor",description:e="Learn new languages through interactive courses, exercises, and lessons.",keywords:s=["language learning","online courses","language exercises"],image:r="/images/og-image.jpg",type:n="website",publishedTime:a,modifiedTime:i,author:l,section:c,tags:d=[],canonicalUrl:u,children:f,openGraph:g={},twitter:h={},additionalMetaTags:y=[]})=>{uo();const{isSSR:m}=p.useContext(iw),v=u?new URL(u,window.location.origin).toString():window.location.href,b={"og:title":t,"og:description":e,"og:type":n,"og:image":r,"og:url":v,"og:site_name":"Language Learning Platform",...n==="article"&&a&&{"article:published_time":a},...n==="article"&&i&&{"article:modified_time":i},...n==="article"&&l&&{"article:author":l},...n==="article"&&c&&{"article:section":c},...n==="article"&&d.length>0&&{"article:tag":d.join(", ")},...g},w={"twitter:card":"summary_large_image","twitter:title":t,"twitter:description":e,"twitter:image":r,...h},x=[{name:"description",content:e},{name:"keywords",content:Array.isArray(s)?s.join(", "):s},...Object.entries(b).map(([j,S])=>({property:j,content:typeof S=="string"?S:JSON.stringify(S)})),...Object.entries(w).map(([j,S])=>({name:j.replace("twitter:","twitter:"),content:typeof S=="string"?S:JSON.stringify(S)})),...y];if(y.some(j=>j.name==="viewport")||x.push({name:"viewport",content:"width=device-width, initial-scale=1"}),y.some(j=>j.name==="theme-color")||x.push({name:"theme-color",content:"#ffffff"}),!y.some(j=>j.name==="language")){const j=typeof window<"u"?window.navigator.language:"en";x.push({name:"language",content:j})}return o.jsxs(jp,{children:[o.jsx("title",{children:t}),u&&o.jsx("link",{rel:"canonical",href:v}),x.map((j,S)=>o.jsx("meta",{...j},S)),f]})},gs=(t,e={})=>{var g;const s="Language Mentor",r="https://languagementor.site",n=`${r}/images/og-default.jpg`,a=Array.isArray(e.keywords)?e.keywords:typeof e.keywords=="string"?[e.keywords]:[],i=e.additionalKeywords||[],l=[...new Set([...a,...i])];typeof e.language=="string"?e.language:(g=e.language)!=null&&g.name;const c={title:s,description:"Learn new languages through interactive courses and exercises.",keywords:l.length>0?l:["language learning","online courses","language exercises"],image:n,type:"website"},u={...c,...{home:{title:s,description:"Start your language learning journey with our interactive courses and lessons."}}[t]||{},...e},f=e.canonicalUrl||`${r}${t==="home"?"":`/${t}`}`;return{title:u.title||s,description:u.description||c.description,keywords:Array.isArray(u.keywords)?u.keywords.join(", "):u.keywords||"",canonicalUrl:f,image:u.image||n,type:u.type,publishedTime:u.publishedTime,modifiedTime:u.modifiedTime,author:u.author,section:u.section,tags:u.tags,children:u.children}};function sc({openAuthModal:t}){const e=ho(),[s,r]=p.useState([]),[n,a]=p.useState([]),[i,l]=p.useState(!0),[c,d]=p.useState(null),[u,f]=p.useState(!1),[g,h]=p.useState(null),y=gs("home",{description:"Start your language learning journey with our interactive courses and lessons. Learn at your own pace with our comprehensive language learning platform.",additionalKeywords:["language learning","online courses","learn languages","interactive lessons","language exercises",...n.map(S=>`learn ${S.name}`),...s.map(S=>`${S.language.name} course`)].filter(Boolean),canonicalUrl:"https://languagementor.site"}),m=async(S,C=0)=>{try{return await S()}catch(E){if(C<3){console.log(`API call failed, retrying... (${C+1}/3)`);const N=1e3*Math.pow(2,C);return await new Promise(L=>setTimeout(L,N)),m(S,C+1)}throw E}},v=async()=>{try{l(!0),d(null);const[S,C]=await Promise.all([m(()=>Ae.getCourses()),m(()=>Ae.getLanguages())]);r(S),a(C)}catch(S){console.error("Error loading data:",S),d("Failed to load data. Please try again later.")}finally{l(!1)}};p.useEffect(()=>{v(),oa.loadStoredLanguage()},[]);const b=S=>{const C=oa.getCurrentLanguage();if(C&&C.code){const E=S.language.name.toLowerCase().replace(/\s+/g,"-");e(`/learn/${E}`)}else h(S.id),f(!0)},w=(S,C)=>{if(oa.setLanguage(S,C),f(!1),g){const E=s.find(N=>N.id===g);if(E){const N=E.language.name.toLowerCase().replace(/\s+/g,"-");e(`/learn/${N}`)}else e(`/course/${g}`);h(null)}},x=()=>{f(!1),h(null)},j=()=>{f(!0),h(null)};return i?o.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[o.jsx(_t,{...y}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading courses..."})]})]}):c?o.jsxs("div",{className:"container mx-auto p-4 text-center",children:[o.jsx(_t,{...gs("error",{title:"Error"})}),o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),o.jsx("p",{className:"text-red-500 mb-6",children:c}),o.jsx(G,{onClick:()=>{d(null),l(!0),v()},children:"Try Again"})]})]}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(_t,{...y,type:"website"}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"text-center mb-12"}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(G,{variant:"duolingoSecondary",size:"sm",className:"flex items-center gap-2",onClick:j,children:[o.jsx(Ca,{className:"w-4 h-4"}),"Change Language"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[o.jsx(he,{children:o.jsxs(je,{className:"flex items-center p-6",children:[o.jsx(Ca,{className:"h-8 w-8 text-blue-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length}),o.jsx("p",{className:"text-gray-600",children:"Languages"})]})]})}),o.jsx(he,{children:o.jsxs(je,{className:"flex items-center p-6",children:[o.jsx(qt,{className:"h-8 w-8 text-green-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.length}),o.jsx("p",{className:"text-gray-600",children:"Courses"})]})]})}),o.jsx(he,{children:o.jsxs(je,{className:"flex items-center p-6",children:[o.jsx(Am,{className:"h-8 w-8 text-purple-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"}),o.jsx("p",{className:"text-gray-600",children:"Students"})]})]})}),o.jsx(he,{children:o.jsxs(je,{className:"flex items-center p-6",children:[o.jsx(_m,{className:"h-8 w-8 text-yellow-600 mr-3"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"0"}),o.jsx("p",{className:"text-gray-600",children:"Badge Level"})]})]})})]}),o.jsxs("div",{className:"mb-12",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Available Courses"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(S=>o.jsxs(he,{className:"hover:shadow-lg transition-shadow",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"text-3xl",children:S.language.flag_emoji}),o.jsxs("div",{children:[o.jsx(Re,{className:"text-lg",children:S.language.name}),o.jsx("p",{className:"text-sm text-gray-600",children:S.language.code.toUpperCase()})]})]})}),o.jsxs(je,{children:[o.jsx("p",{className:"text-gray-600 mb-4",children:S.description}),o.jsx(G,{onClick:()=>b(S),className:"w-full bg-green-500 hover:bg-green-600 text-white",children:"Start Learning"})]})]},S.id))})]})]}),o.jsx(rw,{isOpen:u,onLanguageSelect:w,onClose:x})]})}const de=p.forwardRef(({className:t,type:e,...s},r)=>o.jsx("input",{type:e,className:J("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));de.displayName="Input";function lw({isOpen:t,onClose:e}){const[s,r]=p.useState(""),[n,a]=p.useState(!1),{toast:i}=st();if(!t)return null;const l=async c=>{c.preventDefault(),a(!0);try{const d=await fetch("https://languagelearningdep.onrender.com/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),u=await d.json();d.ok?(i({title:"Password Reset Requested",description:u.message}),u.previewUrl&&(console.log(" Email Preview URL:",u.previewUrl),i({title:"Development Mode",description:"Check the browser console for the email preview URL!"})),r(""),e()):i({title:"Error",description:u.message||"Failed to send password reset email",variant:"destructive"})}catch{i({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Reset Password"}),o.jsx("button",{onClick:e,className:"p-1",children:o.jsx(vo,{className:"w-6 h-6"})})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Enter your email address and we'll send you a link to reset your password."}),o.jsxs("form",{onSubmit:l,className:"space-y-4",children:[o.jsx(de,{type:"email",placeholder:"Enter your email",value:s,onChange:c=>r(c.target.value),required:!0}),o.jsx(G,{type:"submit",variant:"duolingo",className:"w-full",disabled:n,children:n?"Sending...":"Send Reset Link"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:e,className:"text-blue-600 hover:underline font-medium",children:"Back to Sign In"})})]})})}function cw({isOpen:t,onClose:e,mode:s}){const[r,n]=p.useState(s),[a,i]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(""),[f,g]=p.useState(!1),[h,y]=p.useState(!1),{signIn:m,signUp:v}=_n();if(console.log("AuthModal rendered with mode:",r,"isOpen:",t),!t)return null;const b=async x=>{x.preventDefault(),g(!0);try{if(r==="signin"){const{error:j}=await m(a,l);j||e()}else{const{error:j}=await v(a,l,d);j||e()}}finally{g(!1)}},w=()=>{console.log("Forgot password clicked"),y(!0)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:r==="signin"?"Sign In":"Sign Up"}),o.jsx("button",{onClick:e,className:"p-1",children:o.jsx(vo,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[r==="signup"&&o.jsx(de,{type:"text",placeholder:"Username",value:d,onChange:x=>u(x.target.value),required:!0}),o.jsx(de,{type:"email",placeholder:"Email",value:a,onChange:x=>i(x.target.value),required:!0}),o.jsx(de,{type:"password",placeholder:"Password",value:l,onChange:x=>c(x.target.value),required:!0}),r==="signin"&&o.jsx("div",{className:"text-right",children:o.jsx("button",{type:"button",onClick:w,className:"text-sm text-blue-600 hover:underline cursor-pointer",children:"Forgot Password?"})}),o.jsx(G,{type:"submit",variant:"duolingo",className:"w-full",disabled:f,children:f?"Loading...":r==="signin"?"Sign In":"Sign Up"})]}),o.jsx("div",{className:"mt-6 text-center",children:r==="signin"?o.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",o.jsx("button",{onClick:()=>n("signup"),className:"text-blue-600 hover:underline font-medium",children:"Sign Up"})]}):o.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",o.jsx("button",{onClick:()=>n("signin"),className:"text-blue-600 hover:underline font-medium",children:"Sign In"})]})})]})}),o.jsx(lw,{isOpen:h,onClose:()=>y(!1)})]})}const dw="modulepreload",uw=function(t){return"/"+t},rc={},Sn=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=uw(c),c in rc)return;rc[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":dw,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((g,h)=>{f.addEventListener("load",g),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},hw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class Vi extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class fw extends Vi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nc extends Vi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oc extends Vi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ti;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ti||(ti={}));var pw=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class mw{constructor(e,{headers:s={},customFetch:r,region:n=ti.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=hw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return pw(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(l["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(l["Content-Type"]="application/json",u=JSON.stringify(i)));const f=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(m=>{throw new fw(m)}),g=f.headers.get("x-relay-error");if(g&&g==="true")throw new nc(f);if(!f.ok)throw new oc(f);let h=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return h==="application/json"?y=yield f.json():h==="application/octet-stream"?y=yield f.blob():h==="text/event-stream"?y=f:h==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(n){return{data:null,error:n,response:n instanceof oc||n instanceof nc?n.context:void 0}}})}}var qe={},Wi={},Io={},Cn={},Lo={},Do={},gw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Mr=gw();const vw=Mr.fetch,$h=Mr.fetch.bind(Mr),Fh=Mr.Headers,yw=Mr.Request,xw=Mr.Response,Vr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Fh,Request:yw,Response:xw,default:$h,fetch:vw},Symbol.toStringTag,{value:"Module"})),bw=qf(Vr);var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});let ww=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Mo.default=ww;var Uh=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Do,"__esModule",{value:!0});const jw=Uh(bw),_w=Uh(Mo);let Sw=class{constructor(e){var s,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=jw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c,d;let u=null,f=null,g=null,h=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const w=await a.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?f=w:f=JSON.parse(w))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&b&&b.length>1&&(g=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,g=null,h=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await a.text();try{u=JSON.parse(v),Array.isArray(u)&&a.status===404&&(f=[],u=null,h=200,y="OK")}catch{a.status===404&&v===""?(h=204,y="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,h=200,y="OK"),u&&this.shouldThrowOnError)throw new _w.default(u)}return{error:u,data:f,count:g,status:h,statusText:y}});return this.shouldThrowOnError||(n=n.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,s)}returns(){return this}overrideTypes(){return this}};Do.default=Sw;var Cw=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lo,"__esModule",{value:!0});const Ew=Cw(Do);let Tw=class extends Ew.default{select(e){let s=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!s?"":(n==='"'&&(s=!s),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:r=s}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,s,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Lo.default=Tw;var Nw=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cn,"__esModule",{value:!0});const kw=Nw(Lo);let Pw=class extends kw.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const r=Array.from(new Set(s)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${s}`),this}match(e){return Object.entries(e).forEach(([s,r])=>{this.url.searchParams.append(s,`eq.${r}`)}),this}not(e,s,r){return this.url.searchParams.append(e,`not.${s}.${r}`),this}or(e,{foreignTable:s,referencedTable:r=s}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,s,r){return this.url.searchParams.append(e,`${s}.${r}`),this}};Cn.default=Pw;var Aw=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Io,"__esModule",{value:!0});const en=Aw(Cn);let Rw=class{constructor(e,{headers:s={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(s),this.schema=r,this.fetch=n}select(e,{head:s=!1,count:r}={}){const n=s?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new en.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:r=!0}={}){var n;const a="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new en.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new en.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:s}={}){var r;const n="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new en.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var s;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new en.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Io.default=Rw;var Bh=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});const Ow=Bh(Io),Iw=Bh(Cn);let Lw=class Hh{constructor(e,{headers:s={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(s),this.schemaName=r,this.fetch=n}from(e){const s=new URL(`${this.url}/${e}`);return new Ow.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Hh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:r=!1,get:n=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;r||n?(l=r?"HEAD":"GET",Object.entries(s).filter(([f,g])=>g!==void 0).map(([f,g])=>[f,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([f,g])=>{c.searchParams.append(f,g)})):(l="POST",d=s);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new Iw.default({method:l,url:c,headers:u,schema:this.schemaName,body:d,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Wi.default=Lw;var Wr=Ze&&Ze.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qe,"__esModule",{value:!0});qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const qh=Wr(Wi);qe.PostgrestClient=qh.default;const Vh=Wr(Io);qe.PostgrestQueryBuilder=Vh.default;const Wh=Wr(Cn);qe.PostgrestFilterBuilder=Wh.default;const zh=Wr(Lo);qe.PostgrestTransformBuilder=zh.default;const Kh=Wr(Do);qe.PostgrestBuilder=Kh.default;const Gh=Wr(Mo);qe.PostgrestError=Gh.default;var Dw=qe.default={PostgrestClient:qh.default,PostgrestQueryBuilder:Vh.default,PostgrestFilterBuilder:Wh.default,PostgrestTransformBuilder:zh.default,PostgrestBuilder:Kh.default,PostgrestError:Gh.default};const{PostgrestClient:Mw,PostgrestQueryBuilder:F_,PostgrestFilterBuilder:U_,PostgrestTransformBuilder:B_,PostgrestBuilder:H_,PostgrestError:q_}=Dw;class $w{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Fw="2.15.5",Uw=`realtime-js/${Fw}`,Bw="1.0.0",si=1e4,Hw=1e3,qw=100;var an;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(an||(an={}));var Ce;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ce||(Ce={}));var ht;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ht||(ht={}));var ri;(function(t){t.websocket="websocket"})(ri||(ri={}));var Ls;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ls||(Ls={}));class Vw{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),a=s.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(e.slice(i,i+n));i=i+n;const c=r.decode(e.slice(i,i+a));i=i+a;const d=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Qh{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ge||(ge={}));const ac=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,i)=>(a[i]=Ww(i,t,e,n),a),{})},Ww=(t,e,s,r)=>{const n=e.find(l=>l.name===t),a=n==null?void 0:n.type,i=s[t];return a&&!r.includes(a)?Jh(a,i):ni(i)},Jh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Qw(e,s)}switch(t){case ge.bool:return zw(e);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return Kw(e);case ge.json:case ge.jsonb:return Gw(e);case ge.timestamp:return Jw(e);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return ni(e);default:return ni(e)}},ni=t=>t,zw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Kw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Gw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Qw=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let a;const i=t.slice(1,s);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>Jh(e,l))}return t},Jw=t=>typeof t=="string"?t.replace(" ","T"):t,Yh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class aa{constructor(e,s,r={},n=si){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ic;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ic||(ic={}));class ln{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ln.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=ln.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ln.syncDiff(this.state,n,a,i),l())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const a=this.cloneDeep(e),i=this.transformState(s),l={},c={};return this.map(a,(d,u)=>{i[d]||(c[d]=u)}),this.map(i,(d,u)=>{const f=a[d];if(f){const g=u.map(v=>v.presence_ref),h=f.map(v=>v.presence_ref),y=u.filter(v=>h.indexOf(v.presence_ref)<0),m=f.filter(v=>g.indexOf(v.presence_ref)<0);y.length>0&&(l[d]=y),m.length>0&&(c[d]=m)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},r,n)}static syncDiff(e,s,r,n){const{joins:a,leaves:i}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const f=e[l].map(h=>h.presence_ref),g=u.filter(h=>f.indexOf(h.presence_ref)<0);e[l].unshift(...g)}r(l,u,c)}),this.map(i,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[l]=d,n(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(lc||(lc={}));var cn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(cn||(cn={}));var Lt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Lt||(Lt={}));class zi{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new aa(this,ht.join,this.params,this.timeout),this.rejoinTimer=new Qh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new ln(this),this.broadcastEndpointURL=Yh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,d=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[cn.PRESENCE]&&this.bindings[cn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},g={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(Lt.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Lt.CLOSED)),this.updateJoinPayload(Object.assign({config:g},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var y;if(this.socket.setAuth(),h===void 0){e==null||e(Lt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(y=m==null?void 0:m.length)!==null&&y!==void 0?y:0,b=[];for(let w=0;w<v;w++){const x=m[w],{filter:{event:j,schema:S,table:C,filter:E}}=x,N=h&&h[w];if(N&&N.event===j&&N.schema===S&&N.table===C&&N.filter===E)b.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),this.state=Ce.errored,e==null||e(Lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Lt.SUBSCRIBED);return}}).receive("error",h=>{this.state=Ce.errored,e==null||e(Lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===Ce.joined&&e===cn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ce.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new aa(this,ht.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,a=setTimeout(()=>n.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(a),i}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new aa(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>qw){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,a;const i=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ht;if(r&&[l,c,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let g=this._onMessage(i,s,r);if(s&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(h=>{var y,m,v;return((y=h.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(m=h.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===i}).map(h=>h.callback(g,r)):(a=this.bindings[i])===null||a===void 0||a.filter(h=>{var y,m,v,b,w,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in h){const j=h.id,S=(y=h.filter)===null||y===void 0?void 0:y.event;return j&&((m=s.ids)===null||m===void 0?void 0:m.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((v=s.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const j=(w=(b=h==null?void 0:h.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((x=s==null?void 0:s.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===i}).map(h=>{if(typeof g=="object"&&"ids"in g){const y=g.data,{schema:m,table:v,commit_timestamp:b,type:w,errors:x}=y;g=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(y))}h.callback(g,r)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),a={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&zi.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ht.close,{},e)}_onError(e){this._on(ht.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=ac(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=ac(e.columns,e.old_record)),s}}const ia=()=>{},Bn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Yw=[1e3,2e3,5e3,1e4],Xw=1e4,Zw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class e0{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=si,this.transport=null,this.heartbeatIntervalMs=Bn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ia,this.ref=0,this.reconnectTimer=null,this.logger=ia,this.conn=null,this.sendBuffer=[],this.serializer=new Vw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let a;return n?a=n:typeof fetch>"u"?a=(...i)=>Sn(async()=>{const{default:l}=await Promise.resolve().then(()=>Vr);return{default:l}},void 0).then(({default:l})=>l(...i)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...i)=>a(...i)},!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${ri.websocket}`,this.httpEndpoint=Yh(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$w.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bw}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case an.connecting:return Ls.Connecting;case an.open:return Ls.Open;case an.closing:return Ls.Closing;default:return Ls.Closed}}isConnected(){return this.connectionState()===Ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===r);if(n)return n;{const a=new zi(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:r,payload:n,ref:a}=e,i=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${r} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Hw,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Bn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:a,ref:i}=s,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${n} ${l}`.trim(),a),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,a,i)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ht.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([Zw],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const n={access_token:s,version:Uw};s&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(ht.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Qh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,a,i,l,c,d,u;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:si,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:Bn.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:ia,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>Yw[f-1]||Xw,this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(f,g)=>g(JSON.stringify(f)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ki extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ee(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class t0 extends Ki{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oi extends Ki{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var s0=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const Xh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},r0=()=>s0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sn(()=>Promise.resolve().then(()=>Vr),void 0)).Response:Response}),ai=t=>{if(Array.isArray(t))return t.map(s=>ai(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=ai(r)}),e},n0=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var er=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const la=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),o0=(t,e,s)=>er(void 0,void 0,void 0,function*(){const r=yield r0();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{const a=t.status||500,i=(n==null?void 0:n.statusCode)||a+"";e(new t0(la(n),a,i))}).catch(n=>{e(new oi(la(n),n))}):e(new oi(la(t),t))}),a0=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(n0(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),s))};function En(t,e,s,r,n,a){return er(this,void 0,void 0,function*(){return new Promise((i,l)=>{t(s,a0(e,r,n,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>o0(c,l,r))})})}function lo(t,e,s,r){return er(this,void 0,void 0,function*(){return En(t,"GET",e,s,r)})}function vt(t,e,s,r,n){return er(this,void 0,void 0,function*(){return En(t,"POST",e,r,n,s)})}function ii(t,e,s,r,n){return er(this,void 0,void 0,function*(){return En(t,"PUT",e,r,n,s)})}function i0(t,e,s,r){return er(this,void 0,void 0,function*(){return En(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Zh(t,e,s,r,n){return er(this,void 0,void 0,function*(){return En(t,"DELETE",e,r,n,s)})}var Ie=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const l0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class c0{constructor(e,s={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=r,this.fetch=Xh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,r,n){return Ie(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},cc),n);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),f=yield(e=="PUT"?ii:vt)(this.fetch,`${this.url}/object/${u}`,a,Object.assign({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ee(a))return{data:null,error:a};throw a}})}upload(e,s,r){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Ie(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:cc.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield ii(this.fetch,l.toString(),c,{headers:u});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ee(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Ie(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const a=yield vt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Ki("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}update(e,s,r){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Ie(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}copy(e,s,r){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield vt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Ie(this,void 0,void 0,function*(){try{const n=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}download(e,s){return Ie(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield lo(this.fetch,`${this.url}/${n}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ee(l))return{data:null,error:l};throw l}})}info(e){return Ie(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield lo(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ai(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}exists(e){return Ie(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield i0(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r)&&r instanceof oi){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&n.push(a);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&n.push(c);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return Ie(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ee(s))return{data:null,error:s};throw s}})}list(e,s,r){return Ie(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},l0),s),{prefix:e||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ee(n))return{data:null,error:n};throw n}})}listV2(e,s){return Ie(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield vt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const d0="2.12.1",u0={"X-Client-Info":`storage-js/${d0}`};var cr=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class h0{constructor(e,s={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},u0),s),this.fetch=Xh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return cr(this,void 0,void 0,function*(){try{return{data:yield lo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ee(e))return{data:null,error:e};throw e}})}getBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield lo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ee(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return cr(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return cr(this,void 0,void 0,function*(){try{return{data:yield ii(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ee(r))return{data:null,error:r};throw r}})}emptyBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ee(s))return{data:null,error:s};throw s}})}deleteBucket(e){return cr(this,void 0,void 0,function*(){try{return{data:yield Zh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ee(s))return{data:null,error:s};throw s}})}}class f0 extends h0{constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new c0(this.url,this.headers,e,this.fetch)}}const p0="2.57.4";let rn="";typeof Deno<"u"?rn="deno":typeof document<"u"?rn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rn="react-native":rn="node";const m0={"X-Client-Info":`supabase-js-${rn}/${p0}`},g0={headers:m0},v0={schema:"public"},y0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},x0={};var b0=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};const w0=t=>{let e;return t?e=t:typeof fetch>"u"?e=$h:e=fetch,(...s)=>e(...s)},j0=()=>typeof Headers>"u"?Fh:Headers,_0=(t,e,s)=>{const r=w0(s),n=j0();return(a,i)=>b0(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new n(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},i),{headers:d}))})};var S0=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};function C0(t){return t.endsWith("/")?t:t+"/"}function E0(t,e){var s,r;const{db:n,auth:a,realtime:i,global:l}=t,{db:c,auth:d,realtime:u,global:f}=e,g={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>S0(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}function T0(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(C0(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ef="2.71.1",pr=30*1e3,li=3,ca=li*pr,N0="http://localhost:9999",k0="supabase.auth.token",P0={"X-Client-Info":`gotrue-js/${ef}`},ci="X-Supabase-Api-Version",tf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,R0=10*60*1e3;class Gi extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class O0 extends Gi{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function I0(t){return Y(t)&&t.name==="AuthApiError"}class sf extends Gi{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ss extends Gi{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class os extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L0(t){return Y(t)&&t.name==="AuthSessionMissingError"}class Hn extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qn extends Ss{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vn extends Ss{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function D0(t){return Y(t)&&t.name==="AuthImplicitGrantRedirectError"}class dc extends Ss{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class di extends Ss{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function da(t){return Y(t)&&t.name==="AuthRetryableFetchError"}class uc extends Ss{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ui extends Ss{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hc=` 	
\r=`.split(""),M0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<hc.length;e+=1)t[hc[e].charCodeAt(0)]=-2;for(let e=0;e<co.length;e+=1)t[co[e].charCodeAt(0)]=e;return t})();function fc(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(co[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(co[r]),e.queuedBits-=6}}function rf(t,e,s){const r=M0[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function pc(t){const e=[],s=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=i=>{U0(i,r,s)};for(let i=0;i<t.length;i+=1)rf(t.charCodeAt(i),n,a);return e.join("")}function $0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function F0(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}$0(r,e)}}function U0(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function B0(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)rf(t.charCodeAt(n),s,r);return new Uint8Array(e)}function H0(t){const e=[];return F0(t,s=>e.push(s)),new Uint8Array(e)}function q0(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>fc(n,s,r)),fc(null,s,r),e.join("")}function V0(t){return Math.round(Date.now()/1e3)+t}function W0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const lt=()=>typeof window<"u"&&typeof document<"u",Rs={tested:!1,writable:!1},nf=()=>{if(!lt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rs.tested)return Rs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Rs.tested=!0,Rs.writable=!0}catch{Rs.tested=!0,Rs.writable=!1}return Rs.writable};function z0(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const of=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Vr);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},K0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mr=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Os=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ss=async(t,e)=>{await t.removeItem(e)};class $o{constructor(){this.promise=new $o.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}$o.promiseConstructor=Promise;function ua(t){const e=t.split(".");if(e.length!==3)throw new ui("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!A0.test(e[r]))throw new ui("JWT not in base64url format");return{header:JSON.parse(pc(e[0])),payload:JSON.parse(pc(e[1])),signature:B0(e[2]),raw:{header:e[0],payload:e[1]}}}async function G0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Q0(t,e){return new Promise((r,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await t(a);if(!e(a,null,i)){r(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function J0(t){return("0"+t.toString(16)).substr(-2)}function Y0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let a=0;a<56;a++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,J0).join("")}async function X0(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Z0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await X0(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dr(t,e,s=!1){const r=Y0();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await mr(t,`${e}-code-verifier`,n);const a=await Z0(r);return[a,r===a?"plain":"s256"]}const ej=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tj(t){const e=t.headers.get(ci);if(!e||!e.match(ej))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function sj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function rj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ur(t){if(!nj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ha(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mc(t){return JSON.parse(JSON.stringify(t))}var oj=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),aj=[502,503,504];async function gc(t){var e;if(!K0(t))throw new di(Is(t),0);if(aj.includes(t.status))throw new di(Is(t),t.status);let s;try{s=await t.json()}catch(a){throw new sf(Is(a),a)}let r;const n=tj(t);if(n&&n.getTime()>=tf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new uc(Is(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new os}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new uc(Is(s),t.status,s.weak_password.reasons);throw new O0(Is(s),t.status||500,r)}const ij=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function se(t,e,s,r){var n;const a=Object.assign({},r==null?void 0:r.headers);a[ci]||(a[ci]=tf["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await lj(t,e,s+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function lj(t,e,s,r,n,a){const i=ij(e,r,n,a);let l;try{l=await t(s,Object.assign({},i))}catch(c){throw console.error(c),new di(Is(c),0)}if(l.ok||await gc(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await gc(c)}}function Rt(t){var e;let s=null;hj(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=V0(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function vc(t){const e=Rt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function as(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function cj(t){return{data:t,error:null}}function dj(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a}=t,i=oj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function uj(t){return t}function hj(t){return t.access_token&&t.refresh_token&&t.expires_in}const fa=["global","local","others"];var fj=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class pj{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=of(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=fa[0]){if(fa.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fa.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:as})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=fj(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:dj,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(Y(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:as})}catch(s){if(Y(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,a,i,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:uj});if(u.error)throw u.error;const f=await u.json(),g=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,h=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);d[`${v}Page`]=m}),d.total=parseInt(g)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Y(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){ur(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:as})}catch(s){if(Y(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){ur(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:as})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){ur(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:as})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ur(e.userId);try{const{data:s,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _deleteFactor(e){ur(e.userId),ur(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}}}function yc(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function mj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hr={debug:!!(globalThis&&nf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class af extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gj extends af{}async function vj(t,e,s){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),hr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw hr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new gj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(hr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}mj();const yj={url:N0,storageKey:k0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:P0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xc(t,e,s){return await s()}const fr={};class pn{constructor(e){var s,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pn.nextInstanceID,pn.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},yj),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new pj({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=of(n.fetch),this.lock=n.lock||xc,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:lt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=vj:this.lock=xc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:nf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yc(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=yc(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=fr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=fr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fr[this.storageKey]=Object.assign(Object.assign({},fr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ef}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=z0(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),lt()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:a}=await this._getSessionFromURL(s,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),D0(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Y(s)?{error:s}:{error:new sf("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Rt}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,r,n;try{let a;if("email"in e){const{email:u,password:f,options:g}=e;let h=null,y=null;this.flowType==="pkce"&&([h,y]=await dr(this.storage,this.storageKey)),a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:u,password:f,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:h,code_challenge_method:y},xform:Rt})}else if("phone"in e){const{phone:u,password:f,options:g}=e;a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Rt})}else throw new qn("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Y(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:i,options:l}=e;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vc})}else if("phone"in e){const{phone:a,password:i,options:l}=e;s=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vc})}else throw new qn("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Hn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,n,a,i,l,c,d,u,f,g,h;let y,m;if("message"in e)y=e.message,m=e.signature;else{const{chain:v,wallet:b,statement:w,options:x}=e;let j;if(lt())if(typeof b=="object")j=b;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=b}const S=new URL((s=x==null?void 0:x.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(n=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((f=(u=x==null?void 0:x.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...x.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=C}}try{const{data:v,error:b}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:q0(m)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Rt});if(b)throw b;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Hn}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:b})}catch(v){if(Y(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const s=await Os(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:a,error:i}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Rt});if(await ss(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Hn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(Y(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:a,nonce:i}=e,l=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Rt}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Hn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,a,i;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await dr(this.storage,this.storageKey));const{error:f}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new qn("You must provide either an email or phone number.")}catch(l){if(Y(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,r;try{let n,a;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:Rt});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,d=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(Y(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await dr(this.storage,this.storageKey)),await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:cj})}catch(a){if(Y(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new os;const{error:n}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(Y(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:a}=e,{error:i}=await se(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:n,options:a}=e,{data:i,error:l}=await se(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new qn("You must provide either an email or phone number and a type")}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Os(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ca:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Os(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=ha()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!i&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:as}):await this._useSession(async s=>{var r,n,a;const{data:i,error:l}=s;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new os}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:as})})}catch(s){if(Y(s))return L0(s)&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:a}=r;if(a)throw a;if(!n.session)throw new os;const i=n.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await dr(this.storage,this.storageKey));const{data:d,error:u}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:as});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new os;const s=Date.now()/1e3;let r=s,n=!0,a=null;const{payload:i}=ua(e.access_token);if(i.exp&&(r=i.exp,n=r<=s),n){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(Y(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:i,error:l}=s;if(l)throw l;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new os;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Y(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!lt())throw new Vn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new dc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vn("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new dc("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!i||!d)throw new Vn("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(l);let g=u+f;c&&(g=parseInt(c));const h=g-u;h*1e3<=pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const y=g-f;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,g,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,g,u);const{data:m,error:v}=await this._getUser(a);if(v)throw v;const b={provider_token:r,provider_refresh_token:n,access_token:a,expires_in:f,expires_at:g,refresh_token:i,token_type:d,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(Y(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Os(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:a}=s;if(a)return{error:a};const i=(r=n.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,e);if(l&&!(I0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ss(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=W0(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:a},error:i}=s;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await dr(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(Y(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async a=>{var i,l,c,d,u;const{data:f,error:g}=a;if(g)throw g;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return lt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Y(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:a,error:i}=s;if(i)throw i;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await Q0(async n=>(n>0&&await G0(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rt})),(n,a)=>{const i=200*Math.pow(2,n);return a&&da(a)&&Date.now()+i-r<pr})}catch(r){if(this._debug(s,"error",r),Y(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),lt()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Os(this.storage,this.storageKey);if(n&&this.userStorage){let i=await Os(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:n.user},await mr(this.userStorage,this.storageKey+"-user",i)),n.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:ha()}else if(n&&!n.user&&!n.user){const i=await Os(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(n.user=i.user,await ss(this.storage,this.storageKey+"-user"),await mr(this.storage,this.storageKey,n)):n.user=ha()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ca;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${ca}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),da(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(n.access_token);!l&&(i!=null&&i.user)?(n.user=i.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new $o;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new os;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(n,"error",a),Y(a)){const i={session:null,error:a};return da(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await mr(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const a=mc(n);await mr(this.storage,this.storageKey,a)}else{const n=mc(s);await mr(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await ss(this.storage,this.storageKey),await ss(this.storage,this.storageKey+"-code-verifier"),await ss(this.storage,this.storageKey+"-user"),this.userStorage&&await ss(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),pr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${pr}ms, refresh threshold is ${li} ticks`),n<=li&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof af)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await dr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);n.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:a}=s;return a?{data:null,error:a}:await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:a,error:i}=s;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await se(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(Y(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:a}=s;if(a)return{data:null,error:a};const{data:i,error:l}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(s){if(Y(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:a}=s;return a?{data:null,error:a}:await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(Y(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ua(n.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(l=>l.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+R0>n)return r;const{data:a,error:i}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,r=a.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:h,error:y}=await this.getSession();if(y||!h.session)return{data:null,error:y};r=h.session.access_token}const{header:n,payload:a,signature:i,raw:{header:l,payload:c}}=ua(r);s!=null&&s.allowExpired||sj(a.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!d){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:a,header:n,signature:i},error:null}}const u=rj(n.alg),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,i,H0(`${l}.${c}`)))throw new ui("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}}pn.nextInstanceID=0;const xj=pn;class bj extends xj{constructor(e){super(e)}}var wj=function(t,e,s,r){function n(a){return a instanceof s?a:new s(function(i){i(a)})}return new(s||(s=Promise))(function(a,i){function l(u){try{d(r.next(u))}catch(f){i(f)}}function c(u){try{d(r.throw(u))}catch(f){i(f)}}function d(u){u.done?a(u.value):n(u.value).then(l,c)}d((r=r.apply(t,e||[])).next())})};class jj{constructor(e,s,r){var n,a,i;this.supabaseUrl=e,this.supabaseKey=s;const l=T0(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:v0,realtime:x0,auth:Object.assign(Object.assign({},y0),{storageKey:c}),global:g0},u=E0(r??{},d);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=_0(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Mw(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new f0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new mw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return wj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:l,lock:c,debug:d},u,f){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bj({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:a,flowType:l,lock:c,debug:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new e0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _j=(t,e,s)=>new jj(t,e,s);function Sj(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Sj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Cj="https://qgpucwwhubbbuxcqsalx.supabase.co",Ej="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFncHVjd3dodWJiYnV4Y3FzYWx4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NDU1MDMsImV4cCI6MjA2NTAyMTUwM30.hgv9HEb5LW8xZJgodkdr35koTN58H_u8O4heroRySmk",Tj=_j(Cj,Ej);function Nj(){const[t,e]=p.useState(!1),[s,r]=p.useState(!1),{toast:n}=st(),a=async()=>{e(!0);try{const{data:i,error:l}=await Tj.functions.invoke("populate-language-content");if(l)throw l;r(!0),n({title:"Success!",description:`Content populated successfully! ${i.message}`})}catch(i){console.error("Error populating content:",i),n({title:"Error",description:"Failed to populate language content. Please try again.",variant:"destructive"})}finally{e(!1)}};return o.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-xl shadow-lg",children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[o.jsx(Zn,{className:"w-6 h-6"}),"Language Content Administration"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"This will populate the database with comprehensive Duolingo-style language learning content for all 30 supported languages. Each language will have 15 units with vocabulary, phrases, grammar rules, and exercises."}),o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Content Structure:"}),o.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[o.jsx("li",{children:" 30 Languages (English, Spanish, French, German, etc.)"}),o.jsx("li",{children:" 15 Units per language (Beginner  Intermediate  Advanced)"}),o.jsx("li",{children:" 4 Lesson types per unit (Vocabulary, Phrases, Grammar, Exercises)"}),o.jsx("li",{children:" Audio placeholders for text-to-speech integration"}),o.jsx("li",{children:" Difficulty progression and XP rewards"})]})]}),s?o.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-4 rounded-lg",children:[o.jsx(Cm,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Content has been successfully populated!"})]}):o.jsx(G,{onClick:a,disabled:t,size:"lg",className:"w-full",children:t?o.jsxs(o.Fragment,{children:[o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}),"Populating Content..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Populate Language Content"]})}),o.jsxs("div",{className:"text-xs text-gray-500",children:[o.jsx("p",{children:" This operation will create thousands of database entries. Only run this once."}),o.jsx("p",{children:" Expected: ~1,800 vocabulary items, ~450 phrases, ~450 grammar rules, ~900 exercises"})]})]})]})}var pa="rovingFocusGroup.onEntryFocus",kj={bubbles:!1,cancelable:!0},Tn="RovingFocusGroup",[hi,lf,Pj]=vi(Tn),[Aj,cf]=ws(Tn,[Pj]),[Rj,Oj]=Aj(Tn),df=p.forwardRef((t,e)=>o.jsx(hi.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(hi.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Ij,{...t,ref:e})})}));df.displayName=Tn;var Ij=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:n=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=t,g=p.useRef(null),h=ve(e,g),y=Hi(a),[m,v]=Ir({prop:i,defaultProp:l??null,onChange:c,caller:Tn}),[b,w]=p.useState(!1),x=et(d),j=lf(s),S=p.useRef(!1),[C,E]=p.useState(0);return p.useEffect(()=>{const N=g.current;if(N)return N.addEventListener(pa,x),()=>N.removeEventListener(pa,x)},[x]),o.jsx(Rj,{scope:s,orientation:r,dir:y,loop:n,currentTabStopId:m,onItemFocus:p.useCallback(N=>v(N),[v]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:p.useCallback(()=>E(N=>N-1),[]),children:o.jsx(te.div,{tabIndex:b||C===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...t.style},onMouseDown:V(t.onMouseDown,()=>{S.current=!0}),onFocus:V(t.onFocus,N=>{const L=!S.current;if(N.target===N.currentTarget&&L&&!b){const R=new CustomEvent(pa,kj);if(N.currentTarget.dispatchEvent(R),!R.defaultPrevented){const F=j().filter(I=>I.focusable),O=F.find(I=>I.active),B=F.find(I=>I.id===m),q=[O,B,...F].filter(Boolean).map(I=>I.ref.current);ff(q,u)}}S.current=!1}),onBlur:V(t.onBlur,()=>w(!1))})})}),uf="RovingFocusGroupItem",hf=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:n=!1,tabStopId:a,children:i,...l}=t,c=vs(),d=a||c,u=Oj(uf,s),f=u.currentTabStopId===d,g=lf(s),{onFocusableItemAdd:h,onFocusableItemRemove:y,currentTabStopId:m}=u;return p.useEffect(()=>{if(r)return h(),()=>y()},[r,h,y]),o.jsx(hi.ItemSlot,{scope:s,id:d,focusable:r,active:n,children:o.jsx(te.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...l,ref:e,onMouseDown:V(t.onMouseDown,v=>{r?u.onItemFocus(d):v.preventDefault()}),onFocus:V(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:V(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const b=Mj(v,u.orientation,u.dir);if(b!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let x=g().filter(j=>j.focusable).map(j=>j.ref.current);if(b==="last")x.reverse();else if(b==="prev"||b==="next"){b==="prev"&&x.reverse();const j=x.indexOf(v.currentTarget);x=u.loop?$j(x,j+1):x.slice(j+1)}setTimeout(()=>ff(x))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:m!=null}):i})})});hf.displayName=uf;var Lj={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dj(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Mj(t,e,s){const r=Dj(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Lj[r]}function ff(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function $j(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var Fj=df,Uj=hf,Fo="Tabs",[Bj]=ws(Fo,[cf]),pf=cf(),[Hj,Qi]=Bj(Fo),mf=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,onValueChange:n,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Hi(l),[f,g]=Ir({prop:r,onChange:n,defaultProp:a??"",caller:Fo});return o.jsx(Hj,{scope:s,baseId:vs(),value:f,onValueChange:g,orientation:i,dir:u,activationMode:c,children:o.jsx(te.div,{dir:u,"data-orientation":i,...d,ref:e})})});mf.displayName=Fo;var gf="TabsList",vf=p.forwardRef((t,e)=>{const{__scopeTabs:s,loop:r=!0,...n}=t,a=Qi(gf,s),i=pf(s);return o.jsx(Fj,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(te.div,{role:"tablist","aria-orientation":a.orientation,...n,ref:e})})});vf.displayName=gf;var yf="TabsTrigger",xf=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,disabled:n=!1,...a}=t,i=Qi(yf,s),l=pf(s),c=jf(i.baseId,r),d=_f(i.baseId,r),u=r===i.value;return o.jsx(Uj,{asChild:!0,...l,focusable:!n,active:u,children:o.jsx(te.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...a,ref:e,onMouseDown:V(t.onMouseDown,f=>{!n&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:V(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:V(t.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!n&&f&&i.onValueChange(r)})})})});xf.displayName=yf;var bf="TabsContent",wf=p.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,forceMount:n,children:a,...i}=t,l=Qi(bf,s),c=jf(l.baseId,r),d=_f(l.baseId,r),u=r===l.value,f=p.useRef(u);return p.useEffect(()=>{const g=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(g)},[]),o.jsx(Zs,{present:n||u,children:({present:g})=>o.jsx(te.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:d,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:g&&a})})});wf.displayName=bf;function jf(t,e){return`${t}-trigger-${e}`}function _f(t,e){return`${t}-content-${e}`}var qj=mf,Sf=vf,Cf=xf,Ef=wf;const Vj=qj,Tf=p.forwardRef(({className:t,...e},s)=>o.jsx(Sf,{ref:s,className:J("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Tf.displayName=Sf.displayName;const Ot=p.forwardRef(({className:t,...e},s)=>o.jsx(Cf,{ref:s,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ot.displayName=Cf.displayName;const It=p.forwardRef(({className:t,...e},s)=>o.jsx(Ef,{ref:s,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));It.displayName=Ef.displayName;var Wj="Label",Nf=p.forwardRef((t,e)=>o.jsx(te.label,{...t,ref:e,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));Nf.displayName=Wj;var kf=Nf;const zj=go("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Bt=p.forwardRef(({className:t,...e},s)=>o.jsx(kf,{ref:s,className:J(zj(),t),...e}));Bt.displayName=kf.displayName;const ze=p.forwardRef(({className:t,...e},s)=>o.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...e}));ze.displayName="Textarea";const Cs=p.forwardRef(({className:t,...e},s)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:s,className:J("w-full caption-bottom text-sm",t),...e})}));Cs.displayName="Table";const Es=p.forwardRef(({className:t,...e},s)=>o.jsx("thead",{ref:s,className:J("[&_tr]:border-b",t),...e}));Es.displayName="TableHeader";const Ts=p.forwardRef(({className:t,...e},s)=>o.jsx("tbody",{ref:s,className:J("[&_tr:last-child]:border-0",t),...e}));Ts.displayName="TableBody";const Kj=p.forwardRef(({className:t,...e},s)=>o.jsx("tfoot",{ref:s,className:J("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Kj.displayName="TableFooter";const $e=p.forwardRef(({className:t,...e},s)=>o.jsx("tr",{ref:s,className:J("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));$e.displayName="TableRow";const re=p.forwardRef(({className:t,...e},s)=>o.jsx("th",{ref:s,className:J("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));re.displayName="TableHead";const ne=p.forwardRef(({className:t,...e},s)=>o.jsx("td",{ref:s,className:J("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));ne.displayName="TableCell";const Gj=p.forwardRef(({className:t,...e},s)=>o.jsx("caption",{ref:s,className:J("mt-4 text-sm text-muted-foreground",t),...e}));Gj.displayName="TableCaption";function Qj(){const[t,e]=p.useState(!1),[s,r]=p.useState({name:"",code:"",flag_emoji:"",description:""}),{toast:n}=st(),a=Co(),{data:i,isLoading:l}=fn({queryKey:["languages"],queryFn:Ae.getLanguages}),c=xu({mutationFn:async u=>{const f=await fetch("https://languagelearningdep.onrender.com/api/languages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!f.ok)throw new Error("Failed to add language");return f.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["languages"]}),e(!1),r({name:"",code:"",flag_emoji:"",description:""}),n({title:"Success!",description:"Language added successfully"})},onError:()=>{n({title:"Error",description:"Failed to add language",variant:"destructive"})}}),d=u=>{if(u.preventDefault(),!s.name||!s.code){n({title:"Error",description:"Name and code are required",variant:"destructive"});return}c.mutate(s)};return o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(Ea,{className:"w-5 h-5"}),"Language Management"]})}),o.jsxs(Ui,{open:t,onOpenChange:e,children:[o.jsx(Zu,{asChild:!0,children:o.jsxs(G,{children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Language"]})}),o.jsxs(No,{className:"sm:max-w-[425px]",children:[o.jsxs(ko,{children:[o.jsx(Po,{children:"Add New Language"}),o.jsx(Bi,{children:"Add a new language to the system with all required information."})]}),o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"name",children:"Language Name *"}),o.jsx(de,{id:"name",value:s.name,onChange:u=>r({...s,name:u.target.value}),placeholder:"e.g., Spanish, French, German",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"code",children:"Language Code *"}),o.jsx(de,{id:"code",value:s.code,onChange:u=>r({...s,code:u.target.value.toLowerCase()}),placeholder:"e.g., es, fr, de",maxLength:3,required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"flag",children:"Flag Emoji"}),o.jsx(de,{id:"flag",value:s.flag_emoji,onChange:u=>r({...s,flag_emoji:u.target.value}),placeholder:"e.g., , , "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"description",children:"Description"}),o.jsx(ze,{id:"description",value:s.description,onChange:u=>r({...s,description:u.target.value}),placeholder:"Brief description of the language"})]}),o.jsx(G,{type:"submit",disabled:c.isPending,className:"w-full",children:c.isPending?o.jsx(o.Fragment,{children:"Saving..."}):o.jsxs(o.Fragment,{children:[o.jsx(vd,{className:"w-4 h-4 mr-2"}),"Add Language"]})})]})]})]})]}),o.jsx(je,{children:l?o.jsx("div",{className:"text-center py-4",children:"Loading languages..."}):o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Flag"}),o.jsx(re,{children:"Name"}),o.jsx(re,{children:"Code"}),o.jsx(re,{children:"Description"}),o.jsx(re,{children:"Actions"})]})}),o.jsx(Ts,{children:i==null?void 0:i.map(u=>o.jsxs($e,{children:[o.jsx(ne,{className:"text-2xl",children:u.flag_emoji}),o.jsx(ne,{className:"font-medium",children:u.name}),o.jsx(ne,{className:"font-mono text-sm",children:u.code}),o.jsx(ne,{className:"max-w-xs truncate",children:u.description}),o.jsx(ne,{children:o.jsxs(G,{variant:"outline",size:"sm",children:[o.jsx(Nm,{className:"w-3 h-3 mr-1"}),"Edit"]})})]},u.id))})]})})]})})}const Jj=[{value:"A1",label:"A1 - Beginner"},{value:"A2",label:"A2 - Elementary"},{value:"B1",label:"B1 - Intermediate"},{value:"B2",label:"B2 - Upper Intermediate"},{value:"C1",label:"C1 - Advanced"},{value:"C2",label:"C2 - Proficient"}];function Yj(){const[t,e]=p.useState(!1),[s,r]=p.useState({name:"",description:"",language_id:"",cefr_level:"",level_requirement:1}),{toast:n}=st(),a=Co(),{data:i}=fn({queryKey:["languages"],queryFn:Ae.getLanguages}),{data:l,isLoading:c}=fn({queryKey:["courses"],queryFn:Ae.getCourses}),d=xu({mutationFn:async f=>{console.log("Frontend: Sending course data:",f);const g=await fetch("https://languagelearningdep.onrender.com/api/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(console.log("Frontend: Response status:",g.status),!g.ok){const h=await g.json().catch(()=>({message:"Unknown error"}));throw console.error("Frontend: Error response:",h),new Error(h.message||"Failed to add course")}return g.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]}),e(!1),r({name:"",description:"",language_id:"",cefr_level:"",level_requirement:1}),n({title:"Success!",description:"Course added successfully"})},onError:f=>{console.error("Frontend: Mutation error:",f),n({title:"Error",description:f.message||"Failed to add course",variant:"destructive"})}}),u=f=>{if(f.preventDefault(),console.log("Frontend: Form submitted with data:",s),!s.name||!s.language_id||!s.cefr_level){n({title:"Error",description:"Name, language, and CEFR level are required",variant:"destructive"});return}d.mutate(s)};return o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(qt,{className:"w-5 h-5"}),"Course Management"]})}),o.jsxs(Ui,{open:t,onOpenChange:e,children:[o.jsx(Zu,{asChild:!0,children:o.jsxs(G,{children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Course"]})}),o.jsxs(No,{className:"sm:max-w-[425px]",children:[o.jsxs(ko,{children:[o.jsx(Po,{children:"Add New Course"}),o.jsx(Bi,{children:"Create a new language course with specific CEFR level."})]}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"course-name",children:"Course Name *"}),o.jsx(de,{id:"course-name",value:s.name,onChange:f=>r({...s,name:f.target.value}),placeholder:"e.g., Spanish for Beginners",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"language",children:"Language *"}),o.jsxs(zt,{value:s.language_id,onValueChange:f=>r({...s,language_id:f}),children:[o.jsx(Et,{children:o.jsx(Kt,{placeholder:"Select a language"})}),o.jsx(Tt,{children:i==null?void 0:i.map(f=>o.jsxs(pe,{value:f.id,children:[f.flag_emoji," ",f.name]},f.id))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"cefr-level",children:"CEFR Level *"}),o.jsxs(zt,{value:s.cefr_level,onValueChange:f=>r({...s,cefr_level:f}),children:[o.jsx(Et,{children:o.jsx(Kt,{placeholder:"Select CEFR level"})}),o.jsx(Tt,{children:Jj.map(f=>o.jsx(pe,{value:f.value,children:f.label},f.value))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Bt,{htmlFor:"description",children:"Description"}),o.jsx(ze,{id:"description",value:s.description,onChange:f=>r({...s,description:f.target.value}),placeholder:"Course description and objectives"})]}),o.jsx(G,{type:"submit",disabled:d.isPending,className:"w-full",children:d.isPending?o.jsx(o.Fragment,{children:"Saving..."}):o.jsxs(o.Fragment,{children:[o.jsx(vd,{className:"w-4 h-4 mr-2"}),"Add Course"]})})]})]})]})]}),o.jsx(je,{children:c?o.jsx("div",{className:"text-center py-4",children:"Loading courses..."}):o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Course Name"}),o.jsx(re,{children:"Language"}),o.jsx(re,{children:"CEFR Level"}),o.jsx(re,{children:"Description"})]})}),o.jsx(Ts,{children:l==null?void 0:l.map(f=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium",children:f.name}),o.jsxs(ne,{children:[f.language.flag_emoji," ",f.language.name]}),o.jsx(ne,{children:o.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:"A1-C2"})}),o.jsx(ne,{className:"max-w-xs truncate",children:f.description})]},f.id))})]})})]})})}function Xj(){const[t,e]=p.useState([]),[s,r]=p.useState([]),[n,a]=p.useState(!0),[i,l]=p.useState(!1),[c,d]=p.useState(!1),[u,f]=p.useState({name:"",description:"",course_id:"",order_index:"",xp_reward:"50"}),{toast:g}=st();p.useEffect(()=>{h()},[]);const h=async()=>{try{const m=await fetch("https://languagelearningdep.onrender.com/api/courses");if(!m.ok)throw new Error("Failed to fetch courses");const v=await m.json();r(v);const b=[];for(const w of v)try{const x=await fetch(`https://languagelearningdep.onrender.com/api/courses/${w.id}/units`);x.ok&&(await x.json()).forEach(S=>{b.push({id:S.id,name:S.name,description:S.description,course_id:parseInt(w.id),order_index:S.order_index,xp_reward:S.xp_reward,created_at:S.created_at})})}catch{console.log(`No units found for course ${w.id}`)}e(b)}catch(m){console.error("Error fetching data:",m),g({title:"Error",description:"Failed to fetch units and courses. Make sure the backend server is running.",variant:"destructive"})}finally{a(!1)}},y=async m=>{m.preventDefault(),l(!0);try{if(!(await fetch("https://languagelearningdep.onrender.com/api/units",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,description:u.description,course_id:parseInt(u.course_id),order_index:parseInt(u.order_index)||0,xp_reward:parseInt(u.xp_reward)||50})})).ok)throw new Error("Failed to add unit");g({title:"Success!",description:"Unit added successfully"}),f({name:"",description:"",course_id:"",order_index:"",xp_reward:"50"}),d(!1),h()}catch(v){console.error("Error adding unit:",v),g({title:"Error",description:"Failed to add unit",variant:"destructive"})}finally{l(!1)}};return n?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tt,{className:"w-8 h-8 animate-spin"})}):o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(on,{className:"w-5 h-5"}),"Unit Management (",t.length," units)"]})}),o.jsxs(G,{onClick:()=>d(!c),children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Unit"]})]}),o.jsxs(je,{children:[c&&o.jsxs("form",{onSubmit:y,className:"space-y-4 mb-6 p-4 border rounded-lg bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Unit Name"}),o.jsx(de,{value:u.name,onChange:m=>f({...u,name:m.target.value}),placeholder:"e.g., Basic Greetings",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Course"}),o.jsxs("select",{value:u.course_id,onChange:m=>f({...u,course_id:m.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[o.jsx("option",{value:"",children:"Select a course"}),s.map(m=>o.jsx("option",{value:m.id,children:m.name},m.id))]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),o.jsx(ze,{value:u.description,onChange:m=>f({...u,description:m.target.value}),placeholder:"Unit description..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),o.jsx(de,{type:"number",value:u.order_index,onChange:m=>f({...u,order_index:m.target.value}),placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"XP Reward"}),o.jsx(de,{type:"number",value:u.xp_reward,onChange:m=>f({...u,xp_reward:m.target.value}),placeholder:"50"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{type:"submit",disabled:i,children:[i?o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Unit"]}),o.jsx(G,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}),t.length>0?o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Name"}),o.jsx(re,{children:"Description"}),o.jsx(re,{children:"Course ID"}),o.jsx(re,{children:"Order"}),o.jsx(re,{children:"XP"}),o.jsx(re,{children:"Created"})]})}),o.jsx(Ts,{children:t.map(m=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium",children:m.name}),o.jsx(ne,{children:m.description}),o.jsx(ne,{children:m.course_id}),o.jsx(ne,{children:m.order_index}),o.jsx(ne,{children:m.xp_reward}),o.jsx(ne,{children:new Date(m.created_at).toLocaleDateString()})]},m.id))})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(on,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No units found. Add your first unit above."})]})]})]})})}function Zj(){const[t,e]=p.useState([]),[s,r]=p.useState(!0),[n,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState({word:"",translation:"",pronunciation:"",example_sentence:"",example_translation:"",word_type:"noun",difficulty_level:"beginner",lesson_id:"",order_index:""}),{toast:u}=st();p.useEffect(()=>{f()},[]);const f=async()=>{try{const h=await fetch("https://languagelearningdep.onrender.com/api/vocabulary");if(!h.ok)throw new Error("Failed to fetch vocabulary");const y=await h.json();e(y)}catch(h){console.error("Error fetching vocabulary:",h),u({title:"Error",description:"Failed to fetch vocabulary. Make sure the backend server is running.",variant:"destructive"})}finally{r(!1)}},g=async h=>{h.preventDefault(),a(!0);try{if(!(await fetch("https://languagelearningdep.onrender.com/api/vocabulary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({word:c.word,translation:c.translation,pronunciation:c.pronunciation,example_sentence:c.example_sentence,example_translation:c.example_translation,word_type:c.word_type,difficulty_level:c.difficulty_level,lesson_id:c.lesson_id?parseInt(c.lesson_id):null,order_index:parseInt(c.order_index)||0})})).ok)throw new Error("Failed to add vocabulary item");u({title:"Success!",description:"Vocabulary item added successfully"}),d({word:"",translation:"",pronunciation:"",example_sentence:"",example_translation:"",word_type:"noun",difficulty_level:"beginner",lesson_id:"",order_index:""}),l(!1),f()}catch(y){console.error("Error adding vocabulary:",y),u({title:"Error",description:"Failed to add vocabulary item",variant:"destructive"})}finally{a(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tt,{className:"w-8 h-8 animate-spin"})}):o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(qt,{className:"w-5 h-5"}),"Vocabulary Management (",t.length," items)"]})}),o.jsxs(G,{onClick:()=>l(!i),children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Vocabulary"]})]}),o.jsxs(je,{children:[i&&o.jsxs("form",{onSubmit:g,className:"space-y-4 mb-6 p-4 border rounded-lg bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Word"}),o.jsx(de,{value:c.word,onChange:h=>d({...c,word:h.target.value}),placeholder:"e.g., hola",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Translation"}),o.jsx(de,{value:c.translation,onChange:h=>d({...c,translation:h.target.value}),placeholder:"e.g., hello",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pronunciation"}),o.jsx(de,{value:c.pronunciation,onChange:h=>d({...c,pronunciation:h.target.value}),placeholder:"e.g., /ola/"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Word Type"}),o.jsxs(zt,{value:c.word_type,onValueChange:h=>d({...c,word_type:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"noun",children:"Noun"}),o.jsx(pe,{value:"verb",children:"Verb"}),o.jsx(pe,{value:"adjective",children:"Adjective"}),o.jsx(pe,{value:"adverb",children:"Adverb"}),o.jsx(pe,{value:"preposition",children:"Preposition"}),o.jsx(pe,{value:"conjunction",children:"Conjunction"}),o.jsx(pe,{value:"interjection",children:"Interjection"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Example Sentence"}),o.jsx(ze,{value:c.example_sentence,onChange:h=>d({...c,example_sentence:h.target.value}),placeholder:"Example sentence using this word..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Example Translation"}),o.jsx(ze,{value:c.example_translation,onChange:h=>d({...c,example_translation:h.target.value}),placeholder:"Translation of the example sentence..."})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty Level"}),o.jsxs(zt,{value:c.difficulty_level,onValueChange:h=>d({...c,difficulty_level:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"beginner",children:"Beginner"}),o.jsx(pe,{value:"intermediate",children:"Intermediate"}),o.jsx(pe,{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Lesson ID"}),o.jsx(de,{type:"number",value:c.lesson_id,onChange:h=>d({...c,lesson_id:h.target.value}),placeholder:"Optional"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),o.jsx(de,{type:"number",value:c.order_index,onChange:h=>d({...c,order_index:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{type:"submit",disabled:n,children:[n?o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Vocabulary"]}),o.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]}),t.length>0?o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Word"}),o.jsx(re,{children:"Translation"}),o.jsx(re,{children:"Type"}),o.jsx(re,{children:"Level"}),o.jsx(re,{children:"Lesson"})]})}),o.jsx(Ts,{children:t.map(h=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium",children:h.word}),o.jsx(ne,{children:h.translation}),o.jsx(ne,{children:h.word_type}),o.jsx(ne,{children:h.difficulty_level}),o.jsx(ne,{children:h.lesson_name||"No lesson"})]},h.id))})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(qt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No vocabulary items found. Add your first word above."})]})]})]})})}function e_(){const[t,e]=p.useState([]),[s,r]=p.useState(!0),[n,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState({title:"",explanation:"",examples:"",difficulty_level:"beginner",lesson_id:"",order_index:""}),{toast:u}=st();p.useEffect(()=>{f()},[]);const f=async()=>{try{const h=await fetch("https://languagelearningdep.onrender.com/api/grammar");if(!h.ok)throw new Error("Failed to fetch grammar rules");const y=await h.json();e(y)}catch(h){console.error("Error fetching grammar rules:",h),u({title:"Error",description:"Failed to fetch grammar rules. Make sure the backend server is running.",variant:"destructive"})}finally{r(!1)}},g=async h=>{h.preventDefault(),a(!0);try{if(!(await fetch("https://languagelearningdep.onrender.com//api/grammar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:c.title,explanation:c.explanation,examples:c.examples.split(`
`).filter(m=>m.trim()),difficulty_level:c.difficulty_level,lesson_id:c.lesson_id?parseInt(c.lesson_id):null,order_index:parseInt(c.order_index)||0})})).ok)throw new Error("Failed to add grammar rule");u({title:"Success!",description:"Grammar rule added successfully"}),d({title:"",explanation:"",examples:"",difficulty_level:"beginner",lesson_id:"",order_index:""}),l(!1),f()}catch(y){console.error("Error adding grammar rule:",y),u({title:"Error",description:"Failed to add grammar rule",variant:"destructive"})}finally{a(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tt,{className:"w-8 h-8 animate-spin"})}):o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(Na,{className:"w-5 h-5"}),"Grammar Management (",t.length," rules)"]})}),o.jsxs(G,{onClick:()=>l(!i),children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Grammar Rule"]})]}),o.jsxs(je,{children:[i&&o.jsxs("form",{onSubmit:g,className:"space-y-4 mb-6 p-4 border rounded-lg bg-gray-50",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title"}),o.jsx(de,{value:c.title,onChange:h=>d({...c,title:h.target.value}),placeholder:"e.g., Present Tense - Regular Verbs",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Explanation"}),o.jsx(ze,{value:c.explanation,onChange:h=>d({...c,explanation:h.target.value}),placeholder:"Detailed explanation of the grammar rule...",rows:4,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Examples (one per line)"}),o.jsx(ze,{value:c.examples,onChange:h=>d({...c,examples:h.target.value}),placeholder:`I walk to school every day.
She walks her dog in the morning.
We walk together on weekends.`,rows:3})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty Level"}),o.jsxs(zt,{value:c.difficulty_level,onValueChange:h=>d({...c,difficulty_level:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"beginner",children:"Beginner"}),o.jsx(pe,{value:"intermediate",children:"Intermediate"}),o.jsx(pe,{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Lesson ID"}),o.jsx(de,{type:"number",value:c.lesson_id,onChange:h=>d({...c,lesson_id:h.target.value}),placeholder:"Optional"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),o.jsx(de,{type:"number",value:c.order_index,onChange:h=>d({...c,order_index:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{type:"submit",disabled:n,children:[n?o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Grammar Rule"]}),o.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]}),t.length>0?o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Title"}),o.jsx(re,{children:"Explanation"}),o.jsx(re,{children:"Level"}),o.jsx(re,{children:"Lesson"})]})}),o.jsx(Ts,{children:t.map(h=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium",children:h.title}),o.jsx(ne,{className:"max-w-md truncate",children:h.explanation}),o.jsx(ne,{children:h.difficulty_level}),o.jsx(ne,{children:h.lesson_name||"No lesson"})]},h.id))})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Na,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No grammar rules found. Add your first rule above."})]})]})]})})}function t_(){const[t,e]=p.useState([]),[s,r]=p.useState(!0),[n,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState({phrase:"",translation:"",pronunciation:"",context:"",difficulty_level:"beginner",lesson_id:"",order_index:""}),{toast:u}=st();p.useEffect(()=>{f()},[]);const f=async()=>{try{const h=await fetch("https://languagelearningdep.onrender.com/api/phrases");if(!h.ok)throw new Error("Failed to fetch phrases");const y=await h.json();e(y)}catch(h){console.error("Error fetching phrases:",h),u({title:"Error",description:"Failed to fetch phrases. Make sure the backend server is running.",variant:"destructive"})}finally{r(!1)}},g=async h=>{h.preventDefault(),a(!0);try{if(!(await fetch("https://languagelearningdep.onrender.com/api/phrases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phrase:c.phrase,translation:c.translation,pronunciation:c.pronunciation,context:c.context,difficulty_level:c.difficulty_level,lesson_id:c.lesson_id?parseInt(c.lesson_id):null,order_index:parseInt(c.order_index)||0})})).ok)throw new Error("Failed to add phrase");u({title:"Success!",description:"Phrase added successfully"}),d({phrase:"",translation:"",pronunciation:"",context:"",difficulty_level:"beginner",lesson_id:"",order_index:""}),l(!1),f()}catch(y){console.error("Error adding phrase:",y),u({title:"Error",description:"Failed to add phrase",variant:"destructive"})}finally{a(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tt,{className:"w-8 h-8 animate-spin"})}):o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(Ta,{className:"w-5 h-5"}),"Phrases & Dialogues Management (",t.length," phrases)"]})}),o.jsxs(G,{onClick:()=>l(!i),children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Phrase"]})]}),o.jsxs(je,{children:[i&&o.jsxs("form",{onSubmit:g,className:"space-y-4 mb-6 p-4 border rounded-lg bg-gray-50",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phrase"}),o.jsx(de,{value:c.phrase,onChange:h=>d({...c,phrase:h.target.value}),placeholder:"e.g., Cmo ests?",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Translation"}),o.jsx(de,{value:c.translation,onChange:h=>d({...c,translation:h.target.value}),placeholder:"e.g., How are you?",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pronunciation"}),o.jsx(de,{value:c.pronunciation,onChange:h=>d({...c,pronunciation:h.target.value}),placeholder:"e.g., /komo estas/"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Context"}),o.jsx(ze,{value:c.context,onChange:h=>d({...c,context:h.target.value}),placeholder:"When and how to use this phrase...",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty Level"}),o.jsxs(zt,{value:c.difficulty_level,onValueChange:h=>d({...c,difficulty_level:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"beginner",children:"Beginner"}),o.jsx(pe,{value:"intermediate",children:"Intermediate"}),o.jsx(pe,{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Lesson ID"}),o.jsx(de,{type:"number",value:c.lesson_id,onChange:h=>d({...c,lesson_id:h.target.value}),placeholder:"Optional"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),o.jsx(de,{type:"number",value:c.order_index,onChange:h=>d({...c,order_index:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{type:"submit",disabled:n,children:[n?o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Phrase"]}),o.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]}),t.length>0?o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Phrase"}),o.jsx(re,{children:"Translation"}),o.jsx(re,{children:"Context"}),o.jsx(re,{children:"Level"}),o.jsx(re,{children:"Lesson"})]})}),o.jsx(Ts,{children:t.map(h=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium",children:h.phrase}),o.jsx(ne,{children:h.translation}),o.jsx(ne,{className:"max-w-md truncate",children:h.context}),o.jsx(ne,{children:h.difficulty_level}),o.jsx(ne,{children:h.lesson_name||"No lesson"})]},h.id))})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Ta,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No phrases found. Add your first phrase above."})]})]})]})})}function s_(){const[t,e]=p.useState([]),[s,r]=p.useState(!0),[n,a]=p.useState(!1),[i,l]=p.useState(!1),[c,d]=p.useState({question:"",exercise_type:"multiple_choice",options:"",correct_answer:"",difficulty_level:"beginner",points:"10",hints:"",explanation:"",lesson_id:"",order_index:""}),{toast:u}=st();p.useEffect(()=>{f()},[]);const f=async()=>{try{const h=await fetch("https://languagelearningdep.onrender.com/api/exercises");if(!h.ok)throw new Error("Failed to fetch exercises");const y=await h.json();e(y)}catch(h){console.error("Error fetching exercises:",h),u({title:"Error",description:"Failed to fetch exercises. Make sure the backend server is running.",variant:"destructive"})}finally{r(!1)}},g=async h=>{h.preventDefault(),a(!0);try{if(!(await fetch("https://languagelearningdep.onrender.com/api/exercises",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:c.question,exercise_type:c.exercise_type,options:c.options.split(`
`).filter(m=>m.trim()),correct_answer:c.correct_answer,difficulty_level:c.difficulty_level,points:parseInt(c.points)||10,hints:c.hints.split(`
`).filter(m=>m.trim()),explanation:c.explanation,lesson_id:c.lesson_id?parseInt(c.lesson_id):null,order_index:parseInt(c.order_index)||0})})).ok)throw new Error("Failed to add exercise");u({title:"Success!",description:"Exercise added successfully"}),d({question:"",exercise_type:"multiple_choice",options:"",correct_answer:"",difficulty_level:"beginner",points:"10",hints:"",explanation:"",lesson_id:"",order_index:""}),l(!1),f()}catch(y){console.error("Error adding exercise:",y),u({title:"Error",description:"Failed to add exercise",variant:"destructive"})}finally{a(!1)}};return s?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx(tt,{className:"w-8 h-8 animate-spin"})}):o.jsx("div",{className:"space-y-6",children:o.jsxs(he,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between",children:[o.jsx("div",{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(gl,{className:"w-5 h-5"}),"Exercises Management (",t.length," exercises)"]})}),o.jsxs(G,{onClick:()=>l(!i),children:[o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Exercise"]})]}),o.jsxs(je,{children:[i&&o.jsxs("form",{onSubmit:g,className:"space-y-4 mb-6 p-4 border rounded-lg bg-gray-50",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Question"}),o.jsx(ze,{value:c.question,onChange:h=>d({...c,question:h.target.value}),placeholder:"What is the Spanish word for 'hello'?",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Exercise Type"}),o.jsxs(zt,{value:c.exercise_type,onValueChange:h=>d({...c,exercise_type:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"multiple_choice",children:"Multiple Choice"}),o.jsx(pe,{value:"fill_blank",children:"Fill in the Blank"}),o.jsx(pe,{value:"translation",children:"Translation"}),o.jsx(pe,{value:"listening",children:"Listening"}),o.jsx(pe,{value:"speaking",children:"Speaking"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Correct Answer"}),o.jsx(de,{value:c.correct_answer,onChange:h=>d({...c,correct_answer:h.target.value}),placeholder:"hola",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Options (one per line, for multiple choice)"}),o.jsx(ze,{value:c.options,onChange:h=>d({...c,options:h.target.value}),placeholder:`hola
adis
por favor
gracias`,rows:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Hints (one per line)"}),o.jsx(ze,{value:c.hints,onChange:h=>d({...c,hints:h.target.value}),placeholder:`This is a common greeting
Used when meeting someone`,rows:2})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Explanation"}),o.jsx(ze,{value:c.explanation,onChange:h=>d({...c,explanation:h.target.value}),placeholder:"Explanation of the correct answer..."})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty Level"}),o.jsxs(zt,{value:c.difficulty_level,onValueChange:h=>d({...c,difficulty_level:h}),children:[o.jsx(Et,{children:o.jsx(Kt,{})}),o.jsxs(Tt,{children:[o.jsx(pe,{value:"beginner",children:"Beginner"}),o.jsx(pe,{value:"intermediate",children:"Intermediate"}),o.jsx(pe,{value:"advanced",children:"Advanced"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Points"}),o.jsx(de,{type:"number",value:c.points,onChange:h=>d({...c,points:h.target.value}),placeholder:"10"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Lesson ID"}),o.jsx(de,{type:"number",value:c.lesson_id,onChange:h=>d({...c,lesson_id:h.target.value}),placeholder:"Optional"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Order Index"}),o.jsx(de,{type:"number",value:c.order_index,onChange:h=>d({...c,order_index:h.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(G,{type:"submit",disabled:n,children:[n?o.jsx(tt,{className:"w-4 h-4 mr-2 animate-spin"}):o.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Add Exercise"]}),o.jsx(G,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"})]})]}),t.length>0?o.jsxs(Cs,{children:[o.jsx(Es,{children:o.jsxs($e,{children:[o.jsx(re,{children:"Question"}),o.jsx(re,{children:"Type"}),o.jsx(re,{children:"Answer"}),o.jsx(re,{children:"Level"}),o.jsx(re,{children:"Points"}),o.jsx(re,{children:"Lesson"})]})}),o.jsx(Ts,{children:t.map(h=>o.jsxs($e,{children:[o.jsx(ne,{className:"font-medium max-w-md truncate",children:h.question}),o.jsx(ne,{children:h.exercise_type}),o.jsx(ne,{children:h.correct_answer}),o.jsx(ne,{children:h.difficulty_level}),o.jsx(ne,{children:h.points}),o.jsx(ne,{children:h.lesson_name||"No lesson"})]},h.id))})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(gl,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No exercises found. Add your first exercise above."})]})]})]})})}function r_(){const{data:t,isLoading:e}=fn({queryKey:["admin-languages"],queryFn:Ae.getLanguages}),{data:s,isLoading:r}=fn({queryKey:["admin-courses"],queryFn:Ae.getCourses});return e||r?o.jsx(he,{children:o.jsxs(je,{className:"flex items-center justify-center p-6",children:[o.jsx(tt,{className:"w-6 h-6 animate-spin"}),o.jsx("span",{className:"ml-2",children:"Loading statistics..."})]})}):o.jsxs(he,{children:[o.jsxs(Ne,{children:[o.jsx(Re,{children:"Database Statistics"}),o.jsx(wu,{children:"Current content overview"})]}),o.jsx(je,{children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(t==null?void 0:t.length)||0}),o.jsx("div",{className:"text-sm text-gray-600",children:"Languages"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:(s==null?void 0:s.length)||0}),o.jsx("div",{className:"text-sm text-gray-600",children:"Courses"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"0"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Units"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"0"}),o.jsx("div",{className:"text-sm text-gray-600",children:"Vocabulary"})]})]})})]})}function n_(){const[t,e]=p.useState("overview");return o.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:o.jsxs("div",{className:"max-w-7xl mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[o.jsx(Zn,{className:"w-8 h-8 text-blue-600"}),"Language Learning Admin Dashboard"]}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Manage languages, courses, units, vocabulary, grammar, phrases, and exercises"})]}),o.jsxs(Vj,{value:t,onValueChange:e,className:"space-y-6",children:[o.jsxs(Tf,{className:"grid w-full grid-cols-8 lg:w-auto lg:grid-cols-8",children:[o.jsxs(Ot,{value:"overview",className:"flex items-center gap-2",children:[o.jsx(Zn,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),o.jsxs(Ot,{value:"languages",className:"flex items-center gap-2",children:[o.jsx(Ea,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Languages"})]}),o.jsxs(Ot,{value:"courses",className:"flex items-center gap-2",children:[o.jsx(qt,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Courses"})]}),o.jsxs(Ot,{value:"units",className:"flex items-center gap-2",children:[o.jsx(on,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Units"})]}),o.jsxs(Ot,{value:"vocabulary",className:"flex items-center gap-2",children:[o.jsx(Ve,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Vocabulary"})]}),o.jsxs(Ot,{value:"grammar",className:"flex items-center gap-2",children:[o.jsx(Na,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Grammar"})]}),o.jsxs(Ot,{value:"phrases",className:"flex items-center gap-2",children:[o.jsx(Ta,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Phrases"})]}),o.jsxs(Ot,{value:"exercises",className:"flex items-center gap-2",children:[o.jsx(on,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Exercises"})]})]}),o.jsxs(It,{value:"overview",className:"space-y-6",children:[o.jsx(r_,{}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsxs(he,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("languages"),children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Re,{className:"text-sm font-medium",children:"Languages"}),o.jsx(Ea,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(je,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"30"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported languages"})]})]}),o.jsxs(he,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("courses"),children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Re,{className:"text-sm font-medium",children:"Courses"}),o.jsx(qt,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(je,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"90+"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Language courses"})]})]}),o.jsxs(he,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("units"),children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Re,{className:"text-sm font-medium",children:"Units"}),o.jsx(on,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(je,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"450+"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Learning units"})]})]}),o.jsxs(he,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e("vocabulary"),children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(Re,{className:"text-sm font-medium",children:"Vocabulary"}),o.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsxs(je,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"1.8k+"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Vocabulary items"})]})]})]})]}),o.jsx(It,{value:"languages",children:o.jsx(Qj,{})}),o.jsx(It,{value:"courses",children:o.jsx(Yj,{})}),o.jsx(It,{value:"units",children:o.jsx(Xj,{})}),o.jsx(It,{value:"vocabulary",children:o.jsx(Zj,{})}),o.jsx(It,{value:"grammar",children:o.jsx(e_,{})}),o.jsx(It,{value:"phrases",children:o.jsx(t_,{})}),o.jsx(It,{value:"exercises",children:o.jsx(s_,{})})]})]})})}function o_({course:t,language:e,onBack:s}){var r,n;return o.jsxs("div",{className:"mb-8",children:[o.jsxs(G,{variant:"ghost",onClick:s,className:"mb-4",children:[o.jsx(jm,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("span",{className:"text-4xl",children:((r=t.language)==null?void 0:r.flag_emoji)||""}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name||`Learn ${e.charAt(0).toUpperCase()+e.slice(1)}`}),((n=t.language)==null?void 0:n.name)&&o.jsx("p",{className:"text-gray-600",children:t.language.name})]})]})]})}function a_(){const{user:t}=_n(),{courseId:e}=mi(),[s,r]=p.useState({total:0,completed:0,xp:0}),[n,a]=p.useState(!1);return p.useEffect(()=>{(async()=>{if(t&&e){a(!0);try{console.log("[ProgressOverview] Fetching progress for:",{userId:t.id,courseId:e});const l=await Ae.getCourseProgress(t.id,e);console.log("[ProgressOverview] Data received:",l),r(l)}catch{r({total:0,completed:0,xp:0})}finally{a(!1)}}})()},[t==null?void 0:t.id,e]),o.jsxs(he,{className:"mb-8",children:[o.jsx(Ne,{children:o.jsxs(Re,{className:"flex items-center gap-2",children:[o.jsx(yd,{className:"w-5 h-5 text-yellow-500"}),"Your Progress"]})}),o.jsx(je,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:n?"...":s.completed}),o.jsx("p",{className:"text-sm text-gray-600",children:"Lessons Completed"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n?"...":s.xp}),o.jsx("p",{className:"text-sm text-gray-600",children:"XP Earned"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:n||s.total===0?"...":`${Math.round(s.completed/s.total*100)}%`}),o.jsx("p",{className:"text-sm text-gray-600",children:"Course Progress"})]})]})})]})}const i_=go("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l_({className:t,variant:e,...s}){return o.jsx("div",{className:J(i_({variant:e}),t),...s})}function c_({lesson:t,onStart:e,completed:s}){return o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${t.lesson_type==="vocabulary"?"bg-green-500":t.lesson_type==="phrases"?"bg-blue-500":t.lesson_type==="grammar"?"bg-purple-500":"bg-orange-500"}`}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:t.name}),o.jsx("p",{className:"text-sm text-gray-600",children:t.description}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Type: ",t.lesson_type]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[o.jsx(km,{className:"w-4 h-4 text-yellow-500"}),t.xp_reward," XP"]}),s?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded font-semibold",children:[o.jsx(md,{className:"w-4 h-4"})," Completed"]}),o.jsx(G,{size:"sm",variant:"secondary",onClick:()=>e(t.id),className:"ml-1",children:"Review"})]}):o.jsx(G,{size:"sm",onClick:()=>e(t.id),className:"bg-green-500 hover:bg-green-600 text-white",children:"Start"})]})]})}function d_({unit:t,onStartLesson:e,completedLessons:s}){const r=a=>a<=5?"bg-green-100 text-green-800":a<=10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",n=a=>a<=5?"Beginner":a<=10?"Intermediate":"Advanced";return o.jsxs(he,{className:"overflow-hidden",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:o.jsx(qt,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx(Re,{className:"text-xl",children:t.name}),o.jsx("p",{className:"text-gray-600",children:t.description})]})]}),o.jsx(l_,{className:r(t.order_index),children:n(t.order_index)})]})}),o.jsx(je,{children:o.jsx("div",{className:"grid gap-3",children:t.lessons&&t.lessons.length>0?t.lessons.sort((a,i)=>a.order_index-i.order_index).map(a=>o.jsx(c_,{lesson:a,onStart:e,completed:!!(s&&s[a.id])},a.id)):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(qt,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),o.jsx("p",{children:"No lessons available for this unit yet"}),o.jsxs("p",{className:"text-xs mt-1",children:["Unit ID: ",t.id]})]})})})]})}function u_({language:t,onReturnHome:e}){return o.jsxs("div",{className:"text-center py-12",children:[o.jsx(qt,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No content available"}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["The ",t," course doesn't have any units yet. Please check back later or contact support."]}),o.jsx(G,{onClick:e,className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Return to Dashboard"})]})}function h_({language:t}){var j,S,C,E,N;const e=ho(),{user:s}=_n(),[r,n]=p.useState(null),[a,i]=p.useState([]),[l,c]=p.useState(!0),[d,u]=p.useState(null),[f,g]=p.useState(null),[h,y]=p.useState({}),[m,v]=p.useState(!0),b=t?t.toLowerCase().replace(/^learn-?/i,""):"",w=async()=>{try{return await Ae.getLanguages(),!0}catch(L){return console.error("API health check failed:",L),!1}};if(p.useEffect(()=>{let L=!0;return(async()=>{if(!t){L&&(u("No language specified"),c(!1));return}if(!await w()){L&&(v(!1),u("The learning service is currently unavailable. Please try again later."),c(!1));return}try{const B=(await Ae.getCourses()).find(I=>(I.language&&typeof I.language=="object"&&"name"in I.language?I.language.name:String(I.language||"")).toLowerCase()===b.toLowerCase()||I.id.toLowerCase()===b.toLowerCase());if(!B)throw new Error(`No course found for language: ${t}`);const A=await Ae.getCourseUnits(B.id);let q=null;if(s)try{q=await Ae.getCourseProgress(s.id,B.id)}catch(I){console.error("Error fetching user progress:",I)}L&&(n(B),i(A),g(q),y({}),c(!1))}catch(O){console.error("Error initializing course:",O),L&&(u(O instanceof Error?O.message:"Failed to load course"),c(!1))}})(),()=>{L=!1}},[t,s,b]),l)return o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),o.jsxs("p",{children:["Loading course content for ",t,"..."]})]})});if(d)return o.jsx("div",{className:"container mx-auto p-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-md p-6 mt-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Course"}),o.jsx("p",{className:"mb-6",children:d}),o.jsxs("div",{className:"flex space-x-4",children:[o.jsx(G,{onClick:()=>window.location.reload(),variant:"default",children:"Try Again"}),o.jsx(G,{onClick:()=>e("/"),variant:"outline",children:"Return Home"})]}),!m&&o.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400",children:o.jsxs("p",{className:"text-yellow-700",children:[o.jsx("strong",{children:"Note:"})," The learning service appears to be offline. Please make sure your backend server is running."]})})]})});const x=gs("course",{title:r==null?void 0:r.name,description:r==null?void 0:r.description,language:((j=r==null?void 0:r.language)==null?void 0:j.name)||"",image:r==null?void 0:r.thumbnail_url,additionalKeywords:[((S=r==null?void 0:r.language)==null?void 0:S.name)||""]});return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(_t,{...x,type:"article",publishedTime:r==null?void 0:r.created_at,modifiedTime:r==null?void 0:r.updated_at,section:((C=r==null?void 0:r.language)==null?void 0:C.name)||"",tags:[((E=r==null?void 0:r.language)==null?void 0:E.name)||"","language learning"]}),o.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(o_,{course:r,language:t||"",onBack:()=>e("/")}),o.jsx(a_,{progress:f}),o.jsx("div",{className:"space-y-8",children:a.length>0?a.sort((L,R)=>L.order_index-R.order_index).map(L=>o.jsx(d_,{unit:L,onStartLesson:R=>e(`/${t}-lesson/${R}`),completedLessons:h},L.id)):o.jsx(u_,{language:((N=r==null?void 0:r.language)==null?void 0:N.name)||t||"this language",onReturnHome:()=>e("/")})})]})]})}const Pf=async(t,e={})=>{try{const s=await fetch(t,{...e,method:"GET",headers:{"Content-Type":"application/json",...e.headers}});if(!s.ok){const r=await s.json().catch(()=>({}));throw new Error(r.message||"Failed to fetch data")}return s.json()}catch(s){throw console.error("API Error:",s),s}};function Dt({className:t,...e}){return o.jsx("div",{className:J("animate-pulse rounded-md bg-muted",t),...e})}const ma=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null){const e=Object.values(t);return e.length>0&&typeof e[0]=="string"?e[0]:JSON.stringify(t)}return String(t)},Af=t=>{const e=[...t];for(let s=e.length-1;s>0;s--){const r=Math.floor(Math.random()*(s+1));[e[s],e[r]]=[e[r],e[s]]}return e},f_=(t,e,s=3)=>{const r={spanish:["Hola","Adis","Por favor","De nada","Lo siento","Buenos das","Buenas tardes","Buenas noches","Gracias","Perdn","Cmo ests?","Mucho gusto","Hasta luego","Qu tal?","Bien","Mal","Regular"],japanese:["","","","","","","","","","","","","","","","",""],german:["Hallo","Auf Wiedersehen","Bitte","Danke","Entschuldigung","Guten Morgen","Guten Tag","Guten Abend","Gute Nacht","Ja","Nein","Vielleicht","Wie geht es dir?","Es freut mich","Tschss","Bis bald","Alles klar"],french:["Bonjour","Au revoir","S'il vous plat","Merci","Excusez-moi","Bonne nuit","Bonsoir","De rien","Pardon","Comment a va?","Enchant"," bientt","a va?","Bien","Mal","Comme ci comme a","Comment vous appelez-vous?"],english:["Hello","Goodbye","Please","Thank you","Sorry","Good morning","Good afternoon","Good evening","Good night","Yes","No","Maybe","How are you?","Nice to meet you","See you later","Okay","Of course"]},n=t.toLowerCase(),i=(r[n]||r.english).filter(l=>l&&l!==e&&l.length>0);return Af(i).slice(0,s)};function p_(){var A,q,I,H;const{lessonId:t}=mi(),{user:e,userXP:s,updateUserProgress:r}=_n(),n=ho(),a=uo(),[i,l]=p.useState(null),[c,d]=p.useState(!0),[u,f]=p.useState(null),[g,h]=p.useState(!1),[y,m]=p.useState(!1),[v,b]=p.useState([]),[w,x]=p.useState({}),[j,S]=p.useState({}),[C,E]=p.useState(0),N="https://languagelearningcustbac.onrender.com",L=(T,k)=>{x($=>({...$,[T]:k}))},R=T=>{S(k=>({...k,[T]:!k[T]}))},F=(T,k)=>{if(!k)return!1;const $=T.options.find(ae=>ae.id===k.selectedOptionId);return $?$.isCorrect:!1};p.useEffect(()=>{(async()=>{if(t)try{d(!0);const k=await Ae.getLesson(t);if(!k){f("Lesson not found");return}if(console.log("API Response:",k),e!=null&&e.id)try{const $=await Pf(`${N}/api/lessons/progress/lesson/${e.id}/${t}`);console.log("Completion status:",$),$.completed&&(h(!0),E(k.xp_reward||20),console.log("Lesson already completed, setting state"))}catch($){console.error("Error checking lesson completion:",$)}if(k.lesson_type==="exercises")try{console.log("[LessonView] Fetching exercises from API...");const $=await fetch(`${N}/api/exercises?lesson_id=${t}`);if($.ok){let ae=await $.json();console.log("[LessonView][DEBUG] Raw exercises response:",ae);const K=(ae||[]).filter(z=>String(z.lesson_id)===String(t)||Number(z.lesson_id)===Number(t));if(console.log("[LessonView][DEBUG] Filtered exercises:",K),K.length>0){let z="english";const W=a.pathname.toLowerCase();W.includes("japanese")||W.includes("japan")||W.includes("jp")||W.includes("")?z="japanese":W.includes("german")||W.includes("deutsch")||W.includes("de")?z="german":W.includes("french")||W.includes("franais")||W.includes("fr")?z="french":(W.includes("spanish")||W.includes("espaol")||W.includes("es"))&&(z="spanish");const be=K.map((Se,M)=>{const ce=ma(Se.question),me=ma(Se.correct_answer),ie=f_(z,me,3);console.log(`[LessonView] Exercise ${M} - Language: ${z}, Correct: "${me}", Wrong options:`,ie);const Z={id:Se.id||`ex-${M}`,type:"multiple_choice",question:ce,points:10,explanation:Se.explanation?ma(Se.explanation):void 0,options:[]};return Z.options.push({id:`correct-${M}`,text:me,isCorrect:!0}),ie.forEach((le,ke)=>{Z.options.push({id:`wrong-${M}-${ke}`,text:le,isCorrect:!1})}),Z.options=Af(Z.options),Z});b(be),console.log("[LessonView] Converted interactive exercises:",be)}else console.log("[LessonView] No exercises found for this lesson"),b([])}else console.log("[LessonView] Exercises API response not OK:",$.status),b([])}catch($){console.error("Error loading exercises:",$),b([])}l(k)}catch(k){console.error("Error fetching lesson:",k),f("Failed to load lesson")}finally{d(!1)}})()},[t,a.pathname,e==null?void 0:e.id]);const O=async()=>{var T;if(!(!e||!t))try{if(m(!0),(await Ae.markLessonCompleted(t,e.id)).success){h(!0);const $=(i==null?void 0:i.xp_reward)||20;E($),console.log(`Lesson marked as completed - earned ${$} XP`),toast.success(`Lesson completed! +${$} XP earned!`);const ae=s+$,K=Math.floor(ae/100)+1;r(ae,K),console.log(`Updated global XP: ${s} + ${$} = ${ae}, Level: ${K}`),(T=i==null?void 0:i.course)!=null&&T.id&&setTimeout(()=>{n(`/course/${i.course.id}`)},1500)}}catch(k){console.error("Error completing lesson:",k)}finally{m(!1)}};if(c)return o.jsxs("div",{className:"container mx-auto p-4",children:[o.jsx(_t,{...gs("loading",{title:"Loading..."})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Dt,{className:"h-10 w-1/2 mb-4"}),o.jsx(Dt,{className:"h-6 w-3/4 mb-8"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Dt,{className:"h-4 w-full"}),o.jsx(Dt,{className:"h-4 w-5/6"}),o.jsx(Dt,{className:"h-4 w-4/6"})]}),o.jsx("div",{className:"mt-8",children:o.jsx(Dt,{className:"h-12 w-48"})})]})]});if(u)return o.jsxs("div",{className:"container mx-auto p-4",children:[o.jsx(_t,{...gs("error",{title:"Error"})}),o.jsxs("div",{className:"text-center py-10",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Error Loading Lesson"}),o.jsx("p",{className:"text-red-500 mb-4",children:u}),o.jsx(G,{onClick:()=>window.location.reload(),children:"Retry"})]})]});if(!i)return o.jsxs("div",{className:"container mx-auto p-4",children:[o.jsx(_t,{...gs("not_found",{title:"Lesson Not Found"})}),o.jsxs("div",{className:"text-center py-10",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Lesson Not Found"}),o.jsx("p",{className:"mb-4",children:"The requested lesson could not be found."}),o.jsx(G,{onClick:()=>n("/"),children:"Back to Home"})]})]});const B=gs("lesson",{title:i.name,description:i.description,type:"article",publishedTime:i.created_at,modifiedTime:i.updated_at,section:(q=(A=i.course)==null?void 0:A.language)==null?void 0:q.name,tags:[i.lesson_type]});return o.jsxs("div",{className:"container mx-auto p-4",children:[o.jsx(_t,{...B}),o.jsxs("div",{className:"mb-8",children:[i.course&&o.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:o.jsxs("button",{onClick:()=>{var T;return((T=i.course)==null?void 0:T.id)&&n(`/course/${i.course.id}`)},className:"hover:text-blue-600 hover:underline flex items-center gap-1",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Back to ",i.course.name]})]})}),o.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",children:i.name}),((H=(I=i.course)==null?void 0:I.language)==null?void 0:H.flag_emoji)&&o.jsx("span",{className:"text-2xl",children:i.course.language.flag_emoji})]}),g?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:"Completed"}),C>0&&o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:["+",C," XP"]})]}):null]}),o.jsxs("div",{className:"prose max-w-none",children:[o.jsx("p",{className:"text-lg text-gray-600 mb-6",children:i.description}),c?o.jsx("div",{children:"Loading..."}):u?o.jsx("div",{className:"text-red-500",children:u}):i.lesson_type==="exercises"?o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Practice Exercises"}),i.content&&!Array.isArray(i.content)&&o.jsx("div",{className:"prose max-w-none mb-6 p-4 bg-blue-50 rounded-lg",children:o.jsx("p",{className:"text-blue-800",children:i.content.instructions||"Complete the following exercises to practice what you've learned."})})]}),o.jsx("div",{className:"space-y-8",children:v.length>0?v.map((T,k)=>o.jsxs(he,{className:"p-6 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("h4",{className:"text-lg font-medium",children:["Exercise ",k+1]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[T.points," points"]})]}),o.jsx("p",{className:"mb-4",children:T.question}),o.jsx("div",{className:"space-y-2",children:T.options.map($=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[o.jsx("input",{type:"radio",id:`option-${$.id}`,name:`question-${T.id}`,className:"h-4 w-4 text-blue-600",onChange:()=>L(T.id,{selectedOptionId:$.id})}),o.jsx("label",{htmlFor:`option-${$.id}`,className:"flex-1",children:$.text})]},$.id))}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[o.jsx(G,{variant:"outline",size:"sm",onClick:()=>R(T.id),children:j[T.id]?"Hide Feedback":"Show Feedback"}),j[T.id]&&o.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:o.jsxs("p",{className:"font-medium",children:[F(T,w[T.id])?" Correct! ":" Incorrect. ",T.explanation]})})]})]},T.id)):o.jsx(he,{className:"p-6 text-center",children:o.jsxs("div",{className:"text-yellow-600",children:[o.jsx("p",{children:"No exercises available for this lesson yet."}),o.jsx("p",{className:"text-sm mt-2",children:"Check back later for practice exercises."})]})})})]}):Array.isArray(i.content)&&i.content.length>0?i.lesson_type==="vocabulary"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"Vocabulary"}),o.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.content.map(T=>o.jsxs(he,{className:"p-4 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-lg",children:T.word}),o.jsx("p",{className:"text-gray-600",children:T.translation}),T.pronunciation&&o.jsxs("p",{className:"text-sm text-gray-500",children:["/ ",T.pronunciation," /"]}),T.word_type&&o.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800 mt-1",children:T.word_type})]}),T.audio_url&&o.jsx("button",{onClick:()=>new Audio(T.audio_url).play(),className:"p-2 rounded-full hover:bg-gray-100","aria-label":"Play pronunciation",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 000-7.072m-2.828 9.9a9 9 0 010-12.728"})})})]}),T.example_sentence&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[o.jsxs("p",{className:"text-sm italic",children:['"',T.example_sentence,'"']}),T.example_translation&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:['"',T.example_translation,'"']})]})]},T.id))})]}):i.lesson_type==="phrases"?o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"Common Phrases"}),o.jsx("div",{className:"space-y-4",children:i.content.map(T=>o.jsxs(he,{className:"p-4 hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-lg",children:T.phrase}),o.jsx("p",{className:"text-gray-600",children:T.translation}),T.pronunciation&&o.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["/ ",T.pronunciation," /"]})]}),T.audio_url&&o.jsx("button",{onClick:()=>new Audio(T.audio_url).play(),className:"p-2 rounded-full hover:bg-gray-100","aria-label":"Play pronunciation",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 000-7.072m-2.828 9.9a9 9 0 010-12.728"})})})]}),T.context&&o.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Context: ",T.context]})})]},T.id))})]}):i.lesson_type==="grammar"?o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-xl font-semibold",children:"Grammar Rules"}),o.jsx("div",{className:"space-y-6",children:i.content.map(T=>o.jsxs(he,{className:"p-5 hover:shadow-md transition-shadow",children:[o.jsx("h4",{className:"text-lg font-medium mb-3",children:T.title}),o.jsxs("div",{className:"prose max-w-none",children:[o.jsx("div",{dangerouslySetInnerHTML:{__html:T.explanation}}),T.examples&&T.examples.length>0&&o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsx("h5",{className:"font-medium",children:"Examples:"}),o.jsx("ul",{className:"space-y-2",children:T.examples.map((k,$)=>o.jsxs("li",{className:"pl-4 border-l-4 border-blue-100",children:[o.jsx("p",{className:"font-medium",children:k.sentence}),o.jsx("p",{className:"text-gray-600 text-sm",children:k.translation})]},$))})]})]})]},T.id))})]}):o.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:o.jsx("p",{children:"This lesson type is not yet supported."})}):o.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsx("div",{className:"ml-3",children:o.jsx("p",{className:"text-sm text-yellow-700",children:"No content available for this lesson yet."})})]})})]}),!g&&e&&o.jsx("div",{className:"mt-8",children:o.jsx(G,{size:"lg",onClick:O,disabled:y,children:y?"Marking as Complete...":"Mark as Complete"})}),!e&&o.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[o.jsx("p",{className:"mb-4",children:"Sign in to track your progress and earn XP!"}),o.jsx(G,{variant:"outline",onClick:()=>n("/login",{state:{from:a.pathname}}),children:"Sign In"})]})]})]})}function m_(){const[t,e]=p.useState(""),[s,r]=p.useState(""),[n,a]=p.useState(!1),[i,l]=p.useState(""),{toast:c}=st(),d=ho(),[u]=Vf();p.useEffect(()=>{const g=u.get("token");g?l(g):(c({title:"Invalid Reset Link",description:"No reset token found in the URL.",variant:"destructive"}),d("/"))},[u,d,c]);const f=async g=>{if(g.preventDefault(),t!==s){c({title:"Passwords don't match",description:"Please make sure both passwords are identical.",variant:"destructive"});return}if(t.length<6){c({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}a(!0);try{console.log("Making reset password request to:","https://languagelearningdep.onrender.com/api/auth/reset-password"),console.log("With token:",i.substring(0,10)+"...");const h=await fetch("https://languagelearningdep.onrender.com/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:i,newPassword:t})});console.log("Reset password response status:",h.status);const y=await h.json();console.log("Reset password response data:",y),h.ok?(c({title:"Password Reset Successful",description:y.message}),d("/")):c({title:"Reset Failed",description:y.message||"Failed to reset password",variant:"destructive"})}catch(h){console.error("Reset password error:",h),c({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{a(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-lg",children:[o.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Reset Your Password"}),o.jsxs("form",{onSubmit:f,className:"space-y-4",children:[o.jsx("div",{children:o.jsx(de,{type:"password",placeholder:"New Password",value:t,onChange:g=>e(g.target.value),required:!0,minLength:6})}),o.jsx("div",{children:o.jsx(de,{type:"password",placeholder:"Confirm New Password",value:s,onChange:g=>r(g.target.value),required:!0,minLength:6})}),o.jsx(G,{type:"submit",variant:"duolingo",className:"w-full",disabled:n,children:n?"Resetting...":"Reset Password"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>d("/"),className:"text-blue-600 hover:underline font-medium",children:"Back to Home"})})]})})}const g_=()=>{const t=uo();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function v_(){const[t,e]=p.useState(""),[s,r]=p.useState(""),[n,a]=p.useState(null),[i,l]=p.useState(!1),c=async()=>{l(!0),a(null);try{const d=await fetch("https://languagelearningdep.onrender.com/lessons/progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,lessonId:s})}),u=await d.text();a(`Status: ${d.status}
Response: ${u}`)}catch(d){a(`Error: ${d.message}`)}l(!1)};return o.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:o.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-md",children:[o.jsx("h1",{className:"text-xl font-bold mb-6 text-center",children:"Lesson Progress API Debugger"}),o.jsx("div",{className:"mb-4",children:o.jsxs("label",{className:"block text-gray-700 font-medium mb-1",children:["User ID",o.jsx("input",{type:"text",value:t,onChange:d=>e(d.target.value),className:"mt-1 block w-full px-3 py-2 border rounded bg-gray-100 focus:bg-white outline-none",placeholder:"Paste real user ID here",disabled:i})]})}),o.jsx("div",{className:"mb-4",children:o.jsxs("label",{className:"block text-gray-700 font-medium mb-1",children:["Lesson ID",o.jsx("input",{type:"text",value:s,onChange:d=>r(d.target.value),className:"mt-1 block w-full px-3 py-2 border rounded bg-gray-100 focus:bg-white outline-none",placeholder:"Paste real lesson ID here",disabled:i})]})}),o.jsx("button",{className:"w-full bg-green-600 text-white font-semibold py-2 px-4 rounded transition hover:bg-green-700 disabled:opacity-50",onClick:c,disabled:i||!t||!s,children:i?"Testing...":"Test Progress API"}),n&&o.jsx("pre",{className:"bg-gray-100 rounded p-4 mt-6 text-xs whitespace-pre-wrap border border-gray-200",children:n})]})})}function Nn({pageType:t,title:e,description:s,children:r,data:n,loading:a=!1}){const l=uo().pathname.split("/").filter(Boolean);l[l.length-1];const c=gs(t,{title:e,description:s,...n||{}});return a?o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx(_t,{...c}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Dt,{className:"h-12 w-1/3"}),o.jsx(Dt,{className:"h-6 w-2/3"}),o.jsx("div",{className:"grid gap-4 mt-8",children:[...Array(5)].map((d,u)=>o.jsx(Dt,{className:"h-24 w-full"},u))})]})]}):o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx(_t,{...c}),o.jsxs(he,{className:"mb-8",children:[o.jsxs(Ne,{children:[o.jsx(Re,{className:"text-3xl font-bold",children:e||c.title}),o.jsx("p",{className:"text-muted-foreground",children:s||c.description})]}),o.jsx(je,{children:r||o.jsx("div",{className:"prose max-w-none",children:o.jsxs("p",{children:["Content for ",t," page will be displayed here."]})})})]})]})}function y_(){const[t,e]=p.useState(!0),[s,r]=p.useState([]);return p.useEffect(()=>{(async()=>{try{e(!1)}catch(a){console.error("Error loading exercises:",a),e(!1)}})()},[]),o.jsx(Nn,{pageType:"exercises",title:"Language Exercises",description:"Practice and improve your language skills with our interactive exercises.",loading:t,children:o.jsx("div",{className:"grid gap-4",children:s.length>0?s.map(n=>o.jsxs(he,{children:[o.jsx(Ne,{children:o.jsx("h3",{className:"text-xl font-semibold",children:n.title})}),o.jsx(je,{children:o.jsx("p",{children:n.description})})]},n.id)):o.jsx("p",{children:"No exercises available at the moment."})})})}function x_(){return o.jsx(Nn,{pageType:"grammar",title:"Grammar Guides",description:"Comprehensive grammar guides and explanations for language learners."})}function b_(){const[t,e]=p.useState([]),[s,r]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const a=await Ae.getLanguages();e(a)}catch(a){console.error("Error loading languages:",a)}finally{r(!1)}})()},[]),o.jsx(Nn,{pageType:"languages",title:"Available Languages",description:"Choose from our selection of languages and start your learning journey today.",loading:s,children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(n=>o.jsxs(he,{className:"hover:shadow-md transition-shadow",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:n.flag_emoji}),o.jsx("h3",{className:"text-xl font-semibold",children:n.name})]})}),o.jsx(je,{children:o.jsx("p",{className:"text-muted-foreground",children:n.code.toUpperCase()})})]},n.id))})})}function w_(){return o.jsx(Nn,{pageType:"phrases",title:"Common Phrases",description:"Learn common phrases and expressions in different languages."})}function j_(){return o.jsx(Nn,{pageType:"units",title:"Course Units",description:"Explore the units in our language courses."})}const __=new tx,S_=()=>{const{language:t}=mi(),e=t?t.replace(/[^\w-]/g,""):"";return e?(console.log("CourseLearningWrapper - language:",e),o.jsx(h_,{language:e})):o.jsx(Kf,{to:"/",replace:!0})},C_=()=>{const[t,e]=p.useState({isOpen:!1,mode:"signin"}),s=n=>{e({isOpen:!0,mode:n})},r=()=>{e({...t,isOpen:!1})};return p.useEffect(()=>{(async()=>{try{const a=await Pf("/api/check-route");console.log("API Response:",a)}catch(a){console.error("API Error:",a)}})()},[]),o.jsx(sx,{client:__,children:o.jsxs(Ay,{children:[o.jsx(fg,{}),o.jsx(Wg,{}),o.jsx(mx,{children:o.jsx(Wf,{children:o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(vx,{openAuthModal:s}),o.jsxs(zf,{children:[o.jsx(Fe,{path:"/",element:o.jsx(sc,{openAuthModal:s})}),o.jsx(Fe,{path:"/courses",element:o.jsx(sc,{openAuthModal:s})}),o.jsx(Fe,{path:"/learn/:language",element:o.jsx(S_,{})}),o.jsx(Fe,{path:"/:language-lesson/:lessonId",element:o.jsx(p_,{})}),o.jsx(Fe,{path:"/exercises",element:o.jsx(y_,{})}),o.jsx(Fe,{path:"/grammar",element:o.jsx(x_,{})}),o.jsx(Fe,{path:"/languages",element:o.jsx(b_,{})}),o.jsx(Fe,{path:"/phrases",element:o.jsx(w_,{})}),o.jsx(Fe,{path:"/units",element:o.jsx(j_,{})}),o.jsx(Fe,{path:"/admin",element:o.jsx(Nj,{})}),o.jsx(Fe,{path:"/admin/dashboard",element:o.jsx(n_,{})}),o.jsx(Fe,{path:"/reset-password",element:o.jsx(m_,{})}),o.jsx(Fe,{path:"/debug/lesson-progress",element:o.jsx(v_,{})}),o.jsx(Fe,{path:"*",element:o.jsx(g_,{})})]}),o.jsx(cw,{isOpen:t.isOpen,onClose:r,mode:t.mode})]})})})]})})};if(window.location.pathname==="/404.html"){const t=sessionStorage.redirect;t&&(sessionStorage.removeItem("redirect"),window.history.replaceState({},"",t))}const E_=Ic(document.getElementById("root"));E_.render(o.jsx(P.StrictMode,{children:o.jsx(Bc,{children:o.jsx(C_,{})})}));
